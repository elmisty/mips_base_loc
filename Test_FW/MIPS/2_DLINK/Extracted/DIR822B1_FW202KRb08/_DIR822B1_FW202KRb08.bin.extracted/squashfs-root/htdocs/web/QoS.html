<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> <html xmlns="http://www.w3c.org/1999/xhtml"> <head> <title>D-LINK</title> <meta http-equiv="X-UA-Compatible" content="IE=9"> <meta http-equiv="Content-Type" content="text/html; charset=utf-8"> <meta http-equiv="Content-Type" content="text/css"> <link rel=stylesheet type="text/css" href="css/jquery-ui.min.css?v=20200423094010" media="all"/> <link rel=stylesheet type="text/css" href="/css/style_h.css?v=20200423094010" media="all"/> <script type="text/javascript" charset="utf-8" src="/js/initialJQ.js"></script> <script type="text/javascript" charset="utf-8" src="/js/jquery-ui.custom.min.js?v=20200423094010"></script> <script type="text/javascript" charset="utf-8" src="/js/initialJS.js"></script> <script type="text/javascript" charset="utf-8" src="/js/initialCSS.js"></script> <script type="text/javascript" charset="utf-8" src="/js/initialValidate.js"></script> <script type="text/javascript" charset="utf-8" src="/js/DetectBrowserVersion.js?v=20200423094010"></script> <script type="text/javascript">var DetectBrowserMessage=1;var GetDBV=DetectBrowserVersion();if(GetDBV[0]=="Microsoft Internet Explorer"&&parseInt(GetDBV[1])<9){DetectBrowserMessage=0};</script> <script type="text/javascript">var HNAP=new HNAP_XML();var _ReciprocalRebootNumber=80;var macList="";var arrayQoS2Dv;var array2Dv;function LoadMACList(){$.ajax({url:"/js/MacList.json",type:"GET",dataType:"json",success:function(a){macList=a;GetXML()}})}LoadMACList();function Base92(b){var a=92;function e(g){if((g+35)==92){return"!"}return String.fromCharCode(g+35)}var d=Math.floor(b/a);var c=b%a;var f="";if(d>=a){f+=Base92(d)}else{f+=e(d)}f+=e(c);return f}function getVendor(f){var d="Unknown Vendor";var e;if((typeof macList=="undefined")||(macList=="")){return d}var c=f.split(":");var b=Base92(parseInt(c[0],16));var a=Base92(parseInt(c[1]+c[2],16));e=macList[b][a];if(typeof e=="undefined"){e=d}return decode_char_text(e)}function Load_HTML(){$("#header").load("header.html")}function Initial(){initialMenu();initialDetectRouterConnection()}var Total_Clients=0;var Total_QoSClients=0;var ClientNumber=0;function GetXML(){HNAP.GetXMLAsync("GetMultipleHNAPs",null,"GetXML",function(a){GetResult_1st(a)})}function GetResult_1st(a){if(a!=null){a.Set("GetMultipleHNAPs/GetQoSSettings");a.Set("GetMultipleHNAPs/GetClientInfo");HNAP.SetXMLAsync("GetMultipleHNAPs",a,function(b){GetResult_2nd(b)})}else{if(DebugMode==1){alert("[!!GetXML Error!!] Function: GetResult_1st")}}}function GetResult_2nd(b){var t=b.Get("GetMultipleHNAPsResponse/GetQoSSettingsResponse/uplink");var u=b.Get("GetMultipleHNAPsResponse/GetQoSSettingsResponse/downlink");document.getElementById("uplink_speed").value=t/1024;document.getElementById("downlink_speed").value=u/1024;var d=b.Get("GetMultipleHNAPsResponse/GetMultipleHNAPsResult");if(d=="OK"){var n=0;Total_QoSClients=b.Get("GetMultipleHNAPsResponse/GetQoSSettingsResponse/QoSInfoList/QoSInfo#");arrayQoS2Dv=new Array2D_Var(Total_QoSClients,6);for(var m=1;m<=Total_QoSClients;m++){arrayQoS2Dv[n][0]=b.Get("GetMultipleHNAPsResponse/GetQoSSettingsResponse/QoSInfoList/QoSInfo:"+m+"/Hostname");arrayQoS2Dv[n][1]=b.Get("GetMultipleHNAPsResponse/GetQoSSettingsResponse/QoSInfoList/QoSInfo:"+m+"/IPAddress");arrayQoS2Dv[n][2]=b.Get("GetMultipleHNAPsResponse/GetQoSSettingsResponse/QoSInfoList/QoSInfo:"+m+"/MACAddress");var p=b.Get("GetMultipleHNAPsResponse/GetQoSSettingsResponse/QoSInfoList/QoSInfo:"+m+"/Priority");switch(p){case"":case"0":arrayQoS2Dv[n][3]="none";break;case"1":arrayQoS2Dv[n][3]="medium";break;case"2":arrayQoS2Dv[n][3]="high";break;case"3":arrayQoS2Dv[n][3]="highest";break}arrayQoS2Dv[n][4]="Unknown Vendor";arrayQoS2Dv[n][5]=arrayQoS2Dv[n][0];n++}var g=0;var f=0;Total_Clients=b.Get("GetMultipleHNAPsResponse/GetClientInfoResponse/ClientInfoLists/ClientInfo#");array2Dv=new Array2DVar(Total_Clients,6);for(var l=1;l<=Total_Clients;l++){array2Dv[g][0]=b.Get("GetMultipleHNAPsResponse/GetClientInfoResponse/ClientInfoLists/ClientInfo:"+l+"/DeviceName");array2Dv[g][1]=decode_char_text(b.Get("GetMultipleHNAPsResponse/GetClientInfoResponse/ClientInfoLists/ClientInfo:"+l+"/NickName"));if(array2Dv[g][1]==""){if(array2Dv[g][0]==""){array2Dv[g][0]="Unknown";array2Dv[g][1]="Unknown"}else{array2Dv[g][1]=array2Dv[g][0]}}var o=b.Get("GetMultipleHNAPsResponse/GetClientInfoResponse/ClientInfoLists/ClientInfo:"+l+"/IPv4Address");var r=b.Get("GetMultipleHNAPsResponse/GetClientInfoResponse/ClientInfoLists/ClientInfo:"+l+"/ReserveIP");var e=b.Get("GetMultipleHNAPsResponse/GetClientInfoResponse/ClientInfoLists/ClientInfo:"+l+"/Type");if(o!=""){array2Dv[g][2]=o}else{if(r!=""&&e=="OFFLINE"){array2Dv[g][2]=r}}array2Dv[g][3]=b.Get("GetMultipleHNAPsResponse/GetClientInfoResponse/ClientInfoLists/ClientInfo:"+l+"/MacAddress");var s=getVendor(array2Dv[g][3]);if(s.length>19){s=s.substr(0,16)+"..."}array2Dv[g][4]=s;for(var q=0;q<Total_QoSClients;q++){var c=arrayQoS2Dv[q][2];if(c==array2Dv[g][3]){arrayQoS2Dv[q][4]=array2Dv[g][4];if(array2Dv[g][0]==""&&array2Dv[g][1]==""){}else{arrayQoS2Dv[q][5]=array2Dv[g][1]}setTimeout("addDevice_List("+q+")",100)}}array2Dv[g][5]="none";for(var h=0;h<Total_QoSClients;h++){if(array2Dv[g][3]==arrayQoS2Dv[h][2]){f=1}}if(f!=1){setTimeout("addDevice_List2("+g+")",100)}f=0;g++}document.getElementById("main").style.display="inline"}else{if(DebugMode==1){alert("[!!GetXML Error!!] Function: GetResult_2nd")}}}function addDevice_List(a){addDevice(arrayQoS2Dv[a][5],arrayQoS2Dv[a][4],arrayQoS2Dv[a][1],arrayQoS2Dv[a][3],arrayQoS2Dv[a][2],arrayQoS2Dv[a][0])}function addDevice_List2(a){addDevice(array2Dv[a][1],array2Dv[a][4],array2Dv[a][2],array2Dv[a][5],array2Dv[a][3],array2Dv[a][0])}function Array2DVar(a,c){this.length=a;this.x=a;this.y=c;for(var b=0;b<this.length;b++){this[b]=new Array(c)}}function Array2D_Var(a,c){this.length=a;this.x=a;this.y=c;for(var b=0;b<this.length;b++){this[b]=new Array(c)}};</script> <style>#slideshow{margin:0}#itemInstance{width:188px;height:86px;background-image:url('image/qos_itemBg.png');z-index:10}.dataElement{position:relative;background-image:url('image/qos_itemBg.png')}.dataElement_deviceName{position:absolute;top:18px;left:30px;color:#4598aa;font-size:13px;width:140px;overflow:hidden}.dataElement_vendor{position:absolute;text-transform:uppercase;top:38px;left:30px;color:#888;width:140px;overflow:hidden;font-size:12px}.dataElement_ip{position:absolute;top:55px;left:30px;color:#666;width:140px;overflow:hidden;font-size:12px}.dataElement_mac{position:absolute;display:none;top:55px;left:30px;color:#666;width:140px;overflow:hidden;font-size:12px}.dataElement_deviceNameReal{position:absolute;display:none;top:55px;left:30px;color:#666;width:140px;overflow:hidden;font-size:12px}.qos_label{font-size:16px;color:#888;text-align:center}#qos_label_alldevices{margin:18px 0 8px 0}#qos_label_priority{margin:25px 0 20px 0;font-size:12px}#prioity{width:825px;height:400px;margin:0 auto}#prioity_highest{position:relative;display:inline-block;margin:0 2px;width:200px;height:116px;vertical-align:top}#prioity_highest_bg{position:absolute;width:100%;height:100%;background-image:url('image/qos_priority_highest.png');background-size:contain}#prioity_high_bg{position:absolute;width:100%;height:100%;background-image:url('image/qos_priority_high.png');background-size:contain}#prioity_medium_bg{position:absolute;width:100%;height:100%;background-image:url('image/qos_priority_medium.png');background-size:contain}#prioity_highest_label,#prioity_high_label,#prioity_medium_label{position:absolute;top:4px;left:0;text-align:center;width:100%;color:#fff;font-size:14px}#prioity_highest_container,#prioity_high_container,#prioity_medium_container{position:relative;top:22px;left:6px}#prioity_highest_hitarea{position:absolute;top:0;left:0;width:200px;height:116px;background-color:blue;z-index:500;opacity:0;filter:alpha(opacity=0)}#prioity_high{position:relative;display:inline-block;margin:0 2px;width:200px;height:202px;vertical-align:top}#prioity_high_hitarea{position:absolute;top:0;left:0;width:200px;height:202px;background-color:blue;z-index:500;opacity:0;filter:alpha(opacity=0)}#prioity_medium{position:relative;display:inline-block;margin:0 2px;width:388px;height:374px;vertical-align:top}#prioity_medium_hitarea{position:absolute;top:0;left:0;width:388px;height:374px;background-color:blue;z-index:500;opacity:0;filter:alpha(opacity=0)}</style> </head> <body onselectstart="return false;" ondragstart="return false;"> <form name="qos_form" id="qos_form" method="POST" action=""> <div id="wrapper"> <div id="header"></div> <div id="menu"></div> <div id="menu_edge"></div> <div id="content"> <div id="info"> <div id="FunctionName">&nbsp;<script>I18N("h","QoS Engine");</script></div> <div id="wallimage"><img src="image/page_QoS.png" alt="" width="195" height="119"/></div> <div id="directions"> <script>I18N("h","Connected clients can be assigned Internet access priority. Click and drag client cards into open slots.");</script> </div> </div> <div id="funcBar"> <div id="pagePath"><script>I18N("h","Features");</script> >> <script>I18N("h","QoS Engine");</script></div> <ul id="rightFunc"> <li style="display:block"><div id="Save_btn" onclick="document.getElementById('sumbit_CheckData').click()" style="cursor:pointer; display:none"><script>I18N("h","Save");</script></div></li> <li style="display:block"><div id="Save_Disable_btn"><script>I18N("h","Save");</script></div></li> <input id="sumbit_CheckData" class="submit" type="submit" value="Submit" style="display:none"/> </ul> </div> <div id="qos_label_alldevices" class="qos_label"><script>I18N("h","Bandwidth");</script></div> <table class="block" border="0" style="height: 82px;"> <tbody> <tr> <th><script>I18N("h","Uplink Speed(Mbps)");</script>:</th> <td><input class="styled-text" type="text" name="uplink_speed" size="27" maxlength="8" id="uplink_speed"></td> <td><img src="image/Infor2.png" style="cursor:pointer;" onclick="document.getElementById('CreatePopAlertMessage').style.display='inline';document.getElementById('popRect').style.display='';document.getElementById('AlertPopRect').style.display='none';" width="24" height="24"></td> </tr> <tr> <th><script>I18N("h","Downlink Speed(Mbps)");</script>:</th> <td><input class="styled-text" type="text" name="downlink_speed" size="27" maxlength="8" id="downlink_speed"></td> </tr> </tbody> </table> <hr> <div id="main" style="display:none"> <div id="qos_label_alldevices" class="qos_label"><script>I18N("h","Connected Clients");</script></div> <div id="slideshow"></div> <div id="qos_label_priority" class="qos_label"><script>I18N("h","Drag the device cards above to the Priority boxes below.");</script></div> <div id="prioity"> <div id="prioity_highest"> <div id="prioity_highest_bg"></div> <div id="prioity_highest_label"><script>I18N("h","Highest");</script></div> <div id="prioity_highest_container"></div> <div id="prioity_highest_hitarea" style="display:none;cursor:pointer;" onmouseover="setDraggingTargetPriority('highest')" onmouseout="setDraggingTargetPriority('none')"></div> </div> <div id="prioity_high"> <div id="prioity_high_bg"></div> <div id="prioity_highest_label"><script>I18N("h","High");</script></div> <div id="prioity_high_container"></div> <div id="prioity_high_hitarea" style="display:none;cursor:pointer;" onmouseover="setDraggingTargetPriority('high')" onmouseout="setDraggingTargetPriority('none')"></div> </div> <div id="prioity_medium"> <div id="prioity_medium_bg"></div> <div id="prioity_medium_label"><script>I18N("h","Medium");</script></div> <div id="prioity_medium_container"></div> <div id="prioity_medium_hitarea" style="display:none;cursor:pointer;" onmouseover="setDraggingTargetPriority('medium')" onmouseout="setDraggingTargetPriority('none')"></div> </div> </div> </div> <div id="CreatePopAlertMessage" style="display:none"> <div id="popRect" style="display:none"> <div id="dialogBox" style="width: 616px; overflow-x: hidden; overflow-y: auto; max-height: 554px; top: 40px;"> <div id="closeCreatePopBtn" onclick="document.getElementById('CreatePopAlertMessage').style.display='none';document.getElementById('popRect').style.display='none';document.getElementById('AlertPopRect').style.display='';" style="cursor:pointer;"></div> <div style="padding-top: 80px;font-weight:bold;"><script>I18N("h","Specify your internet speed provided by your ISP; for example 10Mbps Upload, 20 Mbps download. You can measure your uplink and downlink speed with a speed test service on the internet.");</script></div> <div style="padding-top: 60px;"> <button type="button" class="styled-button_enable" onclick="document.getElementById('CreatePopAlertMessage').style.display='none';document.getElementById('popRect').style.display='none';document.getElementById('AlertPopRect').style.display='';" style="cursor:pointer;">OK</button> </div> </div> </div> <div id="AlertPopRect"> <div id="AlertPopBody"> <table class="myAlertPop_table_b" id="waitSettingFinish" border="0" cellspacing="0"> <tbody> <tr> <td> <center><div id="Loading_pop_image2"></div></center> </td> </tr> <tr> <td label id="reciprocal_Number"></label></td> </tr> <tr> <td id="dialog_msg_black2"><script>I18N("h","Your changes are being saved.");</script></td> </tr> </tbody> </table> </div> </div> </div> </div> <div id="DetectRouterConnection" style="display:none"></div> <div id="footer"> <div id="copyright"><script>I18N("h","COPYRIGHT");</script></div> </div> </div> <div id="itemInstance" style="position:absolute; top:0; left:0; display:none;cursor:pointer;"> <div class="data"> <div class="dataElement_deviceName" id="itemInstance_deviceName"></div> <div class="dataElement_vendor" id="itemInstance_vendor"></div> <div class="dataElement_ip" id="itemInstance_ip"></div> <div class="dataElement_mac" id="itemInstance_mac"></div> <div class="dataElement_deviceNameReal" id="itemInstance_deviceNameReal"></div> </div> </div> </form> <script type="text/javascript" charset="utf-8" src="./js/Slideshow.js"></script> <script type="text/javascript" charset="utf-8" src="./js/GridPanel.js"></script> <script>var mousex=0;var mousey=0;var itemMouseOffsetX=0;var itemMouseOffsetY=0;var instance=document.getElementById("itemInstance");var isDraggingItem=false;var dragginItemData=null;var targetPriority="";var deviceData=function(b,g,e,a,f,d){this.deviceName=b;this.vendor=g;this.ip=e;this.mac=f;this.priority=a;this.deviceNameReal=d;this.element;this.element=document.createElement("div");this.element.style.width="188px";this.element.style.height="86px";this.element.style.fontSize="12px";this.element.style.cursor="pointer";this.element.style.verticalAlign="top";this.element.style.margin="0 6px";this.element.className="dataElement";this.element.onmouseover=function(){this.style.backgroundPosition="bottom left"};this.element.onmouseout=function(){this.style.backgroundPosition="top left"};this.element_deviceName=document.createElement("div");this.element_deviceName.className="dataElement_deviceName";this.element_deviceName.innerHTML=b;this.element_vendor=document.createElement("div");this.element_vendor.className="dataElement_vendor";this.element_vendor.innerHTML=g;this.element_ip=document.createElement("div");this.element_ip.className="dataElement_ip";this.element_ip.innerHTML=e;this.element_mac=document.createElement("div");this.element_mac.className="dataElement_mac";this.element_mac.innerHTML=f;this.element_deviceNameReal=document.createElement("div");this.element_deviceNameReal.className="dataElement_deviceNameReal";this.element_deviceNameReal.innerHTML=d;this.element.appendChild(this.element_deviceName);this.element.appendChild(this.element_vendor);this.element.appendChild(this.element_ip);this.element.appendChild(this.element_mac);this.element.appendChild(this.element_deviceNameReal);if(a!="none"){this.element.style.width="0px";this.element.style.opacity="0";this.element.style.filter="alpha(opacity=0)";this.element.style.margin="0";this.element_deviceName.style.display="none";this.element_vendor.style.display="none";this.element_ip.style.display="none"}var c=this;this.setPriority=function(h){c.priority=h};this.element.onmousedown=function(){if(c.priority=="none"){$(this.element).stop();var h=getElementXY(this);itemMouseOffsetX=h.x-mousex;itemMouseOffsetY=h.y-mousey;document.getElementById("itemInstance_deviceName").innerHTML=c.deviceName;document.getElementById("itemInstance_vendor").innerHTML=c.vendor;document.getElementById("itemInstance_ip").innerHTML=c.ip;document.getElementById("itemInstance_mac").innerHTML=c.mac;document.getElementById("itemInstance_deviceNameReal").innerHTML=c.deviceNameReal;c.hideElement_noAnimation();instance.style.top=h.y+"px";instance.style.left=h.x+"px";instance.style.display="block";startDrag(c)}};if(this.element.addEventListener){this.element.addEventListener("touchstart",function(j){if(c.priority=="none"){$(this.element).stop();var h=getElementXY(this);itemMouseOffsetX=h.x-j.changedTouches[0].pageX;itemMouseOffsetY=h.y-j.changedTouches[0].pageY;document.getElementById("itemInstance_deviceName").innerHTML=c.deviceName;document.getElementById("itemInstance_vendor").innerHTML=c.vendor;document.getElementById("itemInstance_ip").innerHTML=c.ip;document.getElementById("itemInstance_mac").innerHTML=c.mac;document.getElementById("itemInstance_deviceNameReal").innerHTML=c.deviceNameReal;c.hideElement_noAnimation();instance.style.top=h.y+"px";instance.style.left=h.x+"px";instance.style.display="block";startDrag(c)}})}this.showElement_backToSlideshow=function(){mySlideshow.putAndSlideToLast(c.element,function(){$(c.element).stop();$(c.element).animate({opacity:1,width:"188px"},300,"easeOutCubic");c.element.style.cursor="pointer";c.element.style.margin="0 6px";c.element_deviceName.style.display="block";c.element_vendor.style.display="block";c.element_ip.style.display="block";c.element_mac.style.display="none";c.element_deviceNameReal.style.display="none"})};this.showElement_noAnimation=function(){c.element.style.width="188px";$(c.element).css({opacity:1});c.element.style.opacity=1;c.element.style.margin="0 6px";c.element.style.cursor="pointer";c.element_deviceName.style.display="block";c.element_vendor.style.display="block";c.element_ip.style.display="block";c.element_mac.style.display="none";c.element_deviceNameReal.style.display="none"};this.hideElement=function(){$(c.element).stop();$(c.element).animate({width:"0px",margin:"0px"},300,"easeOutCubic");c.element.style.cursor="default";c.element_deviceName.style.display="none";c.element_vendor.style.display="none";c.element_ip.style.display="none";c.element_mac.style.display="none";c.element_deviceNameReal.style.display="none";mySlideshow.updateToLastPage()};this.hideElement_noAnimation=function(){c.element.style.opacity="0";$(c.element).css({opacity:0});c.element_deviceName.style.display="none";c.element_vendor.style.display="none";c.element_ip.style.display="none";c.element_mac.style.display="none";c.element_deviceNameReal.style.display="none"}};var deviceDataArray=new Array();var createDeviceData=function(b,g,e,a,f,d){var c=new deviceData(b,g,e,a,f,d);deviceDataArray.push(c);return c};var mySlideshow=new Slideshow("slideshow");function startDrag(a){isDraggingItem=true;dragginItemData=a;document.getElementById("prioity_highest_hitarea").style.display="block";document.getElementById("prioity_high_hitarea").style.display="block";document.getElementById("prioity_medium_hitarea").style.display="block"}function endDrag(){isDraggingItem=false;document.getElementById("prioity_highest_hitarea").style.display="none";document.getElementById("prioity_high_hitarea").style.display="none";document.getElementById("prioity_medium_hitarea").style.display="none";$("#prioity_highest_bg").stop();$("#prioity_highest_bg").stop();$("#prioity_highest_bg").stop();$("#prioity_highest_bg").animate({opacity:1},200);$("#prioity_high_bg").animate({opacity:1},200);$("#prioity_medium_bg").animate({opacity:1},200)}document.body.onmousemove=function(a){mousex=event.clientX+document.body.scrollLeft;mousey=event.clientY+document.body.scrollTop;if(isDraggingItem){instance.style.top=mousey+itemMouseOffsetY+"px";instance.style.left=mousex+itemMouseOffsetX+"px"}};window.onmousemove=function(a){mousex=a.clientX;mousey=a.clientY;if(isDraggingItem){instance.style.top=mousey+itemMouseOffsetY+"px";instance.style.left=mousex+itemMouseOffsetX+"px"}};function mouseup(){if(!isDraggingItem){return}switch(targetPriority){case"highest":if(!priorityGrid_highest.isFull()){if(!priorityGrid_highest.existData(dragginItemData)){addDataToPriorityGrid(dragginItemData,priorityGrid_highest,"highest");endDrag();return}}break;case"high":if(!priorityGrid_high.isFull()){if(!priorityGrid_high.existData(dragginItemData)){addDataToPriorityGrid(dragginItemData,priorityGrid_high,"high");endDrag();return}}break;case"medium":if(!priorityGrid_medium.isFull()){if(!priorityGrid_medium.existData(dragginItemData)){addDataToPriorityGrid(dragginItemData,priorityGrid_medium,"medium");endDrag();return}}break;default:endDrag();break}var a=getElementXY(dragginItemData.element);$(instance).animate({top:a.y,left:a.x},200,function(){instance.style.display="none";dragginItemData.showElement_noAnimation()});endDrag()}document.body.onmouseup=function(a){mouseup()};window.onmouseup=function(a){mouseup()};function checkIfInElement(b,f,c){var e=getElementXY(c);var d=parseInt(getStyle(c,"width").replace("px",""));var a=parseInt(getStyle(c,"height").replace("px",""));if(b>e.x&&b<e.x+d&&f>e.y&&f<e.y+a){return true}else{return false}}function getStyle(a,b){var c="";if(document.defaultView&&document.defaultView.getComputedStyle){c=document.defaultView.getComputedStyle(a,"").getPropertyValue(b)}else{if(a.currentStyle){b=b.replace(/\-(\w)/g,function(d,e){return e.toUpperCase()});c=a.currentStyle[b]}}return c}if(document.addEventListener){document.addEventListener("touchmove",function(d){mousex=d.changedTouches[0].pageX;mousey=d.changedTouches[0].pageY;if(isDraggingItem){d.preventDefault();instance.style.top=mousey+itemMouseOffsetY+"px";instance.style.left=mousex+itemMouseOffsetX+"px";var c=checkIfInElement(mousex,mousey,document.getElementById("prioity_highest_hitarea"));if(c){setDraggingTargetPriority("highest")}else{var a=checkIfInElement(mousex,mousey,document.getElementById("prioity_high_hitarea"));if(a){setDraggingTargetPriority("high")}else{var b=checkIfInElement(mousex,mousey,document.getElementById("prioity_medium_hitarea"));if(b){setDraggingTargetPriority("medium")}else{setDraggingTargetPriority("none")}}}}})}if(document.addEventListener){document.addEventListener("touchend",function(a){mouseup()})}function addDataToPriorityGrid(d,b,a){var c=b.nextCellPosition();$(instance).animate({top:c.y,left:c.x},100,function(){instance.style.display="none";b.addData(d);d.setPriority(a);d.hideElement();save_button_changed();changeFlag=true;checkFlag=true;changeTimeoutAction()})}function setDraggingTargetPriority(a){if(isDraggingItem){targetPriority=a;switch(a){case"highest":$("#prioity_highest_bg").stop();$("#prioity_high_bg").stop();$("#prioity_medium_bg").stop();$("#prioity_highest_bg").animate({opacity:1},200);$("#prioity_high_bg").animate({opacity:0.5},200);$("#prioity_medium_bg").animate({opacity:0.5},200);break;case"high":$("#prioity_highest_bg").stop();$("#prioity_high_bg").stop();$("#prioity_medium_bg").stop();$("#prioity_highest_bg").animate({opacity:0.5},200);$("#prioity_high_bg").animate({opacity:1},200);$("#prioity_medium_bg").animate({opacity:0.5},200);break;case"medium":$("#prioity_highest_bg").stop();$("#prioity_high_bg").stop();$("#prioity_medium_bg").stop();$("#prioity_highest_bg").animate({opacity:0.5},200);$("#prioity_high_bg").animate({opacity:0.5},200);$("#prioity_medium_bg").animate({opacity:1},200);break;case"none":$("#prioity_highest_bg").stop();$("#prioity_high_bg").stop();$("#prioity_medium_bg").stop();$("#prioity_highest_bg").animate({opacity:0.5},200);$("#prioity_high_bg").animate({opacity:0.5},200);$("#prioity_medium_bg").animate({opacity:0.5},200);break}}}var InstanceObject=function(){this.deviceName="none";this.vendor="none";this.ip="none";this.mac="none";this.deviceNameReal="none";this.element;this.delete_btn;this.status;this.parent;this.deviceData;this.element=document.createElement("div");this.element.style.width="188px";this.element.style.height="86px";this.element.style.fontSize="12px";this.element.className="dataElement";this.element.style.cursor="default";var b=document.createElement("div");b.className="dataElement_deviceName";b.innerHTML=this.deviceName;var g=document.createElement("div");g.className="dataElement_vendor";g.innerHTML=this.vendor;var e=document.createElement("div");e.className="dataElement_ip";e.innerHTML=this.ip;var f=document.createElement("div");f.className="dataElement_mac";f.innerHTML=this.mac;var d=document.createElement("div");d.className="dataElement_deviceNameReal";d.innerHTML=this.deviceNameReal;var a=document.createElement("div");a.style.position="absolute";a.style.top="15px";a.style.right="14px";a.style.width="13px";a.style.height="13px";a.style.backgroundImage="url('image/slideshow_closeBtn.png')";a.style.cursor="pointer";this.element.appendChild(b);this.element.appendChild(g);this.element.appendChild(e);this.element.appendChild(f);this.element.appendChild(d);this.element.appendChild(a);var c=this;a.onclick=function(){c.deviceData.setPriority("none");c.deviceData.showElement_backToSlideshow();c.parent.removeData(c.deviceData);save_button_changed();changeFlag=true;checkFlag=true;changeTimeoutAction()};this.setDeviceData=function(h){c.deviceData=h;b.innerHTML=h.deviceName;g.innerHTML=h.vendor;e.innerHTML=h.ip;f.innerHTML=h.mac;d.innerHTML=h.deviceNameReal};this.removeDeviceData=function(){c.deviceData=null;b.innerHTML="none";g.innerHTML="none";e.innerHTML="none";f.innerHTML="none";d.innerHTML="none"};this.show=function(){$(this.element).css({opacity:1});this.element.style.opacity=1;b.style.display="block";g.style.display="block";e.style.display="block";a.style.display="block"};this.hide=function(){$(this.element).css({opacity:0});this.element.style.opacity=0;b.style.display="none";g.style.display="none";e.style.display="none";a.style.display="none"}};var priorityGrid_highest=new GridPanel(1,1,"prioity_highest_container");var highestInstance=new InstanceObject();priorityGrid_highest.addInstance(highestInstance);var priorityGrid_high=new GridPanel(2,1,"prioity_high_container");for(var i=0;i<2;i++){var _instance=new InstanceObject();priorityGrid_high.addInstance(_instance)}var priorityGrid_medium=new GridPanel(4,2,"prioity_medium_container");for(var i=0;i<8;i++){var _instance=new InstanceObject();priorityGrid_medium.addInstance(_instance)}function addDevice(b,g,e,a,f,d){var c=createDeviceData(b,g,e,a,f,d);mySlideshow.addItem(c);switch(a){case"highest":if(!priorityGrid_highest.isFull()){priorityGrid_highest.addData(c)}else{c.setPriority("none")}break;case"high":if(!priorityGrid_high.isFull()){priorityGrid_high.addData(c)}else{c.setPriority("none")}break;case"medium":if(!priorityGrid_medium.isFull()){priorityGrid_medium.addData(c)}else{c.setPriority("none")}break}}function getElementXY(b){var a=0;var c=0;while(b!=null){a+=b.offsetLeft;c+=b.offsetTop;b=b.offsetParent}return{x:a,y:c}}function getMousePosition(c){var b;var a;if(!isIE){b=c.pageX;a=c.pageY}if(isIE){b=event.clientX+document.body.scrollLeft;a=event.clientY+document.body.scrollTop}return true}function SetXML(){document.getElementById("CreatePopAlertMessage").style.display="inline";HNAP.GetXMLAsync("SetQoSSettings",null,"GetXML",function(a){SetResult_1st(a)})}function SetResult_1st(b){if(b!=null){var a=0;b.Set("SetQoSSettings/uplink",document.getElementById("uplink_speed").value*1024);b.Set("SetQoSSettings/downlink",document.getElementById("downlink_speed").value*1024);for(var c=1;c<=deviceDataArray.length;c++){b.Set("SetQoSSettings/QoSInfoData/QoSInfo:"+c+"/Hostname",deviceDataArray[a].deviceNameReal);b.Set("SetQoSSettings/QoSInfoData/QoSInfo:"+c+"/IPAddress",deviceDataArray[a].ip);b.Set("SetQoSSettings/QoSInfoData/QoSInfo:"+c+"/MACAddress",deviceDataArray[a].mac);switch(deviceDataArray[a].priority){case"highest":b.Set("SetQoSSettings/QoSInfoData/QoSInfo:"+c+"/Priority","3");break;case"high":b.Set("SetQoSSettings/QoSInfoData/QoSInfo:"+c+"/Priority","2");break;case"medium":b.Set("SetQoSSettings/QoSInfoData/QoSInfo:"+c+"/Priority","1");break;case"none":b.Set("SetQoSSettings/QoSInfoData/QoSInfo:"+c+"/Priority","0");break}b.Set("SetQoSSettings/QoSInfoData/QoSInfo:"+c+"/Type","TC_WFQ");a++}HNAP.SetXMLAsync("SetQoSSettings",b,function(d){SetResult_2nd(d)})}else{if(DebugMode==1){alert("[!!SetXML Error!!] Function: SetResult_1st")}}}function SetResult_2nd(b){var a=b.Get("SetQoSSettingsResponse/SetQoSSettingsResult");if(a=="OK"){waitSettingFinished()}else{if(a=="REBOOT"){Device_Reboot()}else{if(a=="ERROR"){if(DebugMode==1){alert("[!!SetXML Error!!] Function: SetResult_2nd")}window.location.reload()}}}}function Device_Reboot(){HNAP.GetXMLAsync("Reboot",null,"GetXML",function(a){GetResult_Reboot(a)})}function GetResult_Reboot(a){if(a!=null){HNAP.SetXMLAsync("Reboot",a,function(b){SetResult_Reboot(b)})}}function SetResult_Reboot(b){var a=b.Get("RebootResponse/RebootResult");if(a=="OK"||a=="REBOOT"){document.getElementById("dialog_msg_black2").innerHTML=I18N("j","Rebooting");Start_reciprocal_Number_Reboot()}}function Start_reciprocal_Number_Reboot(){if(_ReciprocalRebootNumber>=0){document.getElementById("reciprocal_Number").innerHTML=_ReciprocalRebootNumber+" "+I18N("j","Sec");_ReciprocalRebootNumber--;setTimeout("Start_reciprocal_Number_Reboot()",1000)}else{redirectPage(null)}}function waitSettingFinished(){window.location.reload()}function CheckConnectionStatus(){$.ajax({cache:false,url:"./js/CheckConnection",timeout:5000,type:"GET",success:function(a){SetXML()},error:function(){document.getElementById("DetectRouterConnection").style.display="inline"}})}function getAllDeviceStatus(){for(var c=0;c<deviceDataArray.length;c++){var a=deviceDataArray[c].deviceName;var g=deviceDataArray[c].vendor;var f=deviceDataArray[c].ip;var b=deviceDataArray[c].priority;var e=deviceDataArray[c].mac;var d=deviceDataArray[c].deviceNameReal;alert("name:      "+a+"\nvendor:   "+g+"\nip:            "+f+"\npriority:   "+b+"\nmac:   "+e+"\ndeviceNameReal:   "+d)}}document.onkeydown=function(b){b=b||window.event;var a=b.charCode||b.keyCode;if(a==13){}};$(function(){$("input").keydown(function(){save_button_changed()})});function save_button_changed(){document.getElementById("Save_Disable_btn").style.display="none";document.getElementById("Save_btn").style.display="block";changeFlag=true;checkFlag=true;changeTimeoutAction()};</script> </body> <script type="text/javascript" charset="utf-8">$(document).ready(function(){var a="";$.validator.addMethod("checkNumberValue",function(e,b){var d=/(^[0-9]+$)/;var c=false;if(d.test(e)){if(e>=1&&e<=1000){c=true}}return c},jQuery.validator.messages.check_qos);$("#qos_form").validate({rules:{uplink_speed:{required:true,checkNumberValue:true},downlink_speed:{required:true,checkNumberValue:true}},messages:{uplink_speed:{required:jQuery.validator.messages.check_qos},downlink_speed:{required:jQuery.validator.messages.check_qos}},submitHandler:function(b){CheckConnectionStatus()}})});</script> <script type="text/javascript">Load_HTML();Initial();setMenu("menu_Advanced");$(document).tooltip();startTimeout();</script> </html>