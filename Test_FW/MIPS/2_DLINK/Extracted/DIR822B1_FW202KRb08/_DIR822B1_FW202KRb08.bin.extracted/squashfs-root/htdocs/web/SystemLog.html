<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> <html xmlns="http://www.w3c.org/1999/xhtml"> <head> <title>D-LINK</title> <meta http-equiv="X-UA-Compatible" content="IE=9"> <meta http-equiv="Content-Type" content="text/html; charset=utf-8"> <meta http-equiv="Content-Type" content="text/css"> <link rel=stylesheet type="text/css" href="/css/jquery.selectbox.css?v=20200423094010"/> <script type="text/javascript" charset="utf-8" src="/js/initialJQ.js"></script> <script type="text/javascript" charset="utf-8" src="/js/initialJS.js"></script> <script type="text/javascript" charset="utf-8" src="/js/initialCSS.js"></script> <script type="text/javascript" charset="utf-8" src="/js/initialValidate.js"></script> <script>$(document).ready(function(){presetCheckBox("systemLogEnable",true);presetCheckBox("enableEmailNotification",true);presetCheckBox("enableAuthentication",true);presetCheckBox("onLogFull",true);presetCheckBox("onSchedule",true);$("div.checkbox_on"||"div.checkbox_off").click(function(c){var d=c.target.id+"_ck";if(c.target.getAttribute("class")=="checkbox_on"){var b=I18N("j","Disabled");c.target.setAttribute("class","checkbox_off");c.target.setAttribute("className","checkbox_off");document.getElementById(c.target.id).innerHTML='<input type="checkbox" name='+c.target.id+" id="+d+" checked>"+b;document.getElementById(d).checked=false;if(d=="systemLogEnable_ck"){document.getElementById("sysLogServer_Description").disabled=true;$("#sysLogServerName").selectbox("disable");document.getElementById("show_ServerIPAddress").style.display="none"}if(d=="enableEmailNotification_ck"){document.getElementById("EA").style.display="none";document.getElementById("FEA").style.display="none";document.getElementById("TEA").style.display="none";document.getElementById("SSA").style.display="none";document.getElementById("SSP").style.display="none";document.getElementById("AN").style.display="none";document.getElementById("PW").style.display="none";document.getElementById("fromEmailAddress").disabled=true;document.getElementById("toEmailAddress").disabled=true;document.getElementById("smtpServerAddress").disabled=true;document.getElementById("smtpServerPort").disabled=true;presetCheckBox("enableAuthentication",false);document.getElementById("enableAuthentication").disabled=true;document.getElementById("accountName").disabled=true;document.getElementById("password").disabled=true;presetCheckBox("onLogFull",false);document.getElementById("onLogFull").disabled=true;presetCheckBox("onSchedule",false);document.getElementById("onSchedule").disabled=true;document.getElementById("sendLog").style.display="none";if(document.getElementById("onSchedule_ck").checked=="false"){document.getElementById("showSchedule").style.display="none"}else{document.getElementById("showSchedule").style.display="none"}}if(d=="enableAuthentication_ck"){document.getElementById("AN").style.display="none";document.getElementById("PW").style.display="none";document.getElementById("accountName").disabled=true;document.getElementById("password").disabled=true}if(d=="onSchedule_ck"){document.getElementById("showSchedule").style.display="none"}changeFlag=true;save_button_changed()}else{var a=I18N("j","Enabled");c.target.setAttribute("class","checkbox_on");c.target.setAttribute("className","checkbox_on");document.getElementById(c.target.id).innerHTML='<input type="checkbox" name='+c.target.id+" id="+d+' checked="">'+a;document.getElementById(d).checked=true;if(d=="systemLogEnable_ck"){document.getElementById("sysLogServer_Description").disabled=false;$("#sysLogServerName").selectbox("enable");document.getElementById("show_ServerIPAddress").style.display="table-row"}if(d=="enableEmailNotification_ck"){document.getElementById("EA").style.display="table-row";document.getElementById("FEA").style.display="table-row";document.getElementById("TEA").style.display="table-row";document.getElementById("SSA").style.display="table-row";document.getElementById("SSP").style.display="table-row";document.getElementById("fromEmailAddress").disabled=false;document.getElementById("toEmailAddress").disabled=false;document.getElementById("smtpServerAddress").disabled=false;document.getElementById("smtpServerPort").disabled=false;document.getElementById("enableAuthentication").disabled=false;document.getElementById("onLogFull").disabled=false;document.getElementById("onSchedule").disabled=false;document.getElementById("sendLog").style.display="inline";if(document.getElementById("onSchedule_ck").checked=="true"){document.getElementById("showSchedule").style.display="table-row"}}if(d=="enableAuthentication_ck"){document.getElementById("AN").style.display="table-row";document.getElementById("PW").style.display="table-row";document.getElementById("accountName").disabled=false;document.getElementById("password").disabled=false}if(d=="onSchedule_ck"){document.getElementById("showSchedule").style.display="table-row"}changeFlag=true;save_button_changed()}})});</script> <script type="text/javascript">var HNAP=new HNAP_XML();var Total_ScheduleRules=0;var Total_Client=0;var Limit_Client=256;var lanIP;function Load_HTML(){$("#header").load("header.html")}function Initial(){initialMenu();initialDetectRouterConnection()}function GetScheduleList(){HNAP.GetXMLAsync("GetScheduleSettings",null,"GetValue",function(a){GetResult_1st(a)})}function GetResult_1st(b){var e=b.Get("GetScheduleSettingsResponse/GetScheduleSettingsResult");if(e=="OK"){var d=b.Get("GetScheduleSettingsResponse/ScheduleInfoLists#");Total_ScheduleRules=d;var f=document.getElementById("onSchedule_Select");for(var c=1;c<=Total_ScheduleRules;c++){var a=decode_char_text(b.Get("GetScheduleSettingsResponse/ScheduleInfoLists:"+c+"/ScheduleName"));f.options.add(new Option(a,a))}HNAP.GetXMLAsync("GetClientInfo",null,"GetValue",function(g){GetResult_2nd(g)})}else{if(DebugMode==1){alert("[!!GetXML Error!!] Function: GetResult_1st")}}}function GetResult_2nd(d){var g=d.Get("GetClientInfoResponse/GetClientInfoResult");if(g=="OK"){Total_Client=d.Get("GetClientInfoResponse/ClientInfoLists/ClientInfo#");var f=document.getElementById("sysLogServerName");var b=1;for(var e=1;e<=Total_Client;e++){var a=d.Get("GetClientInfoResponse/ClientInfoLists/ClientInfo:"+e+"/DeviceName");var c=d.Get("GetClientInfoResponse/ClientInfoLists/ClientInfo:"+e+"/IPv4Address");if(a==""){a="Unknown"}if(c!=""){f.options.add(new Option(c+" ("+a+")",b));b++}}HNAP.GetXMLAsync("GetSysLogSettings",null,"GetValue",function(h){GetResult_3rd(h)})}else{if(DebugMode==1){alert("[!!GetXML Error!!] Function: GetResult_2nd")}}}function GetResult_3rd(b){var d=b.Get("GetSysLogSettingsResponse/GetSysLogSettingsResult");if(d=="OK"){var a=b.Get("GetSysLogSettingsResponse/SysLog");if(a=="true"){presetCheckBox("systemLogEnable",true);document.getElementById("sysLogServer_Description").disabled=false;document.getElementById("show_ServerIPAddress").style.display="table-row"}else{presetCheckBox("systemLogEnable",false);document.getElementById("sysLogServer_Description").disabled=true;document.getElementById("show_ServerIPAddress").style.display="none"}var c=b.Get("GetSysLogSettingsResponse/IPAddress");document.getElementById("sysLogServer_Description").value=c;HNAP.GetXMLAsync("GetSysEmailSettings",null,"GetValue",function(e){GetResult_4th(e)})}else{if(DebugMode==1){alert("[!!GetXML Error!!] Function: GetResult_3rd")}}}function GetResult_4th(c){var e=c.Get("GetSysEmailSettingsResponse/GetSysEmailSettingsResult");if(e=="OK"){var o=c.Get("GetSysEmailSettingsResponse/SysEmail");if(o=="true"){presetCheckBox("enableEmailNotification",true);document.getElementById("sendLog").style.display="inline"}else{presetCheckBox("enableEmailNotification",false);document.getElementById("EA").style.display="none";document.getElementById("FEA").style.display="none";document.getElementById("TEA").style.display="none";document.getElementById("SSA").style.display="none";document.getElementById("SSP").style.display="none";document.getElementById("fromEmailAddress").disabled=true;document.getElementById("toEmailAddress").disabled=true;document.getElementById("smtpServerAddress").disabled=true;document.getElementById("smtpServerPort").disabled=true;presetCheckBox("enableAuthentication",false);document.getElementById("enableAuthentication").disabled=true;document.getElementById("accountName").disabled=true;document.getElementById("password").disabled=true;document.getElementById("sendLog").style.display="none";presetCheckBox("onLogFull",false);document.getElementById("onLogFull").disabled=true;presetCheckBox("onSchedule",false);document.getElementById("onSchedule").disabled=true;document.getElementById("onSchedule_Select").disabled=true}var p=c.Get("GetSysEmailSettingsResponse/EmailFrom");document.getElementById("fromEmailAddress").value=p;var m=c.Get("GetSysEmailSettingsResponse/EmailTo");document.getElementById("toEmailAddress").value=m;var j=c.Get("GetSysEmailSettingsResponse/SMTPServerAddress");document.getElementById("smtpServerAddress").value=j;var b=c.Get("GetSysEmailSettingsResponse/SMTPServerPort");document.getElementById("smtpServerPort").value=b;var d=c.Get("GetSysEmailSettingsResponse/Authentication");if(d=="true"){presetCheckBox("enableAuthentication",true)}else{presetCheckBox("enableAuthentication",false);document.getElementById("AN").style.display="none";document.getElementById("PW").style.display="none";document.getElementById("accountName").disabled=true;document.getElementById("password").disabled=true}var g=c.Get("GetSysEmailSettingsResponse/AccountName");document.getElementById("accountName").value=g;var n=c.Get("GetSysEmailSettingsResponse/AccountPassword");document.getElementById("password").value=n;var l=c.Get("GetSysEmailSettingsResponse/OnLogFull");if(l=="true"){presetCheckBox("onLogFull",true)}else{presetCheckBox("onLogFull",false)}var k=c.Get("GetSysEmailSettingsResponse/OnSchedule");if(k=="true"){presetCheckBox("onSchedule",true);var h=document.getElementById("onSchedule_Select");var a=decode_char_text(c.Get("GetSysEmailSettingsResponse/ScheduleName"));for(var f=0;f<=Total_ScheduleRules;f++){if(h.options[f].text===a){$("#onSchedule_Select").selectbox("detach");$("#onSchedule_Select").val(a);$("#onSchedule_Select").selectbox("attach");break}}}else{presetCheckBox("onSchedule",false)}$("#sysLogServerName").selectbox();$("#onSchedule_Select").selectbox();if(document.getElementById("systemLogEnable_ck").checked!="1"){$("#sysLogServerName").selectbox("disable")}if(document.getElementById("onSchedule_ck").checked!="1"){document.getElementById("showSchedule").style.display="none"}document.getElementById("main").style.display="inline";HNAP.GetXMLAsync("GetRouterLanSettings",null,"GetValue",function(i){GetResult_5th(i)})}else{if(DebugMode==1){alert("[!!GetXML Error!!] Function: GetResult_4th")}}}function GetResult_5th(b){var a=b.Get("GetRouterLanSettingsResponse/GetRouterLanSettingsResult");if(a=="OK"){lanIP=b.Get("GetRouterLanSettingsResponse/RouterIPAddress")}else{if(DebugMode==1){alert("[!!GetXML Error!!] Function: GetResult_5th")}}}function SetXML(){document.getElementById("CreatePopAlertMessage").style.display="inline";HNAP.GetXMLAsync("SetSysLogSettings",null,"GetXML",function(a){SetResult_1st(a)})}function SetResult_1st(a){if(a!=null){if(document.getElementById("systemLogEnable_ck").checked=="1"){a.Set("SetSysLogSettings/SysLog","true")}else{a.Set("SetSysLogSettings/SysLog","false")}a.Set("SetSysLogSettings/IPAddress",document.getElementById("sysLogServer_Description").value);HNAP.SetXMLAsync("SetSysLogSettings",a,function(b){SetResult_2nd(b)})}else{if(DebugMode==1){alert("[!!SetXML Error!!] Function: SetResult_1st")}window.location.reload()}}function SetResult_2nd(b){var a=b.Get("SetSysLogSettingsResponse/SetSysLogSettingsResult");if(a=="OK"){HNAP.GetXMLAsync("SetSysEmailSettings",null,"GetXML",function(c){SetResult_3rd(c)})}if(a=="ERROR"){if(DebugMode==1){alert("[!!SetXML Error!!] Function: SetResult_2nd")}window.location.reload()}}function SetResult_3rd(b){if(b!=null){if(document.getElementById("enableEmailNotification_ck").checked=="1"){b.Set("SetSysEmailSettings/SysEmail","true");b.Set("SetSysEmailSettings/EmailFrom",document.getElementById("fromEmailAddress").value);b.Set("SetSysEmailSettings/EmailTo",document.getElementById("toEmailAddress").value);b.Set("SetSysEmailSettings/SMTPServerAddress",document.getElementById("smtpServerAddress").value);b.Set("SetSysEmailSettings/SMTPServerPort",document.getElementById("smtpServerPort").value);if(document.getElementById("enableAuthentication_ck").checked=="1"){b.Set("SetSysEmailSettings/Authentication","true")}else{b.Set("SetSysEmailSettings/Authentication","false")}b.Set("SetSysEmailSettings/AccountName",document.getElementById("accountName").value);b.Set("SetSysEmailSettings/AccountPassword",document.getElementById("password").value);if(document.getElementById("onLogFull_ck").checked=="1"){b.Set("SetSysEmailSettings/OnLogFull","true")}else{b.Set("SetSysEmailSettings/OnLogFull","false")}if(document.getElementById("onSchedule_ck").checked=="1"){b.Set("SetSysEmailSettings/OnSchedule","true")}else{b.Set("SetSysEmailSettings/OnSchedule","false")}var a=document.getElementById("onSchedule_Select");var c=a.options[a.selectedIndex].value;b.Set("SetSysEmailSettings/ScheduleName",encode_char_text(c))}else{b.Set("SetSysEmailSettings/SysEmail","false");b.Set("SetSysEmailSettings/EmailFrom","");b.Set("SetSysEmailSettings/EmailTo","");b.Set("SetSysEmailSettings/SMTPServerAddress","");b.Set("SetSysEmailSettings/SMTPServerPort","");b.Set("SetSysEmailSettings/Authentication","false");b.Set("SetSysEmailSettings/AccountName","");b.Set("SetSysEmailSettings/AccountPassword","");b.Set("SetSysEmailSettings/OnLogFull","false");b.Set("SetSysEmailSettings/OnSchedule","false");var a=document.getElementById("onSchedule_Select");var c=a.options[a.selectedIndex].value;b.Set("SetSysEmailSettings/ScheduleName",encode_char_text(c))}HNAP.SetXMLAsync("SetSysEmailSettings",b,function(d){SetResult_4th(d)})}else{if(DebugMode==1){alert("[!!SetXML Error!!] Function: SetResult_3rd")}window.location.reload()}}function SetResult_4th(b){var a=b.Get("SetSysEmailSettingsResponse/SetSysEmailSettingsResult");if(a=="OK"){setTimeout("waitSettingFinished()",1000)}if(a=="ERROR"){if(DebugMode==1){alert("[!!SetXML Error!!] Function: SetResult_4th")}window.location.reload()}}function waitSettingFinished(){window.location.reload()}function sysLogServerName_Description(b,d){var a=b.options[d].text;var c=a.split(/[\s(]+/);var e=c[c.length-2];if(d=="0"){document.getElementById("sysLogServer_Description").value=""}else{document.getElementById("sysLogServer_Description").value=e}};</script> <script language="JavaScript">$(function(){$("select").change(function(){save_button_changed()});$("input").keydown(function(){save_button_changed()})});function save_button_changed(){document.getElementById("Save_Disable_btn").style.display="none";document.getElementById("Save_btn").style.display="block";changeFlag=true;checkFlag=true;changeTimeoutAction()};</script> </head> <body> <form name="systemlog_form" id="systemlog_form" method="POST" action=""> <div id="wrapper"> <div id="header"></div> <div id="menu"></div> <div id="menu_edge"></div> <div id="content"> <div id="info"> <div id="FunctionName"><script>I18N("h","System Log");</script></div> <div id="wallimage"><img src="image/page_log.png" alt="" width="195" height="119"/></div> <div id="directions"> <script>I18N("h","On-board diagnostics run continually in the background to monitor the health of your router. The results are recorded in the system log if it is enabled. This info can be used to diagnose common problems or help Customer Support resolve issues more quickly.");</script> </div> </div> <div id="funcBar"> <div id="pagePath">&nbsp;<script>I18N("h","Management");</script> >> <script>I18N("h","System Log");</script></div> <ul id="rightFunc"> <li style="display:block"><div id="Save_btn" onclick="document.getElementById('sumbit_CheckData').click();changeTimeoutAction();" style="cursor:pointer; display:none"><script>I18N("h","Save");</script></div></li> <li style="display:block"><div id="Save_Disable_btn"><script>I18N("h","Save");</script></div></li> <input id="sumbit_CheckData" class="submit" type="submit" value="Submit" style="display:none"/> </ul> </div> <div id="main" style="display:none"> <table class="block" border="0" cellspacing="0" style="margin: 10px 0 0 0;"> <tbody> <tr> <td colspan="3"><div class="title"><script>I18N("h","SysLog Settings");</script></div></td </tr> <tr> <th><script>I18N("h","Enable Logging to Syslog Server");</script>:</th> <td width="200px"><div id="systemLogEnable" class="checkbox_on"><input type="checkbox" name="systemLogEnable" id="systemLogEnable_ck"></div></td> <td></td> </tr> <tr id="show_ServerIPAddress" style="display:none"> <th><script>I18N("h","SysLog Server IP Address");</script>:</th> <td with="20px" valign="top"><input class="styled-text required" type="text" name="sysLogServer_Description" size="27" id="sysLogServer_Description"></td> <td valign="top"> <div class="styled-select"> <select name="sysLogServerName" id="sysLogServerName" onChange="sysLogServerName_Description(this, this.value)"> <option value="0" selected>&lt;&lt; Computer Name</option> </select> </div> </td> </tr> </tbody> </table> <div id="email_Settings"> <hr/> <table class="block" border="0" cellspacing="0" style="margin: 10px 0 0 0;"> <tbody> <tr> <td colspan="2"><div class="title"><script>I18N("h","E-mail Settings");</script></div></td> </tr> <tr> <th><script>I18N("h","Enable E-mail Notification");</script>:</th> <td><div id="enableEmailNotification" class="checkbox_on"><input type="checkbox" name="enableEmailNotification" id="enableEmailNotification_ck"></div></td> </tr> <tr id="FEA"> <th><script>I18N("h","From E-mail Address");</script>:</th> <td><input class="styled-text required" type="text" name="fromEmailAddress" size="27" id="fromEmailAddress"></td> </tr> <tr id="TEA"> <th><script>I18N("h","To E-mail Address");</script>:</th> <td><input class="styled-text required" type="text" name="toEmailAddress" size="27" id="toEmailAddress"></td> </tr> <tr id="SSA"> <th><script>I18N("h","SMTP Server Address");</script>:</th> <td><input class="styled-text required" type="text" name="smtpServerAddress" size="27" id="smtpServerAddress"></td> </tr> <tr id="SSP"> <th><script>I18N("h","SMTP Server Port");</script>:</th> <td><input class="styled-text required" type="text" name="smtpServerPort" size="27" id="smtpServerPort"></td> </tr> <tr id="EA"> <th><script>I18N("h","Enable Authentication");</script>:</th> <td><div id="enableAuthentication" class="checkbox_on"><input type="checkbox" name="enableAuthentication" id="enableAuthentication_ck"></div></td> </tr> <tr id="AN"> <th><script>I18N("h","Account Name");</script>:</th> <td><input class="styled-text required" type="text" name="accountName" size="27" id="accountName"></td> </tr> <tr id="PW"> <th><script>I18N("h","Password");</script>:</th> <td><input class="styled-text required" type="password" name="password" size="27" id="password"></td> </tr> </tbody> </table> <div id="sendLog" style="display:inline"> <hr/> <table class="block" border="0" cellspacing="0" ondragstart="return false" onselectstart="return false" style="margin: 10px 0 0 0;"> <tbody> <tr> <td colspan="2"><div class="title"><script>I18N("h","E-mail Log When Full or On Schedule");</script></div></td> </tr> <tr> <th><script>I18N("h","Send When Log Full");</script>:</th> <td><div id="onLogFull" class="checkbox_on"><input type="checkbox" name="onLogFull" id="onLogFull_ck"></div></td> </tr> <tr> <th><script>I18N("h","Send on Schedule");</script>:</th> <td><div id="onSchedule" class="checkbox_on"><input type="checkbox" name="onSchedule" id="onSchedule_ck"></div></td> </tr> <tr id="showSchedule"> <th><script>I18N("h","Schedule");</script>:</th> <td> <div class="styled-select"> <select name="onSchedule_Select" id="onSchedule_Select"> <option value="Always" selected>Always</option> </select> </div> </td> </tr> </tbody> </table> </div> </div> </div> <div id="CreatePopAlertMessage" style="display:none"> <div id="AlertPopRect"> <div id="AlertPopBody"> <table class="myAlertPop_table_b" id="waitSettingFinish" border="0" cellspacing="0"> <tbody> <tr> <td> <center><div id="Loading_pop_image2"></div></center> </td> </tr> <tr> <td label id="reciprocal_Number"></label></td> </tr> <tr> <td id="dialog_msg_black2"><script>I18N("h","Your changes are being saved.");</script></td> </tr> </tbody> </table> </div> </div> </div> <div id="DetectRouterConnection" style="display:none"></div> <div id="footer"> <div id="copyright"><script>I18N("h","COPYRIGHT");</script></div> </div> </div> </form> <script type="text/javascript" charset="utf-8">$(document).ready(function(){$.validator.setDefaults({submitHandler:function(a){a.submit()}});$.validator.addMethod("checkIPFormat",function(d,a){var c=/(^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?))+$/;var b=true;if(c.test(d)){b=true}else{b=false}return b},jQuery.validator.messages.address_Check);$.validator.addMethod("checkPortRange",function(d,b){var a=/(^([1-9]|[1-9]\d|[1-9]\d\d|[1-9]\d{3}|[1-5]\d{4}|6[0-5][0-5][0-3][0-5]))+$/;var c=true;if(a.test(d)){c=true}else{c=false}return c},jQuery.validator.messages.port_Check);$.validator.addMethod("checkIPAddress",function(c,a){var b=true;if(lanIP==c){b=false}else{if(!COMM_ValidV4Format(c)||!COMM_ValidV4Addr(c)){b=false}else{b=true}}return b},jQuery.validator.messages.address_Check);$("#systemlog_form").validate({rules:{sysLogServer_Description:{required:true,checkIPAddress:true,checkIPFormat:true},fromEmailAddress:{required:true,email:true},toEmailAddress:{required:true,email:true},smtpServerAddress:{required:true},smtpServerPort:{required:true,checkPortRange:true},accountName:"required",password:"required"},messages:{sysLogServer_Description:{required:jQuery.validator.messages.ip},fromEmailAddress:{required:jQuery.validator.messages.email,email:jQuery.validator.messages.email_Check},toEmailAddress:{required:jQuery.validator.messages.email,email:jQuery.validator.messages.email_Check},smtpServerPort:{required:jQuery.validator.messages.port},accountName:{required:jQuery.validator.messages.email_AccountName},password:{required:jQuery.validator.messages.email_Password}},submitHandler:function(a){SetXML()}})});</script> </body> <script type="text/javascript">Load_HTML();Initial();setMenu("menu_Management");GetScheduleList();startTimeout();</script> </html>