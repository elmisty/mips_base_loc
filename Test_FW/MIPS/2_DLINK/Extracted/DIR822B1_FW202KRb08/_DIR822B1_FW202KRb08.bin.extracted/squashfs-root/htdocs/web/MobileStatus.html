<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> <html xmlns="http://www.w3c.org/1999/xhtml"> <head> <title>D-LINK</title> <meta http-equiv="X-UA-Compatible" content="IE=9"> <meta http-equiv="Content-Type" content="text/html; charset=utf-8"> <meta http-equiv="Content-Type" content="text/css"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <link href="/js/bootstrap/css/bootstrap.min.css" rel="stylesheet"> <link href="/js/bootstrap/css/buttonv2.css" rel="stylesheet"> <link rel="stylesheet" type="text/css" href="css/style_mobile.css" media="all"/> <script type="text/javascript" charset="utf-8" src="/js/initialJQ.js"></script> <script type="text/javascript" charset="utf-8" src="/js/bootstrap/js/bootstrap.min.js"></script> <script type="text/javascript" charset="utf-8" src="/js/initialJS.js"></script> <script type="text/javascript" charset="utf-8" src="/js/SOAP/SOAPWanSettings.js"></script> <script type="text/javascript">var Time_GetConnectionUpTime;var ipv4_connTime=0;var getInternetStatusDeffered=null;var Time_ResetButton;var soapAction=new SOAPAction();var wanStatus=new SOAPGetWanStatusResponse();var currentInternetStatus=null;var wanSettings_cache=new SOAPGetWanSettingsResponse();$(document).ready(function(){GetInternetInformation(true).done(function(){renewWanStatus(true)});setInterval("renewWanStatus(false)",6000);startTimeout()});function renewWanStatus(c){var a=wanStatus.Status;wanStatus=new SOAPGetWanStatusResponse();var b=soapAction.sendSOAPAction("GetWanStatus",null,wanStatus);$.when(b).done(function(d){switch(wanStatus.Status){case"CONNECTED":if(c){showRuntimeWanInfo(wanSettings_cache)}if(getInternetStatusDeffered==null){getInternetStatusDeffered=getInternetStatus(true);getInternetStatusDeffered.done(function(f){var e=currentInternetStatus;currentInternetStatus=f;if((wanStatus.Status!=a)||(currentInternetStatus!=e)){renewWanSettings(wanStatus.Status)}getInternetStatusDeffered=null})}break;case"CONNECTING":case"LIMITED_CONNECTION":case"DISCONNECTED":if(wanStatus.Status!=a){renewWanSettings(wanStatus.Status)}break}GetConnectionUpTime(true)}).fail(function(){})}function renewWanSettings(a){clearTimeout(Time_ResetButton);switch(a){case"CONNECTED":GetConnectionUpTime();GetInternetInformation(false);break;case"CONNECTING":case"LIMITED_CONNECTION":case"DISCONNECTED":var b=new SOAPGetWanSettingsResponse();b.Type=wanSettings_cache.Type;showRuntimeWanInfo(b);ipv4_connTime=0;clearInterval(Time_GetConnectionUpTime);runConnUpTime();break}}function getInternetStatus(b){var c=$.Deferred();var a=new SOAPGetCurrentInternetStatus();a.InternetStatus=b;soapAction.sendSOAPAction("GetCurrentInternetStatus",a,null).done(function(f){var d=f.GetCurrentInternetStatusResult;if(d=="OK_CONNECTED"){c.resolve(d)}else{if(d.indexOf("OK_DETECTING_")>=0){var e=parseInt(d.substr(13))*1000;sleep(e).done(function(){getInternetStatus(false).done(function(g){c.resolve(g)})})}else{c.resolve(d)}}});return c.promise()}function GetInternetInformation(c){var b=$.Deferred();var d=new SOAPGetWanSettingsResponse();var a=soapAction.sendSOAPAction("GetWanSettings",null,d);a.done(function(e){if(d.Type=="StaticPPTP"||d.Type=="DynamicPPTP"||d.Type=="StaticL2TP"||d.Type=="DynamicL2TP"){d.IPAddress=d.VPNLocalIPAddress;d.SubnetMask=d.VPNLocalSubnetMask;d.Gateway=d.VPNLocalGateway}soapAction.copyObject(wanSettings_cache,d);if(c){$("#mobile_macaddr").html(d.MacAddress.toUpperCase());$("#mobile_wan_type").html(I18N("j",d.Type));b.resolve()}else{showRuntimeWanInfo(d)}});return b.promise()}function showRuntimeWanInfo(h){var b=wanStatus.Status;var c=h.IPAddress;if(c==""){c=I18N("j","Not Available")}document.getElementById("mobile_ipaddr").innerHTML=c;var a=h.SubnetMask;if(a==""){a=I18N("j","Not Available")}document.getElementById("mobile_mask").innerHTML=a;var e=h.Gateway;if(e==""){e=I18N("j","Not Available")}document.getElementById("mobile_gw").innerHTML=e;var f=h.RuntimeDNS.Primary;if(f==""){f=I18N("j","Not Available")}document.getElementById("mobile_dns").innerHTML=f;var g=h.RuntimeDNS.Secondary;if(g==""){g=I18N("j","Not Available")}document.getElementById("mobile_dns2").innerHTML=g;if((b=="CONNECTED")&&(h.IPAddress=="")){b="LIMITED_CONNECTION"}var d=$("#mobile_release_btn");switch(b){case"CONNECTED":if(currentInternetStatus=="OK_CONNECTED"){showInternetStatus("CONNECTED")}else{if(currentInternetStatus=="OK_NOTCONNECTED"){showInternetStatus("LIMITED_CONNECTION")}else{showInternetStatus("CONNECTED")}}switch(h.Type){case"DHCP":d.text(I18N("j","Release IP Address")).css("display","inline");break;case"DHCPPPPoE":case"StaticPPPoE":case"DynamicPPTP":case"StaticPPTP":case"DynamicL2TP":case"StaticL2TP":if(h.AutoReconnect=="true"){d.hide()}else{d.text(I18N("j","Disconnect")).css("display","inline")}break;case"Static":case"DsLite":d.hide();break}d.removeClass("active btn-info").addClass("btn-default").prop("disabled",false).off("click").click(function(){WANConnectionDisconnect(h.Type)});break;case"CONNECTING":showInternetStatus("CONNECTING");if(h.AutoReconnect=="true"){d.hide()}else{d.addClass("active").prop("disabled",true).text(I18N("j","Connecting")).css("display","inline")}break;case"DISCONNECTED":showInternetStatus("DISCONNECTED");d.hide();break;case"LIMITED_CONNECTION":showInternetStatus("DISCONNECTED");switch(h.Type){case"DHCP":d.text(I18N("j","Renew IP Address")).css("display","inline");break;case"DHCPPPPoE":case"StaticPPPoE":case"DynamicPPTP":case"StaticPPTP":case"DynamicL2TP":case"StaticL2TP":if(h.AutoReconnect=="true"){d.hide()}else{d.text(I18N("j","Connect")).css("display","inline")}break;default:d.hide();break}d.removeClass("active btn-default").addClass("btn-info").prop("disabled",false).off("click").click(function(){WANConnectionConnect(h.Type)});break}}function showInternetStatus(a){switch(a){case"CONNECTED":$("#mobile_connect_status").html(I18N("j","Connected"));$("#mobile_connect_img").attr("src","image/mobile_internet_connected.png");break;case"CONNECTING":$("#mobile_connect_status").html(I18N("j","Connecting"));$("#mobile_connect_img").attr("src","image/mobile_internet.png");break;case"LIMITED_CONNECTION":$("#mobile_connect_status").html(I18N("j","Limited Connection"));$("#mobile_connect_img").attr("src","image/mobile_internet.png");break;case"DISCONNECTED":$("#mobile_connect_status").html(I18N("j","Disconnected"));$("#mobile_connect_img").attr("src","image/mobile_internet.png");break}return}function GetConnectionUpTime(){var a=new SOAPGetInternetConnUpTimeResponse();clearInterval(Time_GetConnectionUpTime);soapAction.sendSOAPAction("GetInternetConnUpTime",null,a).done(function(b){ipv4_connTime=parseInt(a.UpTime,10);Time_GetConnectionUpTime=setInterval("runConnUpTime()",1000)})}function runConnUpTime(){var f=0;var d=0;var b=0;var c=0;var a;a=ipv4_connTime;if(a>0){f=a%60;d=Math.floor(a/60)%60;b=Math.floor(a/3600)%24;c=Math.floor(a/86400);a++}var e=c+" "+I18N("j","Day")+" "+b+" "+I18N("j","Hour")+" "+d+" "+I18N("j","Min")+" "+f+" "+I18N("j","Sec");$("#mobile_connect_uptime").html(e);ipv4_connTime=a}function WANConnectionDisconnect(b){$("#mobile_release_btn").addClass("active").prop("disabled",true);click_Statuschanged();var d="";var e=new SOAPRenewWanConnection();var c=new SOAPAction();c.timeout=5000;switch(b){case"DHCP":d="DHCPRelease";break;case"DHCPPPPoE":case"StaticPPPoE":d="PPPoEDisconnect";break;case"DynamicPPTP":case"StaticPPTP":d="PPTPDisconnect";break;case"DynamicL2TP":case"StaticL2TP":d="L2TPDisconnect";break}e.Action=d;var a=c.sendSOAPAction("RenewWanConnection",e,null);a.done(function(f){Time_ResetButton=setTimeout("resetRenewReleaseBtn()",10000)}).fail(function(){$("#mobile_release_btn").removeClass("active").prop("disabled",false)})}function WANConnectionConnect(b){$("#mobile_release_btn").addClass("active").prop("disabled",true);var d="";click_Statuschanged();var e=new SOAPRenewWanConnection();var c=new SOAPAction();c.timeout=5000;switch(b){case"DHCP":d="DHCPRenew";break;case"DHCPPPPoE":case"StaticPPPoE":d="PPPoEConnect";break;case"DynamicPPTP":case"StaticPPTP":d="PPTPConnect";break;case"DynamicL2TP":case"StaticL2TP":d="L2TPConnect";break}e.Action=d;var a=c.sendSOAPAction("RenewWanConnection",e,null);a.done(function(f){Time_ResetButton=setTimeout("resetRenewReleaseBtn()",10000)}).fail(function(){$("#mobile_release_btn").removeClass("active").prop("disabled",false)})}function resetRenewReleaseBtn(){wanStatus=new SOAPGetWanStatusResponse()}function click_Statuschanged(){changeTimeoutAction()}function SetDefault_RenewRelease_btn(){document.getElementById("release_btn").disabled=false}function returnToHome(){location.href="/MobileHome.html"};</script> </head> <body> <div style="position:absolute;top:13px"> <button class="btn_home" onclick="returnToHome()"><script>I18N("h","Home");</script></button> </div> <div id="logo_padding" style="height:17px"></div> <div class="form-group" style="text-align:center;"> <img src="/image/logo_2.png" width="102px" height="20px"> </div> <hr/> <div class="container" style="text-align:center;"> <div style="text-align:left;height:50px"> <img id="mobile_connect_img" src="image/mobile_internet.png" width="60" height="45"> <b><span id="mobile_connect_status" class="textnormal"><script>I18N("h","Disconnect");</script></span></b> </div> <div class="list-group" style="text-align:left;"> <div class="list-group-item"> <h4 class="list-group-item-heading titleBlock"><script>I18N("h","Connection Type");</script>:</h4> <span id="mobile_wan_type" class="list-group-item-text"><script>I18N("h","Not Available");</script><span> </div> <div class="list-group-item"> <h4 class="list-group-item-heading titleBlock"><script>I18N("h","Connection Uptime");</script>:</h4> <span id="mobile_connect_uptime" class="list-group-item-text"><script>I18N("h","Not Available");</script><span> </div> <div class="list-group-item"> <h4 class="list-group-item-heading titleBlock"><script>I18N("h","MAC Address");</script>:</h4> <span id="mobile_macaddr" class="list-group-item-text"><script>I18N("h","Not Available");</script><span> </div> <div class="list-group-item"> <h4 class="list-group-item-heading titleBlock"><script>I18N("h","IP Address");</script>:</h4> <span id="mobile_ipaddr" class="list-group-item-text"><script>I18N("h","Not Available");</script><span> </div> <div class="list-group-item"> <h4 class="list-group-item-heading titleBlock"><script>I18N("h","Subnet Mask");</script>:</h4> <span id="mobile_mask" class="list-group-item-text"><script>I18N("h","Not Available");</script><span> </div> <div class="list-group-item"> <h4 class="list-group-item-heading titleBlock"><script>I18N("h","Default Gateway");</script>:</h4> <span id="mobile_gw" class="list-group-item-text"><script>I18N("h","Not Available");</script><span> </div> <div class="list-group-item"> <h4 class="list-group-item-heading titleBlock"><script>I18N("h","Primary DNS Server");</script>:</h4> <span id="mobile_dns" class="list-group-item-text"><script>I18N("h","Not Available");</script><span> </div> <div class="list-group-item"> <h4 class="list-group-item-heading titleBlock"><script>I18N("h","Secondary DNS Server");</script>:</h4> <span id="mobile_dns2" class="list-group-item-text"><script>I18N("h","Not Available");</script><span> </div> </div> <div class="text-center"> <button id="mobile_release_btn" type="button" class="btn btn-lg btn-info" style="width:90%;"></button> </div> </div> <div id="logo_padding2" style="height:50px"></div> <div id="copyright" class="copyright" style:"position:relative;"> <script>I18N("h","COPYRIGHT");</script> </div> </body> </html>