function doLogin(c,b){var g=null;var a=$.Deferred();var e=new SOAPAction();var d=new SOAPLogin();var f=new SOAPLoginResponse();d.Action="request";d.Username="Admin";d.Captcha=b;e.sendSOAPAction("Login",d,f).done(function(h){if(h.Challenge!=""&&h.Cookie!=""&&h.PublicKey!=""){g=hex_hmac_md5(h.PublicKey+c,h.Challenge);g=g.toUpperCase();$.cookie("uid",h.Cookie,{expires:1,path:"/"});sessionStorage.setItem("Cookie",h.Cookie);sessionStorage.setItem("PrivateKey",g);var i=hex_hmac_md5(g,h.Challenge);i=i.toUpperCase();d.Action="login";d.LoginPassword=i;d.Captcha=b;e.sendSOAPAction("Login",d,null).done(function(j){if(j.LoginResult=="FAILED"){a.reject()}else{a.resolve()}}).fail(function(){a.reject()})}else{a.reject()}}).fail(function(){a.reject()});return a.promise()};