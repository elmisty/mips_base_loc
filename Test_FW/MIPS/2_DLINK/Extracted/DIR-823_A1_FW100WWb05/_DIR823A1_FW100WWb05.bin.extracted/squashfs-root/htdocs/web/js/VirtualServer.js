function Datalist(){this.list=new Array();this.maxrowid=0}Datalist.prototype.getData=function(b){var a;var c;for(a=0;a<this.list.length;a++){c=this.list[a];if(c.rowid==b){break}}return c};Datalist.prototype.getRowNum=function(a){var b=0;for(b=0;b<this.list.length;b++){if(a==this.list[b].rowid){break}}return b};Datalist.prototype.editData=function(c,a){var b=this.getRowNum(c);if(this.checkData(a,b)==false){return false}a.setRowid(c);this.list.splice(b,1,a);a.setDataToRow($("#tr"+a.rowid));return true};Datalist.prototype.deleteData=function(b){var a=this.getRowNum(b);this.list.splice(a,1);$("#tr"+b).remove()};Datalist.prototype.push=function(a){if(this.checkData(a,null)==false){return false}a.setRowid(this.maxrowid);this.list.push(a);this.maxrowid++;a.addRowToHTML("tblVirtualServer");return true};Datalist.prototype.checkData=function(b,c){var a;for(a=0;a<this.list.length;a++){if(a==c){continue}if(this.list[a].name==b.name){alert(I18N("j","Name cannot be the same."));return false}if((this.list[a].protocol==b.protocol)||(this.list[a].protocol=="Both")||(b.protocol=="Both")){if((this.list[a].externalPort==b.externalPort)&&(this.list[a].internalPort==b.internalPort)&&(this.list[a].schedule==b.schedule)){alert(I18N("j","Rule cannot be the same."));return false}}}return true};Datalist.prototype.length=function(){return this.list.length};function Data(a,g,i,h,f,e,d){var c=parseInt(f,10);var b=parseInt(e,10);this.name=a;this.ipAddress=g;this.externalPort=isNaN(c)?"":c;this.internalPort=isNaN(b)?"":b;if((d=="")||(d.toLowerCase()=="always")){this.schedule="Always"}else{this.schedule=d}this.setEnable("true");this.setProtocol(i,h)}Data.prototype={rowid:null,enable:null,name:null,ipAddress:null,protocol:null,protocolNum:null,externalPort:null,internalPort:null,schedule:null,setRowid:function(a){this.rowid=a},setEnable:function(a){this.enable=a},setEnableValue:function(){var a=document.getElementById("vs"+this.rowid).checked;this.enable=a},setProtocol:function(b,a){this.protocolNum=a;switch(a){case"6":this.protocol="TCP";break;case"17":this.protocol="UDP";break;case"256":this.protocol="Both";break;default:this.protocol="Other";this.protocolNum=a;break}},showEnable:function(){var b;var a="";if(this.enable=="true"){a="checked"}b="<input id=vs"+this.rowid+' type="checkbox" onChange="datalist.list['+this.rowid+'].setEnableValue()" '+a+"/>";return b},showName:function(){return HTMLEncode(this.name)},showExternalPort:function(){return this.externalPort},showInternalPort:function(){return this.internalPort},showSchedule:function(){if((this.schedule=="Always")||(this.schedule=="")){return I18N("j","Always")}else{return HTMLEncode(this.schedule)}},addRowToHTML:function(c){var b;b="<tr id='tr"+this.rowid+"'></tr>";var a="#"+c+"> tbody";$(a).append(b);this.setDataToRow($("#tr"+this.rowid));return},setDataToRow:function(a){var b;b="<td>"+this.showEnable()+"</input></td>";b+="<td>"+this.showName()+"</td>";b+="<td>"+this.ipAddress+"</td>";b+="<td>"+this.protocol+"</td>";b+="<td>"+this.showExternalPort()+"</td>";b+="<td>"+this.showInternalPort()+"</td>";b+="<td>"+this.showSchedule()+"</td>";b+="<td><img src='image/edit_btn.png' width=28 height=28 style='cursor:pointer' onclick='editData("+this.rowid+")'/></td>";b+="<td><img src='image/trash.png' width=41 height=41 style='cursor:pointer' onclick='deleteData("+this.rowid+")'/></td>";a.html(b);return}};