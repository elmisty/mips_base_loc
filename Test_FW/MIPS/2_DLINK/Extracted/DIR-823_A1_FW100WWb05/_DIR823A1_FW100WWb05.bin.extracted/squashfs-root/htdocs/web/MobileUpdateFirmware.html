<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> <html xmlns="http://www.w3c.org/1999/xhtml"> <head> <title>D-LINK</title> <meta http-equiv="X-UA-Compatible" content="IE=9"> <meta http-equiv="Content-Type" content="text/html; charset=utf-8"> <meta http-equiv="Content-Type" content="text/css"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <link href="/js/bootstrap/css/bootstrap.min.css?v=20160418141035" rel="stylesheet"> <link href="/js/bootstrap/css/buttonv2.css?v=20160418141035" rel="stylesheet"> <link rel="stylesheet" type="text/css" href="css/style_mobile.css?v=20160418141035" media="all"/> <script type="text/javascript" charset="utf-8" src="/js/initialJQ.js"></script> <script type="text/javascript" charset="utf-8" src="/js/bootstrap/js/bootstrap.min.js?v=20160418141035"></script> <script type="text/javascript" charset="utf-8" src="/js/initialJS.js"></script> <script type="text/javascript" charset="utf-8" src="/js/SOAP/SOAPWanSettings.js?v=20160418141035"></script> <script type="text/javascript" charset="utf-8" src="/js/SOAP/SOAPFirmware.js?v=20160418141035"></script> <script type="text/javascript">var HNAP=new HNAP_XML();var Time_GetPollingFWDownload;var Time_DownloadFail;var Time_GetBackgroundPollingFWDownload;var detectPopWindowAvailable=0;$(window).on("orientationchange",function(){adjustLayout()});$(document).ready(function(){$("#mobile_ckfw_btn").click(function(){GetInternetConnectionStatus()});adjustLayout();GetFwInfo()});function adjustLayout(){var a=$(window).height();var c=$("body").height();var b=50;if(a<c+b){$("#copyright").css("top",c+b);$(".black_overlay").css("height",c+b+20)}else{$("#copyright").css("top",a-20);$(".black_overlay").css("height",a)}}function GetFwInfo(){var b=HNAP.GetXML("GetFirmwareSettings");var a=b.Get("GetFirmwareSettingsResponse/FirmwareVersion");document.getElementById("mobile_current_fwver").innerHTML=a;var c=b.Get("GetFirmwareSettingsResponse/FirmwareDate");c=c.replace("T"," ");document.getElementById("mobile_current_fwdate").innerHTML=c;document.getElementById("mobile_ckfw_btn").style.display="inline"}function getInternetStatus(b){var d=$.Deferred();var a=new SOAPGetCurrentInternetStatus();var c=new SOAPAction();a.InternetStatus=b;c.sendSOAPAction("GetCurrentInternetStatus",a,null).done(function(g){var e=g.GetCurrentInternetStatusResult;if(e=="OK_CONNECTED"){d.resolve(e)}else{if(e.indexOf("OK_DETECTING_")>=0){var f=parseInt(e.substr(13))*1000;sleep(f).done(function(){getInternetStatus(false).done(function(h){d.resolve(h)}).fail(function(){d.reject()})})}else{d.reject(e)}}}).fail(function(){d.reject()});return d.promise()}function GetInternetConnectionStatus(){var a=$("#mobile_ckfw_btn");changeTimeoutAction();a.addClass("active").prop("disabled",true);document.getElementById("mobile_new_fwver").innerHTML="--";document.getElementById("mobile_new_fwdate").innerHTML="--";getInternetStatus(true).done(function(b){checkNewFirmware()}).fail(function(){a.removeClass("active").prop("disabled",false);a.html(I18N("j","Retry"))})}function checkNewFirmware(){var a=new SOAPGetFirmwareStatusResponse();var b=new SOAPAction();b.sendSOAPAction("GetFirmwareStatus",null,a).done(function(d){var e=d.CurrentFWVersion;var c=d.LatestFWVersion;if(e<c){$("#mobile_newfw_info").show();document.getElementById("mobile_new_fwver").innerHTML=c;document.getElementById("mobile_new_fwdate").innerHTML=d.LatestFWVersionDate;$("#mobile_ckfw_btn").html(I18N("j","Download New Firmware")).off("click").click(function(){downloadNewFirmware()})}else{$("#mobile_no_new_fw").show()}adjustLayout();$("#mobile_ckfw_btn").removeClass("active").prop("disabled",false)}).fail(function(){$("#mobile_ckfw_btn").removeClass("active").prop("disabled",false)})}function downloadNewFirmware(){$("#mobile_ckfw_btn").addClass("active").prop("disabled",true).html(I18N("j","Downloading"));document.getElementById("mobile_popalert").style.display="block";$("#mobile_download_status").html(I18N("j","Downloading")+"...0 %");$("#mobile_download_icon").show();detectPopWindowAvailable=1;var a=new SOAPAction();a.sendSOAPAction("StartFirmwareDownload",null,null).done(function(b){if(b.StartFirmwareDownloadResult=="OK"){Time_GetPollingFWDownload=self.setInterval("GetPollingFirmwareDownloadStatus()",3000);Time_DownloadFail=self.setTimeout("downloadFail()",180000)}else{downloadFail()}}).fail(function(){downloadFail()})}function GetPollingFirmwareDownloadStatus(){var b=new SOAPPollingFirmwareDownloadResponse();var a=new SOAPAction();a.sendSOAPAction("PollingFirmwareDownload",null,b).done(function(e){$("#mobile_download_status").html(I18N("j","Downloading")+"..."+e.DownloadPercentage+" %");if(e.DownloadPercentage>=100){self.clearInterval(Time_GetPollingFWDownload);self.clearTimeout(Time_DownloadFail);$("#mobile_download_status").html(I18N("j","Upgrading")+"...0 %");var c=new SOAPGetFirmwareValidationResponse();var d=new SOAPAction();d.sendSOAPAction("GetFirmwareValidation",null,c).done(function(h){if(h.IsValid=="true"){var g=parseInt(h.CountDown,10)*1000;self.setTimeout("fwUpgradeSuccess()",g);var f=(g-1)/100;self.setTimeout("updateProgress(0,"+f+")",f)}else{downloadFail()}}).fail(function(){downloadFail()})}})}function updateProgress(a,b){if(a<100){var c=a+1;$("#mobile_download_status").html(I18N("j","Upgrading")+"..."+c+" %");self.setTimeout("updateProgress("+c+","+b+")",b)}}function downloadFail(){self.clearInterval(Time_GetPollingFWDownload);$("#mobile_download_status").html(I18N("j","Firmware Upgrade failed!"));$("#mobile_download_icon").hide();$("#mobile_download_icon_fail").show();$("#mobile_download_note").hide();$("#mobile_download_btn").show();$("#mobile_download_btn").off("click").click(function(){window.location.reload()})}function fwUpgradeSuccess(){$("#mobile_download_status").html(I18N("j","Firmware Upgrade success!"));$("#mobile_download_icon").hide();$("#mobile_download_icon_success").show();$("#mobile_download_note").hide();$("#mobile_download_btn").show();$("#mobile_download_btn").off("click").click(function(){location.href="/"})}function returnToHome(){location.href="/MobileHome.html"};</script> </head> <body> <div style="position:absolute;top:13px"> <button class="btn_home" onclick="returnToHome()"><script>I18N("h","Home");</script></button> </div> <div id="logo_padding" style="height:17px"></div> <div class="form-group" style="text-align:center;"> <img src="/image/logo_2.png" width="102px" height="20px"> </div> </div> <hr/> <div class="container" style="text-align:center;"> <div style="text-align:left;height:50px"> <img src="image/mobile_update_fw_on.png" width="60" height="45"> <b><span class="textnormal"><script>I18N("h","Firmware");</script></span></b> </div> <div class="list-group" style="text-align:left;"> <div class="list-group-item"> <h5 class="list-group-item-heading titleBlock"><script>I18N("h","Current Firmware Version");</script>:</h5> <span id="mobile_current_fwver" class="list-group-item-text"><span> </div> <div class="list-group-item"> <h5 class="list-group-item-heading titleBlock"><script>I18N("h","Current Firmware Date");</script>:</h5> <span id="mobile_current_fwdate" class="list-group-item-text"><span> </div> <div id="mobile_newfw_info" style="display:none"> <div class="list-group-item"> <h5 class="list-group-item-heading titleBlock"><script>I18N("h","New Firmware Version");</script>:</h5> <span id="mobile_new_fwver" class="list-group-item-text"><span> </div> <div class="list-group-item"> <h5 class="list-group-item-heading titleBlock"><script>I18N("h","New Firmware Date");</script>:</h5> <span id="mobile_new_fwdate" class="list-group-item-text"><span> </div> </div> <div id="mobile_no_new_fw" style="display:none"> <div class="list-group-item"> <h4 class="list-group-item-heading"><script>I18N("h","This firmware is the latest version.");</script></h4> </div> </div> </div> <div style="text-align:center;"> <button id="mobile_ckfw_btn" type="button" class="btn btn-lg btn-default" style="width:90%;"><script>I18N("h","Check for New Firmware");</script></button> </div> </div> <div id="mobile_popalert" class="black_overlay" style="display:none"> <div class="popup_window_border"> <div class="popup_window"> <div id="mobile_download_status" class="popup_window-headline"> </div> <div style="position:relative;top:15%;margin:auto"> <img id="mobile_download_icon" src="image/loading.gif" width="62px" height="62px"> <img id="mobile_download_icon_success" src="image/connected.png" width="62px" height="62px" style="display:none"> <img id="mobile_download_icon_fail" src="image/warning.png" width="62px" height="62px" style="display:none"> </div> <div class="textsmall" style="position:absolute;bottom:20px;width:100%"> <span id="mobile_download_note"><script>I18N("h","Please do not close the browser while the firmware is being downloaded!");</script></span> <button id="mobile_download_btn" class="btn btn-default" style="position:relative;width:80%;display:none"><script>I18N("h","OK");</script></button> </div> </div> </div> </div> <div id="copyright" class="copyright"> <script>I18N("h","COPYRIGHT");</script> </div> </body> </html>