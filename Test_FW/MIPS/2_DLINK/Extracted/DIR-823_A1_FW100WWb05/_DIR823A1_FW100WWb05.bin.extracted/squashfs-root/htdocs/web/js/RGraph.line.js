if(typeof(RGraph)=="undefined"){RGraph={}}RGraph.Line=function(d){this.id=d;this.canvas=document.getElementById(d);this.context=this.canvas.getContext?this.canvas.getContext("2d"):null;this.canvas.__object__=this;this.type="line";this.max=0;this.coords=[];this.coords2=[];this.coords.key=[];this.hasnegativevalues=false;this.isRGraph=true;this.uid=RGraph.CreateUID();this.canvas.uid=this.canvas.uid?this.canvas.uid:RGraph.CreateUID();this.colorsParsed=false;RGraph.OldBrowserCompat(this.context);this.properties={"chart.background.barcolor1":"rgba(0,0,0,0)","chart.background.barcolor2":"rgba(0,0,0,0)","chart.background.grid":1,"chart.background.grid.width":1,"chart.background.grid.hsize":25,"chart.background.grid.vsize":25,"chart.background.grid.color":"#4598aa","chart.background.grid.vlines":true,"chart.background.grid.hlines":true,"chart.background.grid.border":true,"chart.background.grid.autofit":true,"chart.background.grid.autofit.align":false,"chart.background.grid.autofit.numhlines":4,"chart.background.grid.autofit.numvlines":16,"chart.background.hbars":null,"chart.background.image":null,"chart.background.image.stretch":true,"chart.background.image.x":null,"chart.background.image.y":null,"chart.background.image.w":null,"chart.background.image.h":null,"chart.background.image.align":null,"chart.labels":null,"chart.labels.ingraph":null,"chart.labels.above":false,"chart.labels.above.size":8,"chart.xtickgap":20,"chart.smallxticks":3,"chart.largexticks":5,"chart.ytickgap":20,"chart.smallyticks":3,"chart.largeyticks":5,"chart.numyticks":0,"chart.linewidth":2.01,"chart.colors":["#007086","#0f0","#00f","#f0f","#ff0","#0ff"],"chart.hmargin":0,"chart.tickmarks.dot.color":"white","chart.tickmarks":null,"chart.tickmarks.linewidth":null,"chart.ticksize":3,"chart.gutter.left":25,"chart.gutter.right":25,"chart.gutter.top":25,"chart.gutter.bottom":25,"chart.tickdirection":-1,"chart.yaxispoints":5,"chart.fillstyle":null,"chart.xaxispos":"bottom","chart.yaxispos":"left","chart.xticks":null,"chart.text.size":10,"chart.text.angle":0,"chart.text.color":"#4598aa","chart.text.font":"Arial","chart.ymin":null,"chart.ymax":null,"chart.title":"","chart.title.background":null,"chart.title.hpos":null,"chart.title.vpos":null,"chart.title.bold":true,"chart.title.font":null,"chart.title.xaxis":"","chart.title.xaxis.bold":true,"chart.title.xaxis.size":null,"chart.title.xaxis.font":null,"chart.title.yaxis":"","chart.title.yaxis.bold":true,"chart.title.yaxis.size":null,"chart.title.yaxis.font":null,"chart.title.yaxis.color":null,"chart.title.xaxis.pos":null,"chart.title.yaxis.pos":null,"chart.shadow":false,"chart.shadow.offsetx":2,"chart.shadow.offsety":2,"chart.shadow.blur":3,"chart.shadow.color":"rgba(0,0,0,0.5)","chart.tooltips":null,"chart.tooltips.hotspot.xonly":false,"chart.tooltips.hotspot.size":5,"chart.tooltips.effect":"fade","chart.tooltips.css.class":"RGraph_tooltip","chart.tooltips.event":"onmousemove","chart.tooltips.highlight":true,"chart.tooltips.coords.page":false,"chart.highlight.stroke":"gray","chart.highlight.fill":"white","chart.stepped":false,"chart.key":null,"chart.key.background":"white","chart.key.position":"graph","chart.key.halign":null,"chart.key.shadow":false,"chart.key.shadow.color":"#666","chart.key.shadow.blur":3,"chart.key.shadow.offsetx":2,"chart.key.shadow.offsety":2,"chart.key.position.gutter.boxed":true,"chart.key.position.x":null,"chart.key.position.y":null,"chart.key.color.shape":"square","chart.key.rounded":true,"chart.key.linewidth":1,"chart.key.colors":null,"chart.key.interactive":false,"chart.contextmenu":null,"chart.ylabels":true,"chart.ylabels.count":4,"chart.ylabels.inside":false,"chart.ylabels.invert":false,"chart.xlabels.inside":false,"chart.xlabels.inside.color":"rgba(255,255,255,0.5)","chart.noaxes":false,"chart.noyaxis":false,"chart.noxaxis":false,"chart.noendxtick":false,"chart.noendytick":false,"chart.units.post":"","chart.units.pre":"","chart.scale.decimals":null,"chart.scale.point":".","chart.scale.thousand":",","chart.crosshairs":false,"chart.crosshairs.color":"#333","chart.crosshairs.hline":true,"chart.crosshairs.vline":true,"chart.annotatable":false,"chart.annotate.color":"black","chart.axesontop":false,"chart.filled":false,"chart.filled.range":false,"chart.filled.accumulative":true,"chart.variant":null,"chart.axis.color":"#4598aa","chart.zoom.factor":1.5,"chart.zoom.fade.in":true,"chart.zoom.fade.out":true,"chart.zoom.hdir":"right","chart.zoom.vdir":"down","chart.zoom.frames":25,"chart.zoom.delay":16.666,"chart.zoom.shadow":true,"chart.zoom.background":true,"chart.zoom.action":"zoom","chart.backdrop":false,"chart.backdrop.size":30,"chart.backdrop.alpha":0.2,"chart.resizable":false,"chart.resize.handle.adjust":[0,0],"chart.resize.handle.background":null,"chart.adjustable":false,"chart.noredraw":false,"chart.outofbounds":false,"chart.chromefix":true,"chart.animation.factor":1,"chart.animation.unfold.x":false,"chart.animation.unfold.y":true,"chart.animation.unfold.initial":2,"chart.animation.trace.clip":1,"chart.curvy":false,"chart.line.visible":true,"chart.events.click":null,"chart.events.mousemove":null};for(var c=1;c<arguments.length;++c){if(typeof(arguments[c])=="null"||!arguments[c]){arguments[c]=[]}}this.original_data=[];for(var c=1;c<arguments.length;++c){if(arguments[1]&&typeof(arguments[1])=="object"&&arguments[1][0]&&typeof(arguments[1][0])=="object"&&arguments[1][0].length){var b=[];for(var c=0;c<arguments[1].length;++c){b[c]=RGraph.array_clone(arguments[1][c])}for(var a=0;a<b.length;++a){this.original_data[a]=RGraph.array_clone(b[a])}}else{this.original_data[c-1]=RGraph.array_clone(arguments[c])}}if(!this.canvas){alert("[LINE] Fatal error: no canvas support");return}this.data_arr=RGraph.array_linearize(this.original_data);for(var c=0;c<this.data_arr.length;++c){this["$"+c]={}}if(!this.canvas.__rgraph_aa_translated__){this.context.translate(0.5,0.5);this.canvas.__rgraph_aa_translated__=true}RGraph.Register(this)};RGraph.Line.prototype.Set=function(b,e){b=b.toLowerCase();if(b.substr(0,6)!="chart."){b="chart."+b}if(b=="chart.tooltips"&&typeof e=="object"&&e){var d=[];for(var c=1;c<arguments.length;c++){if(typeof(arguments[c])=="object"&&arguments[c][0]){for(var a=0;a<arguments[c].length;a++){d.push(arguments[c][a])}}else{if(typeof(arguments[c])=="function"){d=arguments[c]}else{d.push(arguments[c])}}}e=d}if(b=="chart.ylabels.invert"&&e&&this.properties["chart.ymin"]==null){this.Set("chart.ymin",0)}if(b=="chart.linewidth"&&navigator.userAgent.match(/Chrome/)){if(e==1){e=1.01}else{if(RGraph.is_array(e)){for(var c=0;c<e.length;++c){if(typeof(e[c])=="number"&&e[c]==1){e[c]=1.01}}}}}if(b=="chart.xaxispos"){if(e!="bottom"&&e!="center"&&e!="top"){alert("[LINE] ("+this.id+") chart.xaxispos should be top, center or bottom. Tried to set it to: "+e+" Changing it to center");e="center"}}if(b=="chart.numxticks"){b="chart.xticks"}if(b=="chart.spline"){b="chart.curvy"}this.properties[b]=e};RGraph.Line.prototype.Get=function(a){if(a.substr(0,6)!="chart."){a="chart."+a}return this.properties[a]};RGraph.Line.prototype.Draw=function(){if(typeof(this.properties["chart.background.image"])=="string"){RGraph.DrawBackgroundImage(this)}RGraph.FireCustomEvent(this,"onbeforedraw");if(!this.colorsParsed){this.parseColors();this.colorsParsed=true}this.gutterLeft=this.properties["chart.gutter.left"];this.gutterRight=this.properties["chart.gutter.right"];this.gutterTop=this.properties["chart.gutter.top"];this.gutterBottom=this.properties["chart.gutter.bottom"];if(this.properties["chart.shadow"]&&navigator.userAgent.match(/Chrome/)&&this.properties["chart.linewidth"]<=1&&this.properties["chart.chromefix"]&&this.properties["chart.shadow.blur"]>0){alert("[RGRAPH WARNING] Chrome has a shadow bug, meaning you should increase the linewidth to at least 1.01")}this.data=RGraph.array_clone(this.original_data);this.max=0;if(this.properties["chart.filled"]&&!this.properties["chart.filled.range"]&&this.data.length>1&&this.properties["chart.filled.accumulative"]){var k=[];for(var f=0;f<this.data.length;++f){for(var g=0;g<this.data[f].length;++g){this.data[f][g]=Number(k[g]?k[g]:0)+this.data[f][g];k[g]=this.data[f][g]}}}if(this.properties["chart.ymax"]){this.max=this.properties["chart.ymax"];this.min=this.properties["chart.ymin"]?this.properties["chart.ymin"]:0;this.scale=[(((this.max-this.min)*(1/5))+this.min).toFixed(this.properties["chart.scale.decimals"]),(((this.max-this.min)*(2/5))+this.min).toFixed(this.properties["chart.scale.decimals"]),(((this.max-this.min)*(3/5))+this.min).toFixed(this.properties["chart.scale.decimals"]),(((this.max-this.min)*(4/5))+this.min).toFixed(this.properties["chart.scale.decimals"]),this.max.toFixed(this.properties["chart.scale.decimals"])];if(!this.properties["chart.outofbounds"]){for(dataset=0;dataset<this.data.length;++dataset){for(var a=0;a<this.data[dataset].length;a++){this.hasnegativevalues=(this.data[dataset][a]<0)||this.hasnegativevalues}}}}else{this.min=this.properties["chart.ymin"]?this.properties["chart.ymin"]:0;for(dataset=0;dataset<this.data.length;++dataset){for(var a=0;a<this.data[dataset].length;a++){this.max=Math.max(this.max,this.data[dataset][a]?Math.abs(parseFloat(this.data[dataset][a])):0);if(!this.properties["chart.outofbounds"]){this.hasnegativevalues=(this.data[dataset][a]<0)||this.hasnegativevalues}}}this.scale=RGraph.getScale(Math.abs(parseFloat(this.max)),this);this.max=this.scale[4]?this.scale[4]:0;if(this.properties["chart.ymin"]){this.scale[0]=((this.max-this.properties["chart.ymin"])*(1/5))+this.properties["chart.ymin"];this.scale[1]=((this.max-this.properties["chart.ymin"])*(2/5))+this.properties["chart.ymin"];this.scale[2]=((this.max-this.properties["chart.ymin"])*(3/5))+this.properties["chart.ymin"];this.scale[3]=((this.max-this.properties["chart.ymin"])*(4/5))+this.properties["chart.ymin"];this.scale[4]=((this.max-this.properties["chart.ymin"])*(5/5))+this.properties["chart.ymin"]}if(typeof(this.properties["chart.scale.decimals"])=="number"){this.scale[0]=Number(this.scale[0]).toFixed(this.properties["chart.scale.decimals"]);this.scale[1]=Number(this.scale[1]).toFixed(this.properties["chart.scale.decimals"]);this.scale[2]=Number(this.scale[2]).toFixed(this.properties["chart.scale.decimals"]);this.scale[3]=Number(this.scale[3]).toFixed(this.properties["chart.scale.decimals"]);this.scale[4]=Number(this.scale[4]).toFixed(this.properties["chart.scale.decimals"])}}if(this.properties["chart.contextmenu"]){RGraph.ShowContext(this)}this.coords=[];this.grapharea=this.canvas.height-this.gutterTop-this.gutterBottom;this.halfgrapharea=this.grapharea/2;this.halfTextHeight=this.properties["chart.text.size"]/2;if(this.properties["chart.xaxispos"]=="bottom"&&this.hasnegativevalues&&navigator.userAgent.indexOf("Opera")==-1){alert("[LINE] You have negative values and the X axis is at the bottom. This is not good...")}if(this.properties["chart.variant"]=="3d"){RGraph.Draw3DAxes(this)}RGraph.background.Draw(this);if(this.properties["chart.background.hbars"]&&this.properties["chart.background.hbars"].length>0){RGraph.DrawBars(this)}if(this.properties["chart.axesontop"]==false){this.DrawAxes()}for(var c=0,b=0;c<this.data.length;c++,b++){this.context.beginPath();if(!this.properties["chart.filled"]){this.SetShadow(c)}if(this.properties["chart.fillstyle"]){if(typeof(this.properties["chart.fillstyle"])=="object"&&this.properties["chart.fillstyle"][b]){var h=this.properties["chart.fillstyle"][b]}else{if(typeof(this.properties["chart.fillstyle"])=="object"&&this.properties["chart.fillstyle"].toString().indexOf("Gradient")>0){var h=this.properties["chart.fillstyle"]}else{if(typeof(this.properties["chart.fillstyle"])=="string"){var h=this.properties["chart.fillstyle"]}}}}else{if(this.properties["chart.filled"]){var h=this.properties["chart.colors"][b]}else{var h=null}}if(this.properties["chart.tickmarks"]&&typeof(this.properties["chart.tickmarks"])=="object"){var d=this.properties["chart.tickmarks"][c]}else{if(this.properties["chart.tickmarks"]&&typeof(this.properties["chart.tickmarks"])=="string"){var d=this.properties["chart.tickmarks"]}else{if(this.properties["chart.tickmarks"]&&typeof(this.properties["chart.tickmarks"])=="function"){var d=this.properties["chart.tickmarks"]}else{var d=null}}}this.DrawLine(this.data[c],this.properties["chart.colors"][b],h,this.GetLineWidth(b),d,c);this.context.stroke()}if(this.properties["chart.filled"]&&this.properties["chart.filled.accumulative"]&&!this.properties["chart.curvy"]){for(var c=0;c<this.coords2.length;++c){this.context.beginPath();this.context.lineWidth=this.GetLineWidth(c);this.context.strokeStyle=this.properties["chart.colors"][c];for(var b=0;b<this.coords2[c].length;++b){if(b==0||this.coords2[c][b][1]==null||(this.coords2[c][b-1]&&this.coords2[c][b-1][1]==null)){this.context.moveTo(this.coords2[c][b][0],this.coords2[c][b][1])}else{if(this.properties["chart.stepped"]){this.context.lineTo(this.coords2[c][b][0],this.coords2[c][b-1][1])}this.context.lineTo(this.coords2[c][b][0],this.coords2[c][b][1])}}this.context.stroke()}if(this.properties["chart.tickmarks"]){this.context.beginPath();this.context.fillStyle="white";for(var c=0;c<this.coords2.length;++c){this.context.beginPath();this.context.strokeStyle=this.properties["chart.colors"][c];for(var b=0;b<this.coords2[c].length;++b){if(typeof(this.coords2[c][b])=="object"&&typeof(this.coords2[c][b][0])=="number"&&typeof(this.coords2[c][b][1])=="number"){var d=typeof(this.properties["chart.tickmarks"])=="object"?this.properties["chart.tickmarks"][c]:this.properties["chart.tickmarks"];this.DrawTick(this.coords2[c],this.coords2[c][b][0],this.coords2[c][b][1],this.context.strokeStyle,false,b==0?0:this.coords2[c][b-1][0],b==0?0:this.coords2[c][b-1][1],d,b)}}}this.context.stroke();this.context.fill()}}this.context.beginPath();if(this.properties["chart.axesontop"]){this.DrawAxes()}this.DrawLabels();this.DrawRange();if(this.properties["chart.key"]&&this.properties["chart.key"].length&&RGraph.DrawKey){RGraph.DrawKey(this,this.properties["chart.key"],this.properties["chart.colors"])}if(this.properties["chart.labels.above"]){this.DrawAboveLabels()}RGraph.DrawInGraphLabels(this);if(this.properties["chart.filled"]&&this.properties["chart.filled.range"]&&this.data.length==2){this.context.beginPath();var e=this.coords.length/2;this.context.lineWidth=this.properties["chart.linewidth"];this.context.strokeStyle=this.properties["chart.colors"][0];for(var c=0;c<e;++c){if(c==0){this.context.moveTo(this.coords[c][0],this.coords[c][1])}else{this.context.lineTo(this.coords[c][0],this.coords[c][1])}}this.context.stroke();this.context.beginPath();if(this.properties["chart.colors"][1]){this.context.strokeStyle=this.properties["chart.colors"][1]}for(var c=this.coords.length-1;c>=e;--c){if(c==(this.coords.length-1)){this.context.moveTo(this.coords[c][0],this.coords[c][1])}else{this.context.lineTo(this.coords[c][0],this.coords[c][1])}}this.context.stroke()}else{if(this.properties["chart.filled"]&&this.properties["chart.filled.range"]){alert("[LINE] You must have only two sets of data for a filled range chart")}}if(this.properties["chart.resizable"]){RGraph.AllowResizing(this)}RGraph.InstallEventListeners(this);RGraph.FireCustomEvent(this,"ondraw")};RGraph.Line.prototype.DrawAxes=function(){if(this.properties["chart.noaxes"]){return}RGraph.NoShadow(this);this.context.lineWidth=1.001;this.context.lineCap="butt";this.context.strokeStyle=this.properties["chart.axis.color"];this.context.beginPath();if(this.properties["chart.noxaxis"]==false){if(this.properties["chart.xaxispos"]=="center"){this.context.moveTo(this.gutterLeft,Math.round((this.grapharea/2)+this.gutterTop));this.context.lineTo(this.canvas.width-this.gutterRight,Math.round((this.grapharea/2)+this.gutterTop))}else{if(this.properties["chart.xaxispos"]=="top"){this.context.moveTo(this.gutterLeft,this.gutterTop);this.context.lineTo(this.canvas.width-this.gutterRight,this.gutterTop)}else{this.context.moveTo(this.gutterLeft,this.canvas.height-this.gutterBottom);this.context.lineTo(this.canvas.width-this.gutterRight,this.canvas.height-this.gutterBottom)}}}if(this.properties["chart.noyaxis"]==false){if(this.properties["chart.yaxispos"]=="left"){this.context.moveTo(this.gutterLeft,this.gutterTop);this.context.lineTo(this.gutterLeft,this.canvas.height-this.gutterBottom)}else{this.context.moveTo(this.canvas.width-this.gutterRight,this.gutterTop);this.context.lineTo(this.canvas.width-this.gutterRight,this.canvas.height-this.gutterBottom)}}if(this.properties["chart.noxaxis"]==false){if(this.data[0].length>0){var e=(this.canvas.width-this.gutterLeft-this.gutterRight)/(this.properties["chart.xticks"]?this.properties["chart.xticks"]:(this.data[0].length-1))}if(!e||e<=0){e=(this.canvas.width-this.gutterLeft-this.gutterRight)/(this.properties["chart.labels"]&&this.properties["chart.labels"].length?this.properties["chart.labels"].length-1:10)}for(x=this.gutterLeft+(this.properties["chart.yaxispos"]=="left"?e:0);x<=(this.canvas.width-this.gutterRight+1);x+=e){if(this.properties["chart.yaxispos"]=="right"&&x>=(this.canvas.width-this.gutterRight-1)){break}if(this.properties["chart.noendxtick"]){if(this.properties["chart.yaxispos"]=="left"&&x>=(this.canvas.width-this.gutterRight-1)){break}else{if(this.properties["chart.yaxispos"]=="right"&&x==this.gutterLeft){continue}}}var f=this.properties["chart.xaxispos"]=="center"?(this.gutterTop+(this.grapharea/2))-3:this.canvas.height-this.gutterBottom;var g=this.properties["chart.xaxispos"]=="center"?f+6:this.canvas.height-this.gutterBottom-(x%60==0?this.properties["chart.largexticks"]*this.properties["chart.tickdirection"]:this.properties["chart.smallxticks"]*this.properties["chart.tickdirection"]);if(this.properties["chart.xaxispos"]=="center"){var f=Math.round((this.gutterTop+(this.grapharea/2)))-3;var g=f+6}else{if(this.properties["chart.xaxispos"]=="bottom"){var f=this.canvas.height-this.gutterBottom;var g=this.canvas.height-this.gutterBottom-(x%60==0?this.properties["chart.largexticks"]*this.properties["chart.tickdirection"]:this.properties["chart.smallxticks"]*this.properties["chart.tickdirection"]);g+=0}else{if(this.properties["chart.xaxispos"]=="top"){f=this.gutterTop-3;g=this.gutterTop}}}this.context.moveTo(Math.round(x),f);this.context.lineTo(Math.round(x),g)}}else{if(this.properties["chart.noyaxis"]==false){if(!this.properties["chart.noendytick"]){if(this.properties["chart.yaxispos"]=="left"){this.context.moveTo(this.gutterLeft,Math.round(this.canvas.height-this.gutterBottom));this.context.lineTo(this.gutterLeft-this.properties["chart.smallyticks"],Math.round(this.canvas.height-this.gutterBottom))}else{this.context.moveTo(this.canvas.width-this.gutterRight,Math.round(this.canvas.height-this.gutterBottom));this.context.lineTo(this.canvas.width-this.gutterRight+this.properties["chart.smallyticks"],Math.round(this.canvas.height-this.gutterBottom))}}}}var a=this.properties["chart.numyticks"];if(this.properties["chart.noyaxis"]==false){var b=0;var d=0;if(this.properties["chart.yaxispos"]=="right"){d=(this.canvas.width-this.gutterLeft-this.gutterRight)}if(this.properties["chart.xaxispos"]=="center"){var c=(this.grapharea/a);var h=(this.properties["chart.yaxispos"]=="left"?this.gutterLeft:this.canvas.width-this.gutterRight+this.properties["chart.smallyticks"]);for(y=this.gutterTop;y<(this.grapharea/2)+this.gutterTop;y+=c){if(y<(this.grapharea/2)+this.gutterTop){this.context.moveTo((this.properties["chart.yaxispos"]=="left"?this.gutterLeft-this.properties["chart.smallyticks"]:this.canvas.width-this.gutterRight),Math.round(y));this.context.lineTo(h,Math.round(y))}}for(y=this.gutterTop+(this.halfgrapharea)+c;y<=this.grapharea+this.gutterTop;y+=c){this.context.moveTo((this.properties["chart.yaxispos"]=="left"?this.gutterLeft-this.properties["chart.smallyticks"]:this.canvas.width-this.gutterRight),Math.round(y));this.context.lineTo(h,Math.round(y))}}else{if(this.properties["chart.xaxispos"]=="top"){var c=(this.grapharea/a);var h=(this.properties["chart.yaxispos"]=="left"?this.gutterLeft:this.canvas.width-this.gutterRight+this.properties["chart.smallyticks"]);for(y=this.gutterTop+c;y<=this.grapharea+this.gutterTop;y+=c){this.context.moveTo((this.properties["chart.yaxispos"]=="left"?this.gutterLeft-this.properties["chart.smallyticks"]:this.canvas.width-this.gutterRight),Math.round(y));this.context.lineTo(h,Math.round(y))}if(this.properties["chart.noxaxis"]&&this.properties["chart.noendytick"]==false){this.context.moveTo((this.properties["chart.yaxispos"]=="left"?this.gutterLeft-this.properties["chart.smallyticks"]:this.canvas.width-this.gutterRight),this.gutterTop);this.context.lineTo(h,this.gutterTop)}}else{var h=(this.properties["chart.yaxispos"]=="left"?this.gutterLeft-this.properties["chart.smallyticks"]:this.canvas.width-this.gutterRight+this.properties["chart.smallyticks"]);for(y=this.gutterTop;y<(this.canvas.height-this.gutterBottom)&&b<a;y+=((this.canvas.height-this.gutterTop-this.gutterBottom)/a)){this.context.moveTo(this.gutterLeft+d,Math.round(y));this.context.lineTo(h,Math.round(y));var b=b+1}}}}else{if(this.properties["chart.noxaxis"]==false){if(this.properties["chart.yaxispos"]=="left"){this.context.moveTo(this.gutterLeft,this.properties["chart.xaxispos"]=="top"?this.gutterTop:this.canvas.height-this.gutterBottom);this.context.lineTo(this.gutterLeft,this.properties["chart.xaxispos"]=="top"?this.gutterTop-this.properties["chart.smallxticks"]:this.canvas.height-this.gutterBottom+this.properties["chart.smallxticks"])}else{this.context.moveTo(this.canvas.width-this.gutterRight,this.canvas.height-this.gutterBottom);this.context.lineTo(this.canvas.width-this.gutterRight,this.canvas.height-this.gutterBottom+this.properties["chart.smallxticks"])}}}this.context.stroke()};RGraph.Line.prototype.DrawLabels=function(){this.context.strokeStyle="black";this.context.fillStyle=this.properties["chart.text.color"];this.context.lineWidth=1;RGraph.NoShadow(this);var p=this.properties["chart.text.font"];var n=this.properties["chart.text.size"];var c=this.context;var e=this.canvas;if(this.properties["chart.ylabels"]&&this.properties["chart.ylabels.specific"]==null){var C=this.properties["chart.units.pre"];var s=this.properties["chart.units.post"];var d=this.properties["chart.yaxispos"]=="left"?this.gutterLeft-5:this.canvas.width-this.gutterRight+5;var u=this.properties["chart.yaxispos"]=="left"?"right":"left";var z=this.properties["chart.ylabels.count"];var f=false;var a=this.properties["chart.ylabels.inside"]?this.properties["chart.ylabels.inside.color"]:null;if(this.properties["chart.ylabels.inside"]==true&&u=="left"){d-=10;u="right";f=true}else{if(this.properties["chart.ylabels.inside"]==true&&u=="right"){d+=10;u="left";f=true}}if(this.properties["chart.xaxispos"]=="center"){var t=this.grapharea/2;if(z==1||z==3||z==5){RGraph.Text(c,p,n,d,this.gutterTop+((0/5)*t)+this.halfTextHeight,RGraph.number_format(this,this.scale[4],C,s),null,u,f,null,a);if(z==5){RGraph.Text(c,p,n,d,this.gutterTop+((1/5)*t)+this.halfTextHeight,RGraph.number_format(this,this.scale[3],C,s),null,u,f,null,a);RGraph.Text(c,p,n,d,this.gutterTop+((3/5)*t)+this.halfTextHeight,RGraph.number_format(this,this.scale[1],C,s),null,u,f,null,a)}if(z>=3){RGraph.Text(c,p,n,d,this.gutterTop+((2/5)*t)+this.halfTextHeight,RGraph.number_format(this,this.scale[2],C,s),null,u,f,null,a);RGraph.Text(c,p,n,d,this.gutterTop+((4/5)*t)+this.halfTextHeight,RGraph.number_format(this,this.scale[0],C,s),null,u,f,null,a)}if(z>=3){RGraph.Text(c,p,n,d,this.gutterTop+((6/5)*t)+this.halfTextHeight,"-"+RGraph.number_format(this,this.scale[0],C,s),null,u,f,null,a);RGraph.Text(c,p,n,d,this.gutterTop+((8/5)*t)+this.halfTextHeight,"-"+RGraph.number_format(this,this.scale[2],C,s),null,u,f,null,a)}if(z==5){RGraph.Text(c,p,n,d,this.gutterTop+((7/5)*t)+this.halfTextHeight,"-"+RGraph.number_format(this,this.scale[1],C,s),null,u,f,null,a);RGraph.Text(c,p,n,d,this.gutterTop+((9/5)*t)+this.halfTextHeight,"-"+RGraph.number_format(this,this.scale[3],C,s),null,u,f,null,a)}RGraph.Text(c,p,n,d,this.gutterTop+((10/5)*t)+this.halfTextHeight,"-"+RGraph.number_format(this,(this.scale[4]=="1.0"?"1.0":this.scale[4]),C,s),null,u,f,null,a)}else{if(z==10){var B=(this.grapharea/z)/2;for(var v=0;v<z;++v){RGraph.Text(c,p,n,d,this.gutterTop+this.halfTextHeight+((v/20)*(this.grapharea)),RGraph.number_format(this,((this.scale[4]/z)*(z-v)).toFixed((this.properties["chart.scale.decimals"])),C,s),null,u,f,null,a);RGraph.Text(c,p,n,d,this.gutterTop+this.halfTextHeight+((v/20)*this.grapharea)+(this.grapharea/2)+(this.grapharea/20),"-"+RGraph.number_format(this,(this.scale[4]-((this.scale[4]/z)*(z-v-1))).toFixed((this.properties["chart.scale.decimals"])),C,s),null,u,f,null,a)}}else{}}if(typeof(this.properties["chart.ymin"])=="number"){RGraph.Text(c,p,n,d,this.canvas.height/2,RGraph.number_format(this,this.properties["chart.ymin"].toFixed(this.properties["chart.scale.decimals"]),C,s),"center",u,f,null,a)}if(this.properties["chart.noxaxis"]==true){RGraph.Text(c,p,n,d,this.gutterTop+((5/5)*t)+this.halfTextHeight,this.properties["chart.units.pre"]+"0"+this.properties["chart.units.post"],null,u,f,null,a)}}else{if(this.properties["chart.xaxispos"]=="top"){var D=RGraph.array_reverse(this.scale);if(this.properties["chart.ylabels.invert"]){D=RGraph.array_reverse(D);this.context.translate(0,this.grapharea*-0.2);if(typeof(this.properties["chart.ymin"])==null){this.Set("chart.ymin",0)}}if(z==1||z==3||z==5){RGraph.Text(c,p,n,d,this.gutterTop+this.halfTextHeight+((1/5)*(this.grapharea)),"-"+RGraph.number_format(this,D[4],C,s),null,u,f,null,a);if(z==5){RGraph.Text(c,p,n,d,this.gutterTop+this.halfTextHeight+((4/5)*(this.grapharea)),"-"+RGraph.number_format(this,D[1],C,s),null,u,f,null,a);RGraph.Text(c,p,n,d,this.gutterTop+this.halfTextHeight+((2/5)*(this.grapharea)),"-"+RGraph.number_format(this,D[3],C,s),null,u,f,null,a)}if(z>=3){RGraph.Text(c,p,n,d,this.gutterTop+this.halfTextHeight+((3/5)*(this.grapharea)),"-"+RGraph.number_format(this,D[2],C,s),null,u,f,null,a);RGraph.Text(c,p,n,d,this.gutterTop+this.halfTextHeight+((5/5)*(this.grapharea)),"-"+RGraph.number_format(this,D[0],C,s),null,u,f,null,a)}}else{if(z==10){var B=(this.grapharea/z)/2;for(var v=0;v<z;++v){RGraph.Text(c,p,n,d,(2*B)+this.gutterTop+this.halfTextHeight+((v/10)*(this.grapharea)),"-"+RGraph.number_format(this,(D[0]-(((D[0]-this.min)/z)*(z-v-1))).toFixed((this.properties["chart.scale.decimals"])),C,s),null,u,f,null,a)}}else{}}if(this.properties["chart.ylabels.invert"]){this.context.translate(0,0-(this.grapharea*-0.2))}if(typeof(this.properties["chart.ymin"])=="number"){RGraph.Text(c,p,n,d,this.properties["chart.ylabels.invert"]?this.canvas.height-this.gutterBottom:this.gutterTop,"-"+RGraph.number_format(this,this.properties["chart.ymin"].toFixed(this.properties["chart.scale.decimals"]),C,s),"center",u,f,null,a)}}else{if(this.properties["chart.ylabels.invert"]){this.scale=RGraph.array_reverse(this.scale);this.context.translate(0,this.grapharea*0.2);if(typeof(this.properties["chart.ymin"])==null){this.Set("chart.ymin",0)}}if(z==1||z==3||z==5){RGraph.Text(c,p,n,d,this.gutterTop+this.halfTextHeight+((0/5)*(this.grapharea)),RGraph.number_format(this,this.scale[4],C,s),null,u,f,null,a);if(z==5){RGraph.Text(c,p,n,d,this.gutterTop+this.halfTextHeight+((3/5)*(this.grapharea)),RGraph.number_format(this,this.scale[1],C,s),null,u,f,null,a);RGraph.Text(c,p,n,d,this.gutterTop+this.halfTextHeight+((1/5)*(this.grapharea)),RGraph.number_format(this,this.scale[3],C,s),null,u,f,null,a)}if(z>=3){RGraph.Text(c,p,n,d,this.gutterTop+this.halfTextHeight+((2/5)*(this.grapharea)),RGraph.number_format(this,this.scale[2],C,s),null,u,f,null,a);RGraph.Text(c,p,n,d,this.gutterTop+this.halfTextHeight+((4/5)*(this.grapharea)),RGraph.number_format(this,this.scale[0],C,s),null,u,f,null,a)}}else{if(z==10){var B=(this.grapharea/z)/2;for(var v=0;v<z;++v){RGraph.Text(c,p,n,d,this.gutterTop+this.halfTextHeight+((v/10)*(this.grapharea)),RGraph.number_format(this,((((this.scale[4]-this.min)/z)*(z-v))+this.min).toFixed((this.properties["chart.scale.decimals"])),C,s),null,u,f,null,a)}}else{}}if(this.properties["chart.ylabels.invert"]){this.context.translate(0,0-(this.grapharea*0.2))}if(typeof(this.properties["chart.ymin"])=="number"){RGraph.Text(c,p,n,d,this.properties["chart.ylabels.invert"]?this.gutterTop:this.canvas.height-this.gutterBottom,RGraph.number_format(this,this.properties["chart.ymin"].toFixed(this.properties["chart.scale.decimals"]),C,s),"center",u,f,null,a)}}}if(this.properties["chart.noxaxis"]==true&&this.properties["chart.ymin"]==null&&this.properties["chart.xaxispos"]!="center"&&this.properties["chart.noendytick"]==false){RGraph.Text(c,p,n,d,this.properties["chart.xaxispos"]=="top"?this.gutterTop+this.halfTextHeight:(this.canvas.height-this.gutterBottom+this.halfTextHeight),this.properties["chart.units.pre"]+"0"+this.properties["chart.units.post"],null,u,f,null,a)}}else{if(this.properties["chart.ylabels"]&&typeof(this.properties["chart.ylabels.specific"])=="object"){var q=this.grapharea/this.properties["chart.ylabels.specific"].length;var o=this.properties["chart.yaxispos"]=="left"?"right":"left";var f=false;var a=null;var r=this.properties["chart.ymin"]!=null&&this.properties["chart.ymin"];if(this.properties["chart.yaxispos"]=="left"){var m=this.gutterLeft-5;if(this.properties["chart.ylabels.inside"]){m+=10;o="left";f=true;a="rgba(255,255,255,0.5)"}}else{if(this.properties["chart.yaxispos"]=="right"){var m=this.canvas.width-this.gutterRight+5;if(this.properties["chart.ylabels.inside"]){m-=10;o="right";f=true;a="rgba(255,255,255,0.5)"}}}if(this.properties["chart.xaxispos"]=="center"){for(var v=0;v<this.properties["chart.ylabels.specific"].length;++v){var k=this.gutterTop+(this.grapharea/((this.properties["chart.ylabels.specific"].length)*2)*v);if(r&&r>0){var k=((this.grapharea/2)/(this.properties["chart.ylabels.specific"].length-(r?1:0)))*v;k+=this.gutterTop}RGraph.Text(c,p,n,m,k,String(this.properties["chart.ylabels.specific"][v]),"center",o,f,0,a)}var w=RGraph.array_reverse(this.properties["chart.ylabels.specific"]);for(var v=0;v<w.length;++v){var k=(this.grapharea/2)+this.gutterTop+((this.grapharea/(w.length*2))*(v+1));if(r&&r>0){var k=((this.grapharea/2)/(w.length-(r?1:0)))*v;k+=this.gutterTop;k+=(this.grapharea/2)}RGraph.Text(c,p,n,m,k,String(w[v]),"center",o,f,0,a)}}else{if(this.properties["chart.xaxispos"]=="top"){var w=RGraph.array_reverse(this.properties["chart.ylabels.specific"]);for(var v=0;v<w.length;++v){var k=((this.grapharea/(w.length-(r?1:0)))*(v+(r?0:1)));k=k+this.gutterTop;RGraph.Text(c,p,n,m,k,String(w[v]),"center",o,f,0,a)}}else{for(var v=0;v<this.properties["chart.ylabels.specific"].length;++v){var k=this.gutterTop+((this.grapharea/(this.properties["chart.ylabels.specific"].length-(r?1:0)))*v);RGraph.Text(c,p,n,m,k,String(this.properties["chart.ylabels.specific"][v]),"center",o,f,0,a)}}}}}if(this.properties["chart.labels"]&&this.properties["chart.labels"].length>0){var j=5;var h=false;var a=null;var A=0;var g="top";var o="center";if(this.properties["chart.xlabels.inside"]){j=-5;h=true;a=this.properties["chart.xlabels.inside.color"];g="bottom"}if(this.properties["chart.xaxispos"]=="top"){g="bottom";j+=2}if(typeof(this.properties["chart.text.angle"])=="number"&&this.properties["chart.text.angle"]>0){A=-1*this.properties["chart.text.angle"];g="center";o="right";j=10;if(this.properties["chart.xaxispos"]=="top"){j=10}}this.context.fillStyle=this.properties["chart.text.color"];var b=this.properties["chart.labels"].length;for(v=0;v<b;++v){if(this.properties["chart.labels"][v]){var l=((this.canvas.width-this.gutterLeft-this.gutterRight-(2*this.properties["chart.hmargin"]))/(b-1))*v;l+=this.gutterLeft+this.properties["chart.hmargin"];if(this.properties["chart.labels"].length!=this.data[0].length){l=this.gutterLeft+this.properties["chart.hmargin"]+((this.canvas.width-this.gutterLeft-this.gutterRight-(2*this.properties["chart.hmargin"]))*(v/(this.properties["chart.labels"].length-1)))}if(!l){l=this.gutterLeft+this.properties["chart.hmargin"]}if(this.properties["chart.xaxispos"]=="top"&&this.properties["chart.text.angle"]>0){o="left"}RGraph.Text(c,p,n,l,(this.properties["chart.xaxispos"]=="top")?this.gutterTop-j-(this.properties["chart.xlabels.inside"]?-22:0):(this.canvas.height-this.gutterBottom)+j,String(this.properties["chart.labels"][v]),g,o,h,A,a)}}}this.context.stroke();this.context.fill()};RGraph.Line.prototype.DrawLine=function(s,v,w,z,c,h){if(this.properties["chart.animation.unfold.y"]&&this.properties["chart.animation.factor"]!=1){for(var A=0;A<s.length;++A){s[A]*=this.properties["chart.animation.factor"]}}var o=false;var r=null;var l=0;this.context.lineWidth=1;var g=[];if(h>0){var q=this.coords2[h-1]}var b=(this.canvas.width-(2*this.properties["chart.hmargin"])-this.gutterLeft-this.gutterRight)/(s.length-1);for(A=0;A<s.length;A++){var n=s[A];r=this.canvas.height-(((n-(n>0?this.properties["chart.ymin"]:(-1*this.properties["chart.ymin"])))/(this.max-this.min))*this.grapharea);r=(this.grapharea/(this.max-this.min))*(n-this.min);r=this.canvas.height-r;if(n==this.max){r=Math.round(r)}if(this.properties["chart.ylabels.invert"]){r-=this.gutterBottom;r-=this.gutterTop;r=this.canvas.height-r}if(this.properties["chart.xaxispos"]=="center"){r=(r-this.gutterBottom-this.gutterTop)/2;r=r+this.gutterTop}else{if(this.properties["chart.xaxispos"]=="top"){r=(this.grapharea/(this.max-this.min))*(Math.abs(n)-this.min);r+=this.gutterTop;if(this.properties["chart.ylabels.invert"]){r-=this.gutterTop;r=this.grapharea-r;r+=this.gutterTop}}else{if(this.properties["chart.xaxispos"]=="bottom"){r-=this.gutterBottom}}}if(s[A]==null||(this.properties["chart.xaxispos"]=="bottom"&&s[A]<this.min&&!this.properties["chart.outofbounds"])||(this.properties["chart.xaxispos"]=="center"&&s[A]<(-1*this.max)&&!this.properties["chart.outofbounds"])){r=null}this.context.lineCap="round";this.context.lineJoin="round";if(A>0){l=l+b}else{l=this.properties["chart.hmargin"]+this.gutterLeft}if(this.properties["chart.animation.unfold.x"]){l*=this.properties["chart.animation.factor"];if(l<this.properties["chart.gutter.left"]){l=this.properties["chart.gutter.left"]}}this.coords.push([l,r]);g.push([l,r])}this.context.stroke();this.coords2[h]=g;if(RGraph.isOld()&&this.properties["chart.shadow"]){this.DrawIEShadow(g,this.context.shadowColor)}this.context.beginPath();this.context.strokeStyle="rgba(0,0,0,0)";if(w){this.context.fillStyle=w}var p=this.properties["chart.stepped"];var B=this.properties["chart.filled"];if(this.properties["chart.xaxispos"]=="top"){var a=this.gutterTop}else{if(this.properties["chart.xaxispos"]=="center"){var a=this.gutterTop+(this.grapharea/2)}else{if(this.properties["chart.xaxispos"]=="bottom"){var a=this.canvas.height-this.gutterBottom}}}for(var A=0;A<g.length;++A){l=g[A][0];r=g[A][1];var m=h;var d=(g[A-1]?g[A-1][1]:null);var j=(A+1)==g.length;if(d<this.gutterTop||d>(this.canvas.height-this.gutterBottom)){o=true}if(A==0||o||!r||!d||d<this.gutterTop){if(this.properties["chart.filled"]&&!this.properties["chart.filled.range"]){this.context.moveTo(l+1,a);if(this.properties["chart.xaxispos"]=="top"){this.context.moveTo(l+1,a)}this.context.lineTo(l,r)}else{if(RGraph.isOld()&&r==null){}else{this.context.moveTo(l+1,r)}}if(r==null){o=true}else{o=false}}else{if(p){this.context.lineTo(l,g[A-1][1])}if((r>=this.gutterTop&&r<=(this.canvas.height-this.gutterBottom))||this.properties["chart.outofbounds"]){if(j&&this.properties["chart.filled"]&&!this.properties["chart.filled.range"]&&this.properties["chart.yaxispos"]=="right"){l-=1}if(!p||!j){this.context.lineTo(l,r);if(B&&g[A+1]&&g[A+1][1]==null){this.context.lineTo(l,a)}}else{if(p&&j){this.context.lineTo(l,r)}}o=false}else{o=true}}}if(this.properties["chart.filled"]&&!this.properties["chart.filled.range"]&&!this.properties["chart.curvy"]){var f=this.properties["chart.fillstyle"];if(h>0&&this.properties["chart.filled.accumulative"]){this.context.lineTo(l,q?q[A-1][1]:(this.canvas.height-this.gutterBottom-1+(this.properties["chart.xaxispos"]=="center"?(this.canvas.height-this.gutterTop-this.gutterBottom)/2:0)));for(var u=(A-1);u>=0;--u){this.context.lineTo(u==0?q[u][0]+1:q[u][0],q[u][1])}}else{if(this.properties["chart.xaxispos"]=="top"){this.context.lineTo(l,this.properties["chart.gutter.top"]+1);this.context.lineTo(g[0][0],this.properties["chart.gutter.top"]+1)}else{if(typeof(g[A-1][1])=="number"){var t=this.properties["chart.xaxispos"]=="center"?((this.canvas.height-this.gutterTop-this.gutterBottom)/2)+this.gutterTop:this.canvas.height-this.gutterBottom;this.context.lineTo(l,t);this.context.lineTo(g[0][0],t)}}}this.context.fillStyle=w;this.context.fill();this.context.beginPath()}if(navigator.userAgent.match(/Chrome/)&&this.properties["chart.shadow"]&&this.properties["chart.chromefix"]&&this.properties["chart.shadow.blur"]>0){for(var A=g.length-1;A>=0;--A){if(typeof(g[A][1])!="number"||(typeof(g[A+1])=="object"&&typeof(g[A+1][1])!="number")){this.context.moveTo(g[A][0],g[A][1])}else{this.context.lineTo(g[A][0],g[A][1])}}}this.context.stroke();if(this.properties["chart.backdrop"]){this.DrawBackdrop(g,v)}this.context.save();this.context.beginPath();this.context.rect(this.properties["chart.gutter.left"],0,((this.canvas.width-this.gutterLeft-this.gutterRight)*this.Get("chart.animation.trace.clip"))+this.gutterLeft,this.canvas.height);this.context.clip();this.SetShadow(h);this.RedrawLine(g,v,z);this.context.stroke();RGraph.NoShadow(this);for(var A=0;A<g.length;++A){A=Number(A);this.context.strokeStyle=v;if(p&&A==(g.length-1)){this.context.beginPath()}if((c!="endcircle"&&c!="endsquare"&&c!="filledendsquare"&&c!="endtick"&&c!="endtriangle"&&c!="arrow"&&c!="filledarrow")||(A==0&&c!="arrow"&&c!="filledarrow")||A==(g.length-1)){var e=(A<=0?null:g[A-1][0]);var d=(A<=0?null:g[A-1][1]);this.DrawTick(s,g[A][0],g[A][1],v,false,e,d,c,A)}}this.context.restore();this.context.beginPath();this.context.arc(this.canvas.width+50000,this.canvas.height+50000,2,0,6.38,1)};RGraph.Line.prototype.DrawTick=function(e,h,d,f,i,m,l,j,k){if((d==null||d>(this.canvas.height-this.gutterBottom)||d<this.gutterTop)&&!this.properties["chart.outofbounds"]||!this.properties["chart.line.visible"]){return}this.context.beginPath();var g=0;this.context.lineWidth=this.properties["chart.tickmarks.linewidth"]?this.properties["chart.tickmarks.linewidth"]:this.properties["chart.linewidth"];this.context.strokeStyle=i?this.properties["chart.shadow.color"]:this.context.strokeStyle;this.context.fillStyle=i?this.properties["chart.shadow.color"]:this.context.strokeStyle;if(j=="circle"||j=="filledcircle"||j=="endcircle"){if(j=="circle"||j=="filledcircle"||(j=="endcircle"&&(k==0||k==(e.length-1)))){this.context.beginPath();this.context.arc(h+g,d+g,this.properties["chart.ticksize"],0,360/(180/PI),false);if(j=="filledcircle"){this.context.fillStyle=i?this.properties["chart.shadow.color"]:this.context.strokeStyle}else{this.context.fillStyle=i?this.properties["chart.shadow.color"]:"white"}this.context.stroke();this.context.fill()}}else{if(j=="halftick"){this.context.beginPath();this.context.moveTo(Math.round(h),d);this.context.lineTo(Math.round(h),d+this.properties["chart.ticksize"]);this.context.stroke()}else{if(j=="tick"){this.context.beginPath();this.context.moveTo(Math.round(h),d-this.properties["chart.ticksize"]);this.context.lineTo(Math.round(h),d+this.properties["chart.ticksize"]);this.context.stroke()}else{if(j=="endtick"&&(k==0||k==(e.length-1))){this.context.beginPath();this.context.moveTo(Math.round(h),d-this.properties["chart.ticksize"]);this.context.lineTo(Math.round(h),d+this.properties["chart.ticksize"]);this.context.stroke()}else{if(j=="cross"){this.context.beginPath();var c=this.properties["chart.ticksize"];this.context.moveTo(h-c,d-c);this.context.lineTo(h+c,d+c);this.context.moveTo(h+c,d-c);this.context.lineTo(h-c,d+c);this.context.stroke()}else{if(j=="triangle"||j=="filledtriangle"||(j=="endtriangle"&&(k==0||k==(e.length-1)))){this.context.beginPath();if(j=="filledtriangle"){this.context.fillStyle=i?this.properties["chart.shadow.color"]:this.context.strokeStyle}else{this.context.fillStyle="white"}this.context.moveTo(Math.round(h-this.properties["chart.ticksize"]),d+this.properties["chart.ticksize"]);this.context.lineTo(Math.round(h),d-this.properties["chart.ticksize"]);this.context.lineTo(Math.round(h+this.properties["chart.ticksize"]),d+this.properties["chart.ticksize"]);this.context.closePath();this.context.stroke();this.context.fill()}else{if(j=="borderedcircle"||j=="dot"){this.context.lineWidth=1;this.context.strokeStyle=this.properties["chart.tickmarks.dot.color"];this.context.fillStyle=this.properties["chart.tickmarks.dot.color"];this.context.beginPath();this.context.arc(h,d,this.properties["chart.ticksize"],0,360/(180/PI),false);this.context.closePath();this.context.fill();this.context.stroke();this.context.beginPath();this.context.fillStyle=f;this.context.strokeStyle=f;this.context.arc(h,d,this.properties["chart.ticksize"]-2,0,360/(180/PI),false);this.context.closePath();this.context.fill();this.context.stroke()}else{if(j=="square"||j=="filledsquare"||(j=="endsquare"&&(k==0||k==(e.length-1)))||(j=="filledendsquare"&&(k==0||k==(e.length-1)))){this.context.fillStyle="white";this.context.strokeStyle=this.context.strokeStyle;this.context.beginPath();this.context.rect(Math.round(h-this.properties["chart.ticksize"]),Math.round(d-this.properties["chart.ticksize"]),this.properties["chart.ticksize"]*2,this.properties["chart.ticksize"]*2);if(j=="filledsquare"||j=="filledendsquare"){this.context.fillStyle=i?this.properties["chart.shadow.color"]:this.context.strokeStyle;this.context.rect(Math.round(h-this.properties["chart.ticksize"]),Math.round(d-this.properties["chart.ticksize"]),this.properties["chart.ticksize"]*2,this.properties["chart.ticksize"]*2)}else{if(j=="square"||j=="endsquare"){this.context.fillStyle=i?this.properties["chart.shadow.color"]:"white";this.context.rect(Math.round((h-this.properties["chart.ticksize"])+1),Math.round((d-this.properties["chart.ticksize"])+1),(this.properties["chart.ticksize"]*2)-2,(this.properties["chart.ticksize"]*2)-2)}}this.context.stroke();this.context.fill()}else{if(j=="filledarrow"){var p=Math.abs(h-m);var n=Math.abs(d-l);if(d<l){var o=Math.atan(p/n)+1.57}else{var o=Math.atan(n/p)+3.14}this.context.beginPath();this.context.moveTo(Math.round(h),Math.round(d));this.context.arc(Math.round(h),Math.round(d),7,o-0.5,o+0.5,false);this.context.closePath();this.context.stroke();this.context.fill()}else{if(j=="arrow"){var p=Math.abs(h-m);var n=Math.abs(d-l);var b=this.context.lineWidth;if(d<l){var o=Math.atan(p/n)+1.57}else{var o=Math.atan(n/p)+3.14}this.context.beginPath();this.context.moveTo(Math.round(h),Math.round(d));this.context.arc(Math.round(h),Math.round(d),7,o-0.5-(document.all?0.1:0.01),o-0.4,false);this.context.moveTo(Math.round(h),Math.round(d));this.context.arc(Math.round(h),Math.round(d),7,o+0.5+(document.all?0.1:0.01),o+0.5,true);this.context.stroke();this.context.fill();this.context.lineWidth=b}else{if(typeof(j)=="function"){j(this,e,e[k],k,h,d,f,m,l)}}}}}}}}}}}};RGraph.Line.prototype.DrawRange=function(){if(this.properties["chart.filled.range"]&&this.properties["chart.filled"]){this.context.beginPath();this.context.fillStyle=this.properties["chart.fillstyle"];this.context.lineWidth=1;var a=(this.coords.length/2);for(var b=0;b<a;++b){if(b==0){this.context.moveTo(this.coords[b][0],this.coords[b][1])}else{this.context.lineTo(this.coords[b][0],this.coords[b][1])}}for(var b=this.coords.length-1;b>=a;--b){this.context.lineTo(this.coords[b][0],this.coords[b][1])}this.context.fill()}};RGraph.Line.prototype.RedrawLine=function(l,c,k){if(this.properties["chart.noredraw"]){return}this.context.strokeStyle=(typeof(c)=="object"&&c&&c.toString().indexOf("CanvasGradient")==-1?c[0]:c);this.context.lineWidth=k;if(!this.properties["chart.line.visible"]){this.context.strokeStyle="rgba(0,0,0,0)"}if(this.properties["chart.curvy"]||this.properties["chart.spline"]){this.DrawCurvyLine(l,!this.properties["chart.line.visible"]?"transparent":c,k);return}this.context.beginPath();var h=l.length;var a=this.canvas.width;var m=this.canvas.height;var d=false;for(var e=0;e<h;++e){var f=l[e][0];var b=l[e][1];if(e>0){var j=l[e-1][0];var g=l[e-1][1]}if(((e==0&&l[e])||(b<this.gutterTop)||(g<this.gutterTop)||(b>(m-this.gutterBottom))||(e>0&&j>(a-this.gutterRight))||(e>0&&g>(m-this.gutterBottom))||g==null||d==true)&&(!this.properties["chart.outofbounds"]||b==null||g==null)){if(RGraph.isOld()&&b==null){}else{this.context.moveTo(l[e][0],l[e][1])}d=false}else{if(this.properties["chart.stepped"]&&e>0){this.context.lineTo(l[e][0],l[e-1][1])}this.context.lineTo(l[e][0],l[e][1]);d=false}}if(this.properties["chart.colors.alternate"]&&typeof(c)=="object"&&c[0]&&c[1]){for(var e=1;e<h;++e){var j=l[e-1][0];var g=l[e-1][1];if(g!=null&&l[e][1]!=null){this.context.beginPath();this.context.strokeStyle=c[l[e][1]<g?0:1];this.context.lineWidth=this.properties["chart.linewidth"];this.context.moveTo(j,g);this.context.lineTo(l[e][0],l[e][1]);this.context.stroke()}}}};RGraph.Line.prototype.DrawIEShadow=function(e,c){var b=this.properties["chart.shadow.offsetx"];var a=this.properties["chart.shadow.offsety"];this.context.lineWidth=this.properties["chart.linewidth"];this.context.strokeStyle=c;this.context.beginPath();for(var d=0;d<e.length;++d){if(d==0){this.context.moveTo(e[d][0]+b,e[d][1]+a)}else{this.context.lineTo(e[d][0]+b,e[d][1]+a)}}this.context.stroke()};RGraph.Line.prototype.DrawBackdrop=function(d,a){var c=this.properties["chart.backdrop.size"];this.context.lineWidth=c;this.context.globalAlpha=this.properties["chart.backdrop.alpha"];this.context.strokeStyle=a;this.context.lineJoin="miter";this.context.beginPath();this.context.moveTo(d[0][0],d[0][1]);for(var b=1;b<d.length;++b){this.context.lineTo(d[b][0],d[b][1])}this.context.stroke();this.context.globalAlpha=1;this.context.lineJoin="round";RGraph.NoShadow(this)};RGraph.Line.prototype.GetLineWidth=function(a){var b=this.properties["chart.linewidth"];if(typeof(b)=="number"){return b}else{if(typeof(b)=="object"){if(b[a]){return b[a]}else{return b[0]}alert("[LINE] Error! chart.linewidth should be a single number or an array of one or more numbers")}}};RGraph.Line.prototype.getShape=RGraph.Line.prototype.getPoint=function(k){var b=k.target;var g=this;var a=g.context;var j=RGraph.getMouseXY(k);var d=j[0];var c=j[1];if(arguments[1]){g=arguments[1]}for(var h=0;h<g.coords.length;++h){var m=g.coords[h][0];var l=g.coords[h][1];if(d<=(m+g.properties["chart.tooltips.hotspot.size"])&&d>=(m-g.properties["chart.tooltips.hotspot.size"])&&c<=(l+g.properties["chart.tooltips.hotspot.size"])&&c>=(l-g.properties["chart.tooltips.hotspot.size"])){if(RGraph.parseTooltipText){var o=RGraph.parseTooltipText(this.properties["chart.tooltips"],h)}var f=0;var n=h;while((n+1)>this.data[f].length){n-=this.data[f].length;f++}return{0:g,1:m,2:l,3:h,object:g,x:m,y:l,index:h,tooltip:o,dataset:f,index_adjusted:n}}else{if(g.properties["chart.tooltips.hotspot.xonly"]==true&&d<=(m+g.properties["chart.tooltips.hotspot.size"])&&d>=(m-g.properties["chart.tooltips.hotspot.size"])){var o=RGraph.parseTooltipText(this.properties["chart.tooltips"],h);return{0:g,1:m,2:l,3:h,object:g,x:m,y:l,index:h,tooltip:o}}}}};RGraph.Line.prototype.DrawAboveLabels=function(){var f=this.context;var e=this.properties["chart.labels.above.size"];var c=this.properties["chart.text.font"];var b=this.properties["chart.units.pre"];var a=this.properties["chart.units.post"];f.beginPath();for(var d=0;d<this.coords.length;++d){var g=this.coords[d];RGraph.Text(f,c,e,g[0],g[1]-5-e,RGraph.number_format(this,this.data_arr[d],b,a),"center","center",true,null,"rgba(255, 255, 255, 0.7)")}f.fill()};RGraph.Line.prototype.DrawCurvyLine=function(e,a,d){var c=[];for(var b=0;b<e.length;++b){c.push(e[b][1])}if(this.properties["chart.filled"]){this.context.beginPath();this.context.moveTo(e[0][0],this.canvas.height-this.gutterBottom);this.DrawSpline(this.context,c,a);this.context.lineTo(e[e.length-1][0],this.canvas.height-this.gutterBottom);this.context.fill()}this.context.beginPath();this.DrawSpline(this.context,c,a);this.context.stroke()};RGraph.Line.prototype.getValue=function(b){if(b.length==2){var d=b[0];var c=b[1]}else{var e=RGraph.getMouseXY(b);var d=e[0];var c=e[1]}var g=this;var a=this.properties["chart.xaxispos"];if(c<g.properties["chart.gutter.top"]){return a=="bottom"||a=="center"?this.max:this.min}else{if(c>(g.canvas.height-g.properties["chart.gutter.bottom"])){return a=="bottom"?this.min:this.max}}if(this.properties["chart.xaxispos"]=="center"){var f=(((g.grapharea/2)-(c-g.properties["chart.gutter.top"]))/g.grapharea)*(g.max-g.min);f*=2;f>0?f+=this.min:f-=this.min;return f}else{if(this.properties["chart.xaxispos"]=="top"){var f=((g.grapharea-(c-g.properties["chart.gutter.top"]))/g.grapharea)*(g.max-g.min);f=Math.abs(g.max-f)*-1;return f}else{var f=((g.grapharea-(c-g.properties["chart.gutter.top"]))/g.grapharea)*(g.max-g.min);f+=g.min;return f}}};RGraph.Line.prototype.Highlight=function(a){if(this.properties["chart.tooltips.highlight"]){RGraph.Highlight.Point(this,a)}};RGraph.Line.prototype.getObjectByXY=function(b){var a=RGraph.getMouseXY(b);if((a[0]>this.properties["chart.gutter.left"]-5)&&a[0]<(this.canvas.width-this.properties["chart.gutter.right"]+5)&&a[1]>(this.properties["chart.gutter.top"]-5)&&a[1]<(this.canvas.height-this.properties["chart.gutter.bottom"]+5)){return this}};RGraph.Line.prototype.Adjusting_mousemove=function(c){if(RGraph.Registry.Get("chart.adjusting")&&RGraph.Registry.Get("chart.adjusting").uid==this.uid){var b=Number(this.getValue(c));var a=RGraph.Registry.Get("chart.adjusting.shape");if(a){RGraph.Registry.Set("chart.adjusting.shape",a);this.original_data[a.dataset][a.index_adjusted]=Number(b);RGraph.RedrawCanvas(c.target);RGraph.FireCustomEvent(this,"onadjust")}}};RGraph.Line.prototype.getYCoord=function(b){if(typeof(b)!="number"){return null}var c;var a=this.properties["chart.xaxispos"];if(b>this.max){b=this.max}if(a=="top"){if(b<0){b=Math.abs(b)}c=((b-this.min)/(this.max-this.min))*this.grapharea;if(this.properties["chart.ylabels.invert"]){c=this.grapharea-c}c=c+this.gutterTop}else{if(a=="center"){c=((b-this.min)/(this.max-this.min))*(this.grapharea/2);c=(this.grapharea/2)-c;c+=this.gutterTop}else{if(b<this.min||b>this.max){return null}c=((b-this.min)/(this.max-this.min))*this.grapharea;if(this.properties["chart.ylabels.invert"]){c=this.grapharea-c}c=this.canvas.height-this.gutterBottom-c}}return c};RGraph.Line.prototype.positionTooltip=function(d,h,g,l,i){var k=d.coords[l.__index__][0];var j=d.coords[l.__index__][1];var e=RGraph.getCanvasXY(d.canvas);var f=d.properties["chart.gutter.left"];var b=d.properties["chart.gutter.top"];var a=l.offsetWidth;l.style.left=0;l.style.top=parseInt(l.style.top)-9+"px";l.style.overflow="";var c=new Image();c.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAFCAYAAACjKgd3AAAARUlEQVQYV2NkQAN79+797+RkhC4M5+/bd47B2dmZEVkBCgcmgcsgbAaA9GA1BCSBbhAuA/AagmwQPgMIGgIzCD0M0AMMAEFVIAa6UQgcAAAAAElFTkSuQmCC";c.style.position="absolute";c.id="__rgraph_tooltip_pointer__";c.style.top=(l.offsetHeight-2)+"px";l.appendChild(c);if((e[0]+k-(a/2))<10){l.style.left=(e[0]+k-(a*0.2))+"px";c.style.left=((a*0.2)-8.5)+"px"}else{if((e[0]+k+(a/2))>document.body.offsetWidth){l.style.left=e[0]+k-(a*0.8)+"px";c.style.left=((a*0.8)-8.5)+"px"}else{l.style.left=(e[0]+k-(a*0.5))+"px";c.style.left=((a*0.5)-8.5)+"px"}}};RGraph.Line.prototype.DrawSpline=function(a,o,c){var l=a;var d=l.canvas;var r=[];var k=this.properties["chart.gutter.left"];var p=this.properties["chart.gutter.right"];var n=this.properties["chart.hmargin"];var b=(d.width-(k+p)-(2*n))/(o.length-1);this.context.strokeStyle=c;var h=[o[0]];for(var g=0;g<o.length;++g){h.push(o[g])}h.push(o[o.length-1]+(o[o.length-1]-o[o.length-2]));for(var e=1;e<h.length-2;++e){for(var q=0;q<10;++q){var f=m(q/10,h[e-1],h[e],h[e+1],h[e+2]);r.push(((e-1)*b)+(q*(b/10))+k+n);l.lineTo(r[r.length-1],f)}}l.lineTo(((e-1)*b)+k+n,h[e]);function m(s,j,i,v,u){return 0.5*((2*i)+((0-j)+v)*s+((2*j-(5*i)+(4*v)-u)*(s*s)+((0-j)+(3*i)-(3*v)+u)*(s*s*s)))}};RGraph.Line.prototype.parseColors=function(){for(var b=0;b<this.properties["chart.colors"].length;++b){if(typeof(this.properties["chart.colors"][b])=="object"&&this.properties["chart.colors"][b][0]&&this.properties["chart.colors"][b][1]){this.properties["chart.colors"][b][0]=this.parseSingleColorForGradient(this.properties["chart.colors"][b][0]);this.properties["chart.colors"][b][1]=this.parseSingleColorForGradient(this.properties["chart.colors"][b][1])}else{this.properties["chart.colors"][b]=this.parseSingleColorForGradient(this.properties["chart.colors"][b])}}if(this.properties["chart.fillstyle"]){if(typeof(this.properties["chart.fillstyle"])=="string"){this.properties["chart.fillstyle"]=this.parseSingleColorForGradient(this.properties["chart.fillstyle"],"vertical")}else{for(var b=0;b<this.properties["chart.fillstyle"].length;++b){this.properties["chart.fillstyle"][b]=this.parseSingleColorForGradient(this.properties["chart.fillstyle"][b],"vertical")}}}if(!RGraph.is_null(this.properties["chart.key.colors"])){for(var b=0;b<this.properties["chart.key.colors"].length;++b){this.properties["chart.key.colors"][b]=this.parseSingleColorForGradient(this.properties["chart.key.colors"][b])}}var a=["chart.background.barcolor1","chart.background.barcolor2","chart.background.grid.color","chart.text.color","chart.crosshairs.color","chart.annotate.color","chart.title.color","chart.title.yaxis.color","chart.key.background","chart.axis.color","chart.highlight.fill"];for(var b=0;b<a.length;++b){this.properties[a[b]]=this.parseSingleColorForGradient(this.properties[a[b]])}};RGraph.Line.prototype.parseSingleColorForGradient=function(a){var d=this.canvas;var e=this.context;if(!a||typeof(a)!="string"){return a}var c=typeof(arguments[1])=="string"?arguments[1]:"horizontal";if(a.match(/^gradient\((.*)\)$/i)){var g=RegExp.$1.split(":");if(c=="horizontal"){var h=e.createLinearGradient(0,0,d.width,0)}else{var h=e.createLinearGradient(0,0,0,d.height)}var f=1/(g.length-1);h.addColorStop(0,RGraph.trim(g[0]));for(var b=1;b<g.length;++b){h.addColorStop(b*f,RGraph.trim(g[b]))}}return h?h:a};RGraph.Line.prototype.SetShadow=function(a){if(this.properties["chart.shadow"]){var b=this.properties["chart.shadow.color"];if(typeof(b)=="object"&&b[a-1]){this.context.shadowColor=b[a]}else{if(typeof(b)=="object"){this.context.shadowColor=b[0]}else{if(typeof(b)=="string"){this.context.shadowColor=b}}}this.context.shadowBlur=this.properties["chart.shadow.blur"];this.context.shadowOffsetX=this.properties["chart.shadow.offsetx"];this.context.shadowOffsetY=this.properties["chart.shadow.offsety"]}};