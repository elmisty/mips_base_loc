<%#
LuCI - Lua Configuration Interface
Copyright 2008 Steven Barth <steven@midlink.org>
Copyright 2008 Jo-Philipp Wich <xm@leipzig.freifunk.net>

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

	http://www.apache.org/licenses/LICENSE-2.0

$Id: header.htm 4891 2009-06-22 10:23:21Z jow $

-%>
<%
require("luci.sys")
require("luci.i18n").loadc("default")
local i18n = require("luci.i18n")
require("luci.http").prepare_content("text/html")
uci = require("luci.model.uci").cursor()
local lang = uci:get("system","main","language")
local sys_op_mode = uci:get("system","main","system_mode")
i18n.load("admin-core",lang)
i18n.setlanguage(lang)
local lanDev, wlanDev 
-%>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<title>.::<%:welcome_to_nbg6616%>::.</title>
<script type="text/javascript" src="<%=media%>/easy/js/jquery-1.2.6.js"></script>
<script type="text/javascript" src="<%=media%>/js/networkmap.js"></script>
<script type="text/javascript" src="<%=media%>/easy/js/jquery.jcontext.1.0.js"></script>
<script type="text/javascript" src="<%=media%>/js/DST.js" ></script>
<link href="<%=media%>/css/brick.css" rel="stylesheet" type="text/css" />

<style type="text/css">
.devInfo {
	font-size: 11px;
	display:none;
	text-align: center;
	height:42px;
	margin-top: 3px; width: 90px; 
	color: rgb(255, 255, 255);
	position:relative; border:1px #fff solid; background:#000; padding:10px; _padding:3px 0px 5px 12px; 
	left: -12px;
	font-weight:bold;
	text-decoration:none;
	z-index:20001;	
}	

.stainfo_01 {
	color:#FFFFFF;
	text-decoration:none;
}	

.parental {
	color:#FFFFFF;
	text-decoration:none;
}	

.blocking {
	color:#FFFFFF;
	text-decoration:none;
}

</style>

<script   language="javascript"> 
var lan_mac;
var lan_ip;
var lan_name;
var lan_type;
var lan_os_type;
var wlan_mac;
var wlan_ip;
var wlan_name;
var wlan_type;
var wlan_os_type;
var current_ethernet_start_index = 0;
var current_wireless_start_index = 0;
var showmax = 4;  

function sleep( seconds ) {
	var timer = new Date();
	var time = timer.getTime();
	do
		timer = new Date();
	while( (timer.getTime() - time) < (seconds * 1000) );
}

function   loadFile(){ 
	var frame = document.getElementById("contenthtml");
	var loading = document.getElementById("load");
	frame.onreadystatechange = function(){
		if( this.readyState == "complete" ) {
			loading.style.display="none";
		}
	}
}

function stateChangeIE(_frame)
{ 
	if (_frame.readyState=="complete")//state: loading ,interactive,   complete
	{
		var loader = document.getElementById("load"); 
		loader.innerHTML      = "";    
		loader.style.display = "none";  
		_frame.style.visibility = "visible";   
	}   
}
	
function stateChangeFirefox(_frame)
{ 
	var loader = document.getElementById("load"); 
	loader.innerHTML      = "";    
	loader.style.display = "none";  
	_frame.style.visibility = "visible";   
}

function MM_findObj(n, d) { //v4.01
  var p,i,x;  if(!d) d=document; if((p=n.indexOf("?"))>0&&parent.frames.length) {
    d=parent.frames[n.substring(p+1)].document; n=n.substring(0,p);}
  if(!(x=d[n])&&d.all) x=d.all[n]; for (i=0;!x&&i<d.forms.length;i++) x=d.forms[i][n];
  for(i=0;!x&&d.layers&&i<d.layers.length;i++) x=MM_findObj(n,d.layers[i].document);
  if(!x && d.getElementById) x=d.getElementById(n); return x;
}

function MM_showHideLayers() { //v6.0
  var i,p,v,obj,args=MM_showHideLayers.arguments;
  for (i=0; i<(args.length-2); i+=3) if ((obj=MM_findObj(args[i]))!=null) { v=args[i+2];
    if (obj.style) { obj=obj.style; v=(v=='show')?'visible':(v=='hide')?'hidden':v; }
    obj.visibility=v; }
}
//-->
var easy_job_setting=0;
var button_status=new Array(6);
<%
	wifi_select = uci:get("system","main","power_saving_select")
	if wifi_select == "2.4G" then
		cfg = "wifi_schedule"
	else
		cfg = "wifi_schedule5G"
	end
	
	local schEnable = 0
	if uci:get(cfg,"wlan","enabled") == "enable" then
		schEnable = 1
	end
%>
<%
game_enable=uci:get("qos","general","game_enable")
parental_enable=uci:get("parental","general","enable")
qos_enable=uci:get("qos","general","enable")
dos_enable=uci:get("firewall","general","dos_enable")
wifi_disabled=uci:get("wireless","ath0","disabled")

if sys_op_mode == "2" or sys_op_mode == "3" then
	game_enable=nil
	parental_enable=nil
	qos_enable=nil
	dos_enable=nil
elseif sys_op_mode == "4" then
	wifi_disabled=nil
	schEnable=nil
end
%>
<%if game_enable then%>button_status[0]=<%=uci:get("qos","general","game_enable")%><%else%>button_status[0]=0<%end%>
<%if schEnable then%>button_status[1]=<%=schEnable%><%else%>button_status[1]=0<%end%>
<%if parental_enable then%>button_status[2]=<%=uci:get("parental","general","enable")%><%else%>button_status[2]=0<%end%>
<%if qos_enable then%>button_status[3]=<%=uci:get("qos","general","enable")%><%else%>button_status[3]=0<%end%>
<%if dos_enable then%>button_status[4]=<%=uci:get("firewall","general","dos_enable")%><%else%>button_status[4]=0<%end%>
<%if wifi_disabled then%>button_status[5]=<%=uci:get("wireless","ath0","disabled")%><%else%>button_status[5]=0<%end%>

function show_map() {
	var j;
	<% 
	   lanDev = luci.sys.lan_topology()
	   
	   if lanDev then
	-%>
			lan_mac = new Array(<%=#lanDev%>);
			lan_ip = new Array(<%=#lanDev%>);
			lan_name = new Array(<%=#lanDev%>);
			lan_type = new Array(<%=#lanDev%>);
			lan_os_type = new Array(<%=#lanDev%>);			
			parental_flag = new Array(<%=#lanDev%>);
			lan_block_flag = new Array(<%=#lanDev%>);
	<%
			for i=1, #lanDev do
	-%>
				lan_mac[<%=i%> - 1] = '<%=lanDev[i].mac%>';
				lan_ip[<%=i%> - 1] = '<%=lanDev[i].ip4addr%>';
				lan_name[<%=i%> - 1] = '<%=lanDev[i].hostName%>';
				lan_type[<%=i%> - 1] = <%=lanDev[i].lanType%>;
				lan_os_type[<%=i%> - 1] = '<%=lanDev[i].osType%>';
				parental_flag[<%=i%> - 1] = '<%=lanDev[i].parentalFlag%>';
				lan_block_flag[<%=i%> - 1] = '<%=lanDev[i].block%>';
	<%
			end	
	-%>
	
		if (current_ethernet_start_index > 0)
				document.getElementById('ethernet_right_arrow').style.visibility='visible';
		else		
				document.getElementById('ethernet_right_arrow').style.visibility='hidden';
		for (i=0; i<showmax; i++)
		{
			j = i + current_ethernet_start_index;
			if (j < <%=#lanDev%>)
			{
				if (parental_flag[j]==1 && lan_block_flag[j]==1)
				{
					if (lan_type[j]==0)
						parent.document.getElementById('ethernet_img'+(i+1)).style.backgroundImage='url(/luci-static/zyxel/easy/images/network/pb_pc.png)';
					if (lan_type[j]==1)
						parent.document.getElementById('ethernet_img'+(i+1)).style.backgroundImage='url(/luci-static/zyxel/easy/images/network/pb_ap.png)';
					if (lan_type[j]==2)
						parent.document.getElementById('ethernet_img'+(i+1)).style.backgroundImage='url(/luci-static/zyxel/easy/images/network/pb_game.png)';
					if (lan_type[j]==4)
						parent.document.getElementById('ethernet_img'+(i+1)).style.backgroundImage='url(/luci-static/zyxel/easy/images/network/pb_ap.png)';
					if (lan_type[j]==9)
						parent.document.getElementById('ethernet_img'+(i+1)).style.backgroundImage='url(/luci-static/zyxel/easy/images/network/pb_ap.png)';
				}
				else if (parental_flag[j]==1 && lan_block_flag[j]==0)
				{
					if (lan_type[j]==0)
						parent.document.getElementById('ethernet_img'+(i+1)).style.backgroundImage='url(/luci-static/zyxel/easy/images/network/p_pc.png)';
					if (lan_type[j]==1)
						parent.document.getElementById('ethernet_img'+(i+1)).style.backgroundImage='url(/luci-static/zyxel/easy/images/network/p_ap.png)';
					if (lan_type[j]==2)
						parent.document.getElementById('ethernet_img'+(i+1)).style.backgroundImage='url(/luci-static/zyxel/easy/images/network/p_game.png)';
					if (lan_type[j]==4)
						parent.document.getElementById('ethernet_img'+(i+1)).style.backgroundImage='url(/luci-static/zyxel/easy/images/network/p_ap.png)';
					if (lan_type[j]==9)
						parent.document.getElementById('ethernet_img'+(i+1)).style.backgroundImage='url(/luci-static/zyxel/easy/images/network/p_ap.png)';
				}
				else if (parental_flag[j]==0 && lan_block_flag[j]==1)
				{
					if (lan_type[j]==0)
						parent.document.getElementById('ethernet_img'+(i+1)).style.backgroundImage='url(/luci-static/zyxel/easy/images/network/b_pc.png)';
					if (lan_type[j]==1)
						parent.document.getElementById('ethernet_img'+(i+1)).style.backgroundImage='url(/luci-static/zyxel/easy/images/network/b_ap.png)';
					if (lan_type[j]==2)
						parent.document.getElementById('ethernet_img'+(i+1)).style.backgroundImage='url(/luci-static/zyxel/easy/images/network/b_game.png)';
					if (lan_type[j]==4)
						parent.document.getElementById('ethernet_img'+(i+1)).style.backgroundImage='url(/luci-static/zyxel/easy/images/network/b_ap.png)';
					if (lan_type[j]==9)
						parent.document.getElementById('ethernet_img'+(i+1)).style.backgroundImage='url(/luci-static/zyxel/easy/images/network/b_ap.png)';
				}
				else
				{
					if (lan_type[j]==0)
						parent.document.getElementById('ethernet_img'+(i+1)).style.backgroundImage='url(/luci-static/zyxel/easy/images/network/i_pc.gif)';
					if (lan_type[j]==1)
						parent.document.getElementById('ethernet_img'+(i+1)).style.backgroundImage='url(/luci-static/zyxel/easy/images/network/i_ap.gif)';
					if (lan_type[j]==2)
						parent.document.getElementById('ethernet_img'+(i+1)).style.backgroundImage='url(/luci-static/zyxel/easy/images/network/i_game.gif)';
					if (lan_type[j]==4)
						parent.document.getElementById('ethernet_img'+(i+1)).style.backgroundImage='url(/luci-static/zyxel/easy/images/network/i_ap.gif)';
					if (lan_type[j]==9)
						parent.document.getElementById('ethernet_img'+(i+1)).style.backgroundImage='url(/luci-static/zyxel/easy/images/network/i_ap.gif)';
				}	
				if (lan_name[j]!="")	
				{
					if(lan_name[j].length > 7)
						parent.document.getElementById('ethernet_name'+(i+1)).innerHTML=lan_name[j].substr(0,6)+'...';
					else
						parent.document.getElementById('ethernet_name'+(i+1)).innerHTML=lan_name[j];
					
					parent.document.getElementById('ethernet_name'+(i+1)).title=lan_name[j];
				}
				else
				{	
					if(lan_ip[j].length > 7)
						parent.document.getElementById('ethernet_name'+(i+1)).innerHTML=lan_ip[j].substr(0,6)+'...';
					else
						parent.document.getElementById('ethernet_name'+(i+1)).innerHTML=lan_ip[j];
					
					parent.document.getElementById('ethernet_name'+(i+1)).title=lan_ip[j];
				}
				parent.document.getElementById('ethernet_img'+(i+1)).style.visibility='visible';
				parent.document.getElementById('ethernet_name'+(i+1)).style.visibility='visible';
			}
		}
		if (current_ethernet_start_index + showmax < <%=#lanDev%>)
				parent.document.getElementById('ethernet_left_arrow').style.visibility='visible';
		else		
				parent.document.getElementById('ethernet_left_arrow').style.visibility='hidden';
	<%
	 	end
	-%>
	
	<% 
	   wlanDev = luci.sys.wlan_topology()
	   
	   if wlanDev then
	-%>
			wlan_mac = new Array(<%=#wlanDev%>);
			wlan_ip = new Array(<%=#wlanDev%>);
			wlan_name = new Array(<%=#wlanDev%>);
			wlan_type = new Array(<%=#wlanDev%>);
			wlan_os_type = new Array(<%=#wlanDev%>);
			wlan_show_type = new Array(<%=#wlanDev%>);
			wlan_block_flag = new Array(<%=#wlanDev%>);
			parental_flag = new Array(<%=#wlanDev%>);
	<%
			for i=1, #wlanDev do
	-%>
				wlan_mac[<%=i%> - 1] = '<%=wlanDev[i].mac%>';
				wlan_ip[<%=i%> - 1] = '<%=wlanDev[i].ip4addr%>';
				wlan_name[<%=i%> - 1] = '<%=wlanDev[i].hostName%>';
				wlan_type[<%=i%> - 1] = <%=wlanDev[i].wlanType%>;
				wlan_os_type[<%=i%> - 1] = '<%=wlanDev[i].osType%>';
				wlan_show_type[<%=i%> - 1] = '<%=wlanDev[i].showType%>';
				wlan_block_flag[<%=i%> - 1] = '<%=wlanDev[i].block%>';
				parental_flag[<%=i%> - 1] = '<%=wlanDev[i].parentalFlag%>';
	<%
			end	
	-%>
	
		if (current_wireless_start_index > 0)
				document.getElementById('ethernet_right_arrow2').style.visibility='visible';
		else		
				document.getElementById('ethernet_right_arrow2').style.visibility='hidden';
		for (i=0; i<showmax; i++)
		{
			j = i + current_wireless_start_index;
			if (j < <%=#wlanDev%>)
			{
			
				if (parental_flag[j]==1 && wlan_block_flag[j]==1)
				{
					if (wlan_type[j]==0)
						parent.document.getElementById('ethernet2_img'+(i+1)).style.backgroundImage='url(/luci-static/zyxel/easy/images/network/pb_nb.png)';
					if (wlan_type[j]==1){
						/*if (wlan_show_type[j]=="iOS"){
							parent.document.getElementById('ethernet2_img'+(i+1)).style.backgroundImage='url(/luci-static/zyxel/easy/images/network/pb_mobile.png)';						
						}
						else{ */
							parent.document.getElementById('ethernet2_img'+(i+1)).style.backgroundImage='url(/luci-static/zyxel/easy/images/network/pb_nb.png)';
						//}
					}	
					if (wlan_type[j]==2)
						parent.document.getElementById('ethernet2_img'+(i+1)).style.backgroundImage='url(/luci-static/zyxel/easy/images/network/pb_game.png)';
					if (wlan_type[j]==4)
						parent.document.getElementById('ethernet2_img'+(i+1)).style.backgroundImage='url(/luci-static/zyxel/easy/images/network/pb_ap.png)';
					if (wlan_type[j]==9)
						parent.document.getElementById('ethernet2_img'+(i+1)).style.backgroundImage='url(/luci-static/zyxel/easy/images/network/pb_ap.png)';
				}
				else if (parental_flag[j]==1 && wlan_block_flag[j]==0)
				{
					if (wlan_type[j]==0)
						parent.document.getElementById('ethernet2_img'+(i+1)).style.backgroundImage='url(/luci-static/zyxel/easy/images/network/p_nb.png)';
					if (wlan_type[j]==1)
						parent.document.getElementById('ethernet2_img'+(i+1)).style.backgroundImage='url(/luci-static/zyxel/easy/images/network/p_nb.png)';						
					if (wlan_type[j]==2)
						parent.document.getElementById('ethernet2_img'+(i+1)).style.backgroundImage='url(/luci-static/zyxel/easy/images/network/p_game.png)';
					if (wlan_type[j]==4)
						parent.document.getElementById('ethernet2_img'+(i+1)).style.backgroundImage='url(/luci-static/zyxel/easy/images/network/p_ap.png)';
					if (wlan_type[j]==9)
						parent.document.getElementById('ethernet2_img'+(i+1)).style.backgroundImage='url(/luci-static/zyxel/easy/images/network/p_ap.png)';
				}
				else if (parental_flag[j]==0 && wlan_block_flag[j]==1)
				{
					if (wlan_type[j]==0)
						parent.document.getElementById('ethernet2_img'+(i+1)).style.backgroundImage='url(/luci-static/zyxel/easy/images/network/b_nb.png)';
					if (wlan_type[j]==1)
						parent.document.getElementById('ethernet2_img'+(i+1)).style.backgroundImage='url(/luci-static/zyxel/easy/images/network/b_nb.png)';						
					if (wlan_type[j]==2)
						parent.document.getElementById('ethernet2_img'+(i+1)).style.backgroundImage='url(/luci-static/zyxel/easy/images/network/b_game.png)';
					if (wlan_type[j]==4)
						parent.document.getElementById('ethernet2_img'+(i+1)).style.backgroundImage='url(/luci-static/zyxel/easy/images/network/b_ap.png)';
					if (wlan_type[j]==9)
						parent.document.getElementById('ethernet2_img'+(i+1)).style.backgroundImage='url(/luci-static/zyxel/easy/images/network/b_ap.png)';
				}
				else
				{
					if (wlan_type[j]==0)
						parent.document.getElementById('ethernet2_img'+(i+1)).style.backgroundImage='url(/luci-static/zyxel/easy/images/network/i_nb.gif)';
					if (wlan_type[j]==1){
						/*if (wlan_show_type[j]=="iOS"){
							parent.document.getElementById('ethernet2_img'+(i+1)).style.backgroundImage='url(/luci-static/zyxel/easy/images/network/i_mobile.gif)';						
						}
						else{*/
							parent.document.getElementById('ethernet2_img'+(i+1)).style.backgroundImage='url(/luci-static/zyxel/easy/images/network/i_nb.gif)';
						//}
					}	
					if (wlan_type[j]==2)
						parent.document.getElementById('ethernet2_img'+(i+1)).style.backgroundImage='url(/luci-static/zyxel/easy/images/network/i_game.gif)';
					if (wlan_type[j]==4)
						parent.document.getElementById('ethernet2_img'+(i+1)).style.backgroundImage='url(/luci-static/zyxel/easy/images/network/i_ap.gif)';
					if (wlan_type[j]==9)
						parent.document.getElementById('ethernet2_img'+(i+1)).style.backgroundImage='url(/luci-static/zyxel/easy/images/network/i_ap.gif)';						
				}	
					
				if (wlan_name[j]!="")	
				{
					if(wlan_name[j].length > 7)
						parent.document.getElementById('ethernet2_name'+(i+1)).innerHTML=wlan_name[j].substr(0,6)+'...';
					else
						parent.document.getElementById('ethernet2_name'+(i+1)).innerHTML=wlan_name[j];
					
					parent.document.getElementById('ethernet2_name'+(i+1)).title=wlan_name[j];
				}
				else
				{	
					if(wlan_ip[j].length > 7)
						parent.document.getElementById('ethernet2_name'+(i+1)).innerHTML=wlan_ip[j].substr(0,6)+'...';
					else
						parent.document.getElementById('ethernet2_name'+(i+1)).innerHTML=wlan_ip[j];
					
					parent.document.getElementById('ethernet2_name'+(i+1)).title=wlan_ip[j];
				}
				parent.document.getElementById('ethernet2_img'+(i+1)).style.visibility='visible';
				parent.document.getElementById('ethernet2_name'+(i+1)).style.visibility='visible';
			}
		}
		if (current_wireless_start_index + showmax < <%=#wlanDev%>)
				parent.document.getElementById('ethernet_left_arrow2').style.visibility='visible';
		else		
				parent.document.getElementById('ethernet_left_arrow2').style.visibility='hidden';
	<%
	 	end
	-%>
	
	document.getElementById('vline_id').style.visibility='hidden';
	document.getElementById('vline_error_id').style.visibility='hidden';
	document.getElementById('hline4_id').style.visibility='hidden';
	document.getElementById('hline4_error_id').style.visibility='hidden';
	document.getElementById('error1').style.visibility='hidden';
	document.getElementById('error2').style.visibility='hidden';
	<%
		statusInternetcheck = luci.sys.internet_check()
		if statusInternetcheck then
	-%>
			document.getElementById('vline_id').style.visibility='visible';
			document.getElementById('hline4_id').style.visibility='visible';
	<%	
		else
	-%>
			document.getElementById('vline_error_id').style.visibility='visible';
			document.getElementById('hline4_error_id').style.visibility='visible';
			document.getElementById('error1').style.visibility='visible';
			document.getElementById('error2').style.visibility='visible';
	<%end%>  
}

var objXMLHTTP;

function handleStateChange(){
	if (objXMLHTTP.readyState == 4) { 
     	if (objXMLHTTP.status == 200) {
     		var ret = objXMLHTTP.responseText;
	     	self.location.href = '<%=controller%>/easy/networkmap';
     	}
   }
}

function scan_network() {
	<% 
		local fd1, msg1, err1 = io.open("/var/lltd_num_lan", "r")
		if err1 then
	-%>
			 
	if (window.XMLHttpRequest)  {
		objXMLHTTP=new XMLHttpRequest();
	}// code for IE
	else if (window.ActiveXObject)  {
		objXMLHTTP=new ActiveXObject("Microsoft.XMLHTTP");
	}
			
	objXMLHTTP.open("GET","<%=controller%>/easy/scannetwork",true);
	/*let IE refresh page */
	objXMLHTTP.setRequestHeader("If-Modified-Since",new Date(0));
	objXMLHTTP.onreadystatechange = handleStateChange;
	objXMLHTTP.setRequestHeader("Content-Type", "text/plain");	    
	objXMLHTTP.send(null);
		 	
	<%
		else
			fd1:close()
	-%>
			document.getElementById("popup_scan_network").style.visibility='hidden';
	<%
		end
	-%>
	
	show_map();
}

function item_connect(interface, index) {
	var i=0;
	if (interface==1)//ethernet
	{
		i=current_ethernet_start_index+index-1;
		if (lan_type[i]==0)//PC
			window.open("\\\\"+lan_ip[i]);
		if (lan_type[i]==1)//Device
			window.open("http://"+lan_ip[i]);
		if (lan_type[i]==4)//AP
			window.open("http://"+lan_ip[i]);
		if (lan_type[i]==9)//Repeater
			window.open("http://"+lan_ip[i]);
	}

	if (interface==2)//wireless
	{
		i=current_wireless_start_index+index-1;
		if (wlan_type[i]==0)//PC
			window.open("\\\\"+wlan_ip[i]);
		if (wlan_type[i]==1)//Device
			window.open("http://"+wlan_ip[i]);
		if (wlan_type[i]==4)//AP
			window.open("http://"+wlan_ip[i]);
		if (wlan_type[i]==9)//Repeater
			window.open("http://"+wlan_ip[i]);
	}

}

function item_show_info(interface, index)
{
	var i=0;
	var type_str="";
	if (interface==1)//ethernet
	{
		i=current_ethernet_start_index+index-1;
		
		if (lan_type[i]==0)
			type_str="PC";
		if (lan_type[i]==1)
			type_str="Device";
		if (lan_type[i]==2)
			type_str="XBox";
		if (lan_type[i]==4)
			type_str="AP";
		if (lan_type[i]==9)
			type_str="Repeater";	
		alert("Name: "+lan_name[i]+"\nMAC Address: "+lan_mac[i]+"\nIP Address: "+lan_ip[i]+"\nOS Type: "+lan_os_type[i]+"\n");
	}

	if (interface==2)//wireless
	{
		i=current_wireless_start_index+index-1;
		if (wlan_type[i]==0)
			type_str="PC";
		if (wlan_type[i]==1)
			type_str="Device";
		if (wlan_type[i]==2)
			type_str="XBox";
		if (wlan_type[i]==4)
			type_str="AP";
		if (wlan_type[i]==9)
			type_str="Repeater";	
		alert("Name: "+wlan_name[i]+"\nMAC Address: "+wlan_mac[i]+"\nIP Address: "+wlan_ip[i]+"\nOS Type: "+wlan_os_type[i]+"\n");
	}

}

function easy_set_option(job, mode)
{
//job - 1:Game Engine 2:Power Saving 3:Parental Control 4:Bandwidth MGMT 5:Firewall 6:Wireless Security
//mode - 0:OFF 1:ON
	if (button_status[job-1]!=mode)
	{
		easy_job_setting=1;
		document.easy_set_info.easy_set_button_job.value=job;
		document.easy_set_info.easy_set_button_mode.value=mode;
		document.easy_set_info.submit();
	}
}

var flag_timeout = 0;
var flag_click   = 0;

function logout_set()
{
 flag_timeout = 1;
}

function logout_check()
{
 if (flag_timeout == 1 && flag_click == 0)
     top.window.location.href="/";  // return to index.htm
 else 
     flag_click = 0;
}

function time_out_counter()
{
 var time_out = document.ROOT.timeout.value * 1000;  // setTimeout function using 1/1000 second
 if(time_out > 0){
 	setTimeout("logout_set();",time_out);
 }
}

function on_click()
{
 flag_click = 1;  //Click "Status" or "Network Map"
}

function Game_Engine(){
 var e = document.getElementById("b-title");
 e.innerHTML = "<%:net_map_game_engine%>";
}

function Power_Saving(){
 var e = document.getElementById("b-title");
 e.innerHTML = "<%:net_map_pwsaving%>";
}

function Content_Filter(){
 var e = document.getElementById("b-title");
 e.innerHTML = "Parental Control";
}

function Bandwidth_MGMT(){
 var e = document.getElementById("b-title");
 e.innerHTML = "<%:net_map_mgmt%>";
}

function Firewall(){
 var e = document.getElementById("b-title");
 e.innerHTML = "<%:net_map_firewall%>";
}

function Wireless_Security(){
 var e = document.getElementById("b-title");
 e.innerHTML = "<%:net_map_wireless_security%>";
}

function show_hidden_page(){	
	document.getElementById("popup_getinfo").style.visibility='visible';
}

</script>   
</head>
<body onload="scan_network();time_out_counter();" onClick="logout_check();">
<form name="ROOT">
<% local Timer = uci:get("luci","sauth","sessiontime") %>
<input name="timeout" type="hidden" value="<%=Timer%>">
<div id="popup" style="display:none;"></div>
<div id="wrapper">
<div class="top_image"></div>
<div style="position:absolute;background:url(<%=media%>/easy/images/frame_left.gif);width:9px;height:501px;z-index: 1;top: 0px;"></div>
<div style="position:absolute;background:url(<%=media%>/easy/images/frame_right.gif);width:9px;height:501px;right:-2px;z-index: 1;top: 0px;"></div>
<div class="copyright_note" id="copyright_note">Copyright Â© 2014 ZyXEL Communications Corp. All rights reserved. ZyXEL, ZyXEL logo are registered 
trademarks of ZyXEL Communications Corp. All other brands, product names, or trademarks mentioned are the 
property of their respective owners. All specifications are subject to change without notice.</div>
<div class="in_bg" id="in_bg"></div>
<div class="in_line" id="topline" ></div>
<div class="frame_left"></div>
<div class="frame_right"></div>
<div class="unit_myrouter"></div>
<div class="unit_title" id="unitword">NBG6616</div>
<!-- Modify  07/01"-->
<div class="hotkey" id="Hotkey">
  <table  border="0" align="right" cellpadding="0" cellspacing="2">
    <tr>
      <td><div class="home"><a href="<%=controller%>/easy/logout"><%:net_map_home%></a></div ></td>
      <td><div class="expert"><a href="<%=controller%>/expert/status"><%:net_map_expert%></a></div></td>
      <td><div class="logout"><a href="<%=controller%>/easy/logout"><%:net_map_logout%></a></div></td>
    </tr>
  </table>
</div>
<!-- Modify  07/01"-->
<div class="crop">
<div class="widearea">
<div id="position">
<div class="i_status" id="i_status"><a href="#" onClick="on_click();"><%:net_map_status%></a></div>
<div id="left_arrow"><a href="javascript: current_ethernet_start_index++;show_map();" id="ethernet_left_arrow"></a></div>
<div id="right_arrow"><a href="javascript: current_ethernet_start_index--;show_map();" id="ethernet_right_arrow"></a></div>
<div id="left_arrow2"><a href="javascript: current_wireless_start_index++;show_map();" id="ethernet_left_arrow2"></a></div>
<div id="right_arrow2"><a href="javascript: current_wireless_start_index--;show_map();" id="ethernet_right_arrow2"></a></div>
<div class="popup"><ul><li class="popuptop"></li><li class="popupmain"><a href="<%=controller%>/easy/eaZy123" target="_parent">- eaZy123 </a></li>
<li class="popupdown"></li></ul></div>
<div class="earth"></div>
<div class="housing" id="housing"><ul><li class="img"><a href="#"></a></li><li class="word_button">
  <div align="center"><a href="#">NBG6616</a></div>
</li >
</ul></div>

<div class="refresh_button" id="refresh_button">
	<ul>
		<li class="word_button">
			<div align="center"><a href="<%=controller%>/easy/networkmap?refresh=1"><%:Refresh%></a></div>
		</li >
	</ul>
</div>

<div class="modem"><ul><li class="img"><a></a></li><li class="word_button"><div align="center"><a href="#"><%:net_map_modem%></a></div></li ></ul></div>
<!-- Ethernet -->
<div class="ethernet">
	<div  id="nb">
		<ul>
			<li class="img"><a id="ethernet_img1"></a></li>
			<li class="word_button">
				<div align="center"><a title="Carol PC Work" id="ethernet_name1">Carol PC.. </a></div>
			</li >
		</ul>
		<div class="devInfo">
			<ul>
				<li><a class="stainfo_01" target="contenthtml" href="#" onClick="show_hidden_page();">Info</a></li>
				<li><a id="blocking_01" class="blocking" href="#" >Block</a></li>
				<li><a class="parental" target="contenthtml" href="#" onClick="Content_Filter();">Parental</a></li>
			</ul>
		</div>
	</div>

	<div id="nb2">
		<ul>
			<li class="img"><a id="ethernet_img2"></a></li>
			<li class="word_button"> 
				<div align="center"><a title="Mike PC" id="ethernet_name2">Mike PC </a></div>
			</li >
		</ul>
		<div class="devInfo">
			<ul>
				<li><a class="stainfo_01" target="contenthtml" href="#" onClick="show_hidden_page();">Info</a></li>
				<li><a id="blocking_02" class="blocking" href="#">Block</a></li>
				<li><a class="parental" target="contenthtml" href="#" onClick="Content_Filter();">Parental</a></li>
			</ul>
		</div>
	</div>
	
	<div id="nb3">
		<ul>
			<li class="img"><a id="ethernet_img3"></a></li>
			<li class="word_button"> 
				<div align="center"><a title="Brad PC" id="ethernet_name3">Brad PC </a></div>
			</li >
		</ul>
		<div class="devInfo">
			<ul>
				<li><a class="stainfo_01" target="contenthtml" href="#" onClick="show_hidden_page();">Info</a></li>
				<li><a id="blocking_03" class="blocking" href="#">Block</a></li>
				<li><a class="parental" target="contenthtml" href="#" onClick="Content_Filter();">Parental</a></li>
			</ul>
		</div>
	</div>	
	
	<div id="nb4">
		<ul>
			<li class="img"><a id="ethernet_img4"></a></li>
			<li class="word_button"> 
				<div align="center"><a title="Howard PC" id="ethernet_name4">Howard PC </a></div>
			</li >
		</ul>
		<div class="devInfo">
			<ul>
				<li><a class="stainfo_01" target="contenthtml" href="#" onClick="show_hidden_page();">Info</a></li>
				<li><a id="blocking_04" class="blocking" href="#">Block</a></li>
				<li><a class="parental" target="contenthtml" href="#" onClick="Content_Filter();">Parental</a></li>
			</ul>
		</div>
	</div>
</div> 
<!-- Ethernet -->

<!-- Wireless -->
<div class="ethernet2">
	<div id="wifi1" title="WiFi"></div>
	<div id="wifi2" title="WiFi"></div>
	<div id="wifi3" title="WiFi"></div>
	<div id="wifi4" title="WiFi"></div>
	<div id="nb">
		<ul>
			<li class="img">
				<a id="ethernet2_img1"></a>
			</li>
			<li class="word_button">
				<div align="center">
					<a  title="WiFi 1 PC" id="ethernet2_name1">WiFi 1 PC </a>
				</div>
			</li >
		</ul>
		<div class="devInfo">
			<ul>
				<li><a class="stainfo_01" target="contenthtml" href="#" onClick="show_hidden_page();">Info</a></li>
				<li><a id="blocking_11" class="blocking" href="#">Block</a></li>
				<li><a class="parental" target="contenthtml" href="#" onClick="Content_Filter();">Parental</a></li>
			</ul>
		</div>
	</div>

	<div id="game2">
		<ul>
			<li class="img">
				<a id="ethernet2_img2"></a>
			</li>
			<li class="word_button"> 
				<div align="center">
					<a title="WiFi 2 Game" id="ethernet2_name2">WiFi 2 Game </a>
				</div>
			</li >
		</ul>
		<div class="devInfo">
			<ul>
				<li><a class="stainfo_01" target="contenthtml" href="#" onClick="show_hidden_page();">Info</a></li>
				<li><a id="blocking_12" class="blocking" href="#">Block</a></li>
				<li><a class="parental" target="contenthtml" href="#" onClick="Content_Filter();">Parental</a></li>
			</ul>
		</div>
	</div>
	
	<div id="ap3">
		<ul>
			<li class="img"><a id="ethernet2_img3"></a></li>
			<li class="word_button"> 
				<div align="center"><a title="WiFi 3 AP Mode" id="ethernet2_name3">WiFi 3 AP... </a></div>
			</li >
		</ul>
		<div class="devInfo">
			<ul>
				<li><a class="stainfo_01" target="contenthtml" href="#" onClick="show_hidden_page();">Info</a></li>
				<li><a id="blocking_13" class="blocking" href="#">Block</a></li>
				<li><a class="parental" target="contenthtml" href="#" onClick="Content_Filter();">Parental</a></li>
			</ul>
		</div>
	</div>
	
	<div id="nb4">
		<ul>
			<li class="img"><a  id="ethernet2_img4"></a></li>
			<li class="word_button">
				<div align="center"><a  title="WiFi 4 PC Mode" id="ethernet2_name4">WiFi 4 PC... </a></div>
			</li >
		</ul>
		<div class="devInfo">
			<ul>
				<li><a class="stainfo_01" target="contenthtml" href="#" onClick="show_hidden_page();">Info</a></li>
				<li><a id="blocking_14" class="blocking" href="#">Block</a></li>
				<li><a class="parental" target="contenthtml" href="#" onClick="Content_Filter();">Parental</a></li>
			</ul>
		</div>
	</div>
</div>
<!-- Wireless -->
<div id="error1"></div>
<div id="error2"></div>
<div style="position:absolute; top:135px; width:50px; color:#999999; left: 216px;"><%:net_map_wired%></div>
<div style="position:absolute; top:317px; width:50px; color:#999999; left: 216px;"><%:net_map_wireless%></div>
<div class="vline" id="vline_id"></div>
<div class="vline_error" id="vline_error_id"></div>
<div class="vline2"></div>
   <div class="vline3"></div>
  <div class="hline"></div>
  <div class="hline2"></div>
    <div class="hline4" id="hline4_id"></div>
	<div class="hline4_error" id="hline4_error_id"></div>
    <div class="hline3"></div>
      </div>
<div id="position2">
	<%
	local wanif = uci:get("network","wan","ifname")
	if not wanif then
		wanif="eth0"
	end
	local wanInfo_cmd = luci.sys.exec("ifconfig '"..wanif.."'")
	local wan_mac = string.match(wanInfo_cmd,"HWaddr (%x+:%x+:%x+:%x+:%x+:%x+)")
	local wanProtocol = uci:get("network","wan","proto")
	local wan_ip=string.match(wanInfo_cmd,"inet addr:(%d+.%d+.%d+.%d+)")
	local wan_Bcast=string.match(wanInfo_cmd,"Bcast:(%d+.%d+.%d+.%d+)")
	local wan_netmask=string.match(wanInfo_cmd,"Mask:(%d+.%d+.%d+.%d+)")
	local wanInfo_cmd2=luci.sys.exec("ifconfig pppoe-wan")
	local wan_ip2=string.match(wanInfo_cmd2,"inet addr:(%d+.%d+.%d+.%d+)")
	local wanInfo_cmd3=luci.sys.exec("ifconfig ppptp-wan")
	local wan_ip3=string.match(wanInfo_cmd3,"inet addr:(%d+.%d+.%d+.%d+)")
	%>

	<div class="map_word">
	  <table width="434" border="0" cellpadding="0" cellspacing="0">
  	    <tr><td class="map_title"> <%:net_map_name%> : </td><td class="map_content">ZyXEL NBG6616</td></tr>
	    <tr><td class="map_title"> <%:net_map_time%> : </td> <td class="map_content"><label id="mtenCurrent_Date"></label>/<label id="mtenCurrent_Time"></label></td> </tr>
	    <tr><td class="map_title"> <%:net_map_wanip%> : </td> <td class="map_content"><%if wanProtocol=="dhcp" or wanProtocol=="static" then%><%=wan_ip%><%elseif wanProtocol=="pppoe" then%><%=wan_ip2%><%else%><%=wan_ip3%><%end%></td></tr>
  	    <tr> <td class="map_title"><%:MAC_Address%> : </td><td class="map_content"><%=wan_mac%></td></tr>
  	    <tr><td class="map_title"><%:fw_version%> : </td><td class="map_content"><%=firmware_version%></td></tr>
	    <% if sys_op_mode ~= "4" then%>
  	    <tr><td colspan="2" class="line_map">&nbsp;</td> </tr>
	    <%
		local ssid_24g = uci:get("wireless","ath0","ssid")
	   	if not ssid_24g then
			local mac_24g=luci.sys.exec("fw_printenv ethaddr | awk -F'=' '{print $2}' |sed 's/\"//g' | sed 's/://g'|cut -c 7-12")
			ssid_24g="ZyXEL" .. mac_24g
		end
	    %>
		<%
		local ssid_5g = uci:get("wireless","ath10","ssid")
	   	if not ssid_5g then
			local mac_5g=luci.sys.exec("cat /tmp/AR71XX_5G.dat | grep MacAddress | awk -F'=' '{print $2}' |sed 's/\"//g' | sed 's/://g'|cut -c 7-12")
			ssid_5g="ZyXEL" .. mac_5g
		end
	    %>
	    <% local Product_Model = uci:get("system","main","product_model") %>
	    <tr><td class="map_title"><%:net_map_wlan24G_name%> : </td><td class="map_content"><%=ssid_24g%></td></tr> 
	    <tr><td class="map_title"><%:security%> : </td><td class="map_content"><%=security_24g%></td></tr>
	    <% if Product_Model == "DUAL_BAND" then %>	
	    <tr><td class="map_title"><%:net_map_wlan5G_name%> : </td><td class="map_content"><%=ssid_5g%></td></tr> 
	    <tr><td class="map_title"><%:security%> : </td><td class="map_content"><%=security_5g%></td></tr>
	    <% end %>
	    <% end %>
	  </table>
	</div>
   <div class="i_map" id="i_map"><a href="#" onClick="on_click();"><%:net_map%></a></div>
</div>
</div>
</div>
 <div class="menu_line" id="menuline" ></div>
 <div class="menu" id="menu" >
   <table width="98%" border="0" align="center" cellpadding="0" cellspacing="0">
     <tr>
       <td><div <% if sys_op_mode == "2" or sys_op_mode == "3" then%> class="gamex"> <%:net_map_game_engine%> <% else %> class="game"><a href="<%=controller%>/easy/game" target="contenthtml" onClick="Game_Engine();"><%:net_map_game_engine%></a> <% end %> </div></td>
       <td rowspan="2"><img src="<%=media%>/easy/images/line.jpg" width="2" height="76" /></td>
       <td><div <% if sys_op_mode == "4" then%> class="powersafex"> <%:net_map_pwsaving%> <% else %> class="powersafe"><a href="<%=controller%>/easy/pwsaving" target="contenthtml" onClick="Power_Saving();"><%:net_map_pwsaving%></a>  <% end %> </div></td>
       <td rowspan="2"><img src="<%=media%>/easy/images/line.jpg" width="2" height="76" /></td>
       <td><div <% if sys_op_mode == "2" or sys_op_mode == "3" then%> class="parentalx"> Parental Control <% else %> class="parental"><a href="<%=controller%>/easy/ctfilter" target="contenthtml" onClick="Content_Filter();">Parental Control</a>  <% end %> </div></td>
	   <td rowspan="2"><img src="<%=media%>/easy/images/line.jpg" width="2" height="76" /></td>
       <td><div <% if sys_op_mode == "2" or sys_op_mode == "3" then%> class="bandwidthx"> <%:net_map_mgmt%> <% else %> class="bandwidth"><a href="<%=controller%>/easy/qos" target="contenthtml" onClick="Bandwidth_MGMT();"><%:net_map_mgmt%></a>  <% end %> </div></td>
       <td rowspan="2"><img src="<%=media%>/easy/images/line.jpg" width="2" height="76" /></td>
       <td><div <% if sys_op_mode == "2" or sys_op_mode == "3" then%> class="firewallx"> <%:net_map_firewall%> <% else %> class="firewall"><a href="<%=controller%>/easy/firewall" target="contenthtml" onClick="Firewall();"><%:net_map_firewall%></a> <% end %> </div></td>
       <td rowspan="2"><img src="<%=media%>/easy/images/line.jpg" width="2" height="76" /></td>
       <td><div <% if sys_op_mode == "4" then%> class="wirelessx"> <%:net_map_wireless_security%> <% else %> class="wireless"><a href="<%=controller%>/easy/wlan" target="contenthtml" onClick="Wireless_Security();"><%:net_map_wireless_security%></a> <% end %> </div></td>
     </tr>
     <tr>
       <td> <% if sys_op_mode == "2" or sys_op_mode == "3" then%> <div class="on_offx"> <% else %> <div class="on_off"> <% end %>
       	<script>
       	if(button_status[0])
       		document.write("<ul><li class='on_on' ><a href='#'></a></li><li class='off'><a href='#'></a></li></ul>");
       	else
       		document.write("<ul><li class='on' ><a href='#'></a></li><li class='off_on'><a href='#'></a></li></ul>");
       	</script>
       </div></td>
       <td> <% if sys_op_mode == "4" then%> <div class="on_off2x"> <% else %> <div class="on_off2"> <% end %>
       	<script>
       	if(button_status[1])
       		document.write("<ul><li class='on_on' ><a href='#'></a></li><li class='off'><a href='#'></a></li></ul>");
       	else
       		document.write("<ul><li class='on' ><a href='#'></a></li><li class='off_on'><a href='#'></a></li></ul>");
       	</script>
       	</div></td>
       <td><% if sys_op_mode == "2" or sys_op_mode == "3" then%> <div class="on_off3x"> <% else %> <div class="on_off3"> <% end %>
       	<script>
       	if(button_status[2])
       		document.write("<ul><li class='on_on' ><a href='#'></a></li><li class='off'><a href='#'></a></li></ul>");
       	else
       		document.write("<ul><li class='on' ><a href='#'></a></li><li class='off_on'><a href='#'></a></li></ul>");
       	</script>
       	</div></td>
       <td> <% if sys_op_mode == "2" or sys_op_mode == "3" then%> <div class="on_off4x"> <% else %> <div class="on_off4"> <% end %>
       	<script>
       	if(button_status[3])
       		document.write("<ul><li class='on_on' ><a href='#'></a></li><li class='off'><a href='#'></a></li></ul>");
       	else
       		document.write("<ul><li class='on' ><a href='#'></a></li><li class='off_on'><a href='#'></a></li></ul>");
       	</script>
       	</div></td>
       <td><% if sys_op_mode == "2" or sys_op_mode == "3" then%> <div class="on_off5x"> <% else %> <div class="on_off5"> <% end %>
       	<script>
       	if(button_status[4])
       		document.write("<ul><li class='on_on' ><a href='#'></a></li><li class='off'><a href='#'></a></li></ul>");
       	else
       		document.write("<ul><li class='on' ><a href='#'></a></li><li class='off_on'><a href='#'></a></li></ul>");
       	</script>
       	</div></td>
       <td>&nbsp;</td>
     </tr>
   </table>
</div>
  <div class="on_off6" id="on_off6">
  <ul><li class="on_on"><a href="#"></a></li><li class="off"><a href="#"></a></li></ul></div>
</div>
<div class="mask" id="b-mask"></div>
<div id="load" class="load" align="center">
	<img src="<%=media%>/easy/images/loading.gif" /><%:net_map_loading%></div>  
<div class="layer1" id="layer1">
  <div class="bandwidthframe" id="b-bandwidthframe">
    <ul>
      <li class="popup_top"></li>
      <li class="popup_main"></li>
      <li class="popup_down"></li>
    </ul>
  </div>
  <div class="unit_bandwidth_icon" id="b-icon"></div>
  <div class="unit_bandwidth_title" id="b-title">Bandwidth MGMT</div>
  <div class="close"id="b-close"><a href="<%=controller%>/easy/networkmap" target="_parent" ></a></div>
  <div class="bandwidth_content" id="bandwidht_conternt">
    <iframe  id="contenthtml" name = "contenthtml"  onload=loadFile() style="border:0px solid orange; " frameborder="0" width="600" height="390" scrolling="no"></iframe>
  </div>
</div>
<div id="popup3_table">
  <table width="60%" border="0" cellspacing="0" cellpadding="0">
  <tr>
    <td><table width="100%" height="37" border="0" cellpadding="0" cellspacing="0">
      <tr>
        <td width="19" height="37"><img src="<%=media%>/admin/images/popup_top_left.gif" width="19" height="45" /></td>
        <td background="<%=media%>/admin/images/popup_top_center.gif" class="table_title">Log Out</td>
        <td width="15" background="<%=media%>/admin/images/popup_top_center.gif"><a href="#" class="iclose" onclick="MM_showHideLayers('popup','','hide','popup3_table','','hide')"></a></td>
        <td width="19" height="45"><img src="<%=media%>/admin/images/popup_top_right.gif" width="19" height="45" /></td>
      </tr>
    </table></td>
  </tr>
  <tr>
    <td><table width="100%" border="0" cellpadding="0" cellspacing="0">
      <tr>
        <td width="19" background="<%=media%>/admin/images/popup_main_left.gif">&nbsp;</td>
        <td bgcolor="#FFFFFF"><span class="popupcontent"> 
          <table width="95%" border="0" align="center" cellpadding="0" cellspacing="0">
            <tr>
              <td width="27%"><center>
                <img src="<%=media%>/admin/images/popup_i_message.gif" width="38" height="35" />
              </center>              </td>
              <td width="73%">Are you sure you want to log out?</td>
            </tr>
          </table>
         
        </span></td>
        <td width="19" background="<%=media%>/admin/images/popup_main_right.gif">&nbsp;</td>
      </tr>
    </table></td>
  </tr>
  <tr>
    <td><table width="100%" height="37" border="0" cellpadding="0" cellspacing="0">
      <tr>
        <td width="19" height="48"><img src="<%=media%>/admin/images/popup_down_left.gif" width="19" height="48" /></td>
        <td background="<%=media%>/admin/images/popup_down_center.gif">
		<div class="button2"><ul>   
    <li><a href="#" title="Reset"><span onclick="MM_showHideLayers('popup','','hide','popup3_table','','hide')">No</span></a></li>
	<li><a href="<%=controller%>/easy/logout" title="Reset"><span>Yes</span></a></li>
	</ul></div></td>
        <td width="19" height="37"><img src="<%=media%>/admin/images/popup_down_right.gif" width="19" height="48" /></td>
      </tr>
    </table></td>
  </tr>
</table></div>

<!--////////////////ShowDeviceInfo_begin///////////////-->
<div id="popup_getinfo">

<table width="100%" border="0" cellspacing="0" cellpadding="0">

<tr>
<td><table width="100%" height="37" border="0" cellpadding="0" cellspacing="0">
<tr>
<td width="19" height="45"><img src="<%=media%>/admin/images/popup_top_left.gif" width="19" height="45" /></td>
<td background="<%=media%>/admin/images/popup_top_center.gif" class="table_title" id="inner001">NBG5615</td>
<td width="15" background="<%=media%>/admin/images/popup_top_center.gif"></td>
<td width="19" height="45"><img src="<%=media%>/admin/images/popup_top_right.gif" width="19" height="45" /></td>
</tr>
</table>
</tr>
<tr>
<td><table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td width="19" background="<%=media%>/admin/images/popup_main_left.gif">&nbsp;</td>
<td bgcolor="#FFFFFF"><span class="popupcontent"> 

<table width="100%" height="35px" cellspacing="0" cellpadding="0" border="0">
		<tbody>
            <tr>
                <td>
                    <center>
                        <img id="inner011" style="display:block; margin-top:4px;" src="<%=media%>/easy/images/network/i_pc.gif"></img>
                    </center>
                </td>
                <td>
                    <!--<span class="blod"></span>-->
                    <table width="100%" cellspacing="0" cellpadding="0" border="0">
                        <tbody>
                            <tr>
                                <td width="45%">
                                    IP Address:
                                </td>
                                <td id="inner002">
                                    Ip
                                </td>
                            </tr>
                            <tr>
																<td width="45%">
                                    MAC Address:
                                </td>
                                <td id="inner003">
                                    MAC
                                </td>	
                            </tr>
                            <tr>
                                <td>
                                    ConnectionType:
                                </td>
                                <td id="inner004">
                                    Type
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    OS Type:
                                </td>
                                <td id="inner005">
                                    OsType
                                </td>
                            </tr>
                        </tbody>
                    </table>
			<!-- <span class="blod"></span> -->
                </td>  
            </tr>
        </tbody>
    </table>

</span></td>
<td width="19" background="<%=media%>/admin/images/popup_main_right.gif">&nbsp;</td>
</tr>
</table></td>
</tr>
<tr>
<td><table width="100%" height="37" border="0" cellpadding="0" cellspacing="0">
<tr>
<td width="19" height="48"><img src="<%=media%>/admin/images/popup_down_left.gif" width="19" height="48" /></td>
<td background="<%=media%>/admin/images/popup_down_center.gif">

<div class="close"id="b-close"><a href="<%=controller%>/easy/networkmap" target="_parent" ></a></div>

<div class="button2"><ul>   
<li></li>
<li></li>
</ul></div></td>
<td width="19" height="37"><img src="<%=media%>/admin/images/popup_down_right.gif" width="19" height="48" /></td>
</tr>
</table></td>
</tr>
</table>
</div>
<!--////////////////ShowDeviceInfo_end///////////////-->
<div id="popup_scan_network">
<table width="60%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td><table width="100%" height="37" border="0" cellpadding="0" cellspacing="0">
<tr>
<td width="19" height="37"><img src="<%=media%>/admin/images/popup_top_left.gif" width="19" height="45" /></td>
<td background="<%=media%>/admin/images/popup_top_center.gif" class="table_title">NBG6616</td>
<td width="15" background="<%=media%>/admin/images/popup_top_center.gif"></td>
<td width="19" height="45"><img src="<%=media%>/admin/images/popup_top_right.gif" width="19" height="45" /></td>
</tr>
</table></td>
</tr>
<tr>
<td><table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td width="19" background="<%=media%>/admin/images/popup_main_left.gif">&nbsp;</td>
<td bgcolor="#FFFFFF"><span class="popupcontent"> 
<table width="95%" border="0" align="center" cellpadding="0" cellspacing="0">
<tr>
<td width="27%"><center>
<img src="<%=media%>/easy/images/loading.gif" />
</center>
</td>
<td width="73%" id=id_ScanningyourNetwork><%:net_map_scan%></td>
</tr>
</table>
</span></td>
<td width="19" background="<%=media%>/admin/images/popup_main_right.gif">&nbsp;</td>
</tr>
</table></td>
</tr>
<tr>
<td><table width="100%" height="37" border="0" cellpadding="0" cellspacing="0">
<tr>
<td width="19" height="48"><img src="<%=media%>/admin/images/popup_down_left.gif" width="19" height="48" /></td>
<td background="<%=media%>/admin/images/popup_down_center.gif">
<div class="button2"><ul>   
<li></li>
<li></li>
</ul></div></td>
<td width="19" height="37"><img src="<%=media%>/admin/images/popup_down_right.gif" width="19" height="48" /></td>
</tr>
</table></td>
</tr>
</table></div>
</form>
<form method="post" name="easy_set_info" action="<%=controller%>/easy/easysetapply">
<input type="hidden" name="easy_set_button_job" value="0" />
<input type="hidden" name="easy_set_button_mode" value="0" />
</form>
</body>
<form method="post" name="NTP">
<input type="hidden" name="mtenCurrent_Hour" value='<%=string.match(luci.sys.exec("date +%H"),"(%d+)")%>' />
<input type="hidden" name="mtenCurrent_Min" value='<%=string.match(luci.sys.exec("date +%M"),"(%d+)")%>' />
<input type="hidden" name="mtenCurrent_Sec" value='<%=string.match(luci.sys.exec("date +%S"),"(%d+)")%>' />
<input type="hidden" name="mtenCurrent_Year" value='<%=string.match(luci.sys.exec("date +%Y"),"(%d+)")%>' />
<input type="hidden" name="mtenCurrent_Mon" value='<%=string.match(luci.sys.exec("date +%m"),"(%d+)")%>' />
<input type="hidden" name="mtenCurrent_Day" value='<%=string.match(luci.sys.exec("date +%d"),"(%d+)")%>' />
</form>
<script language="javascript">
$(document).click(function(event){
	$(".devInfo").fadeOut("fast");
});

$(".devInfo").click(function(event){
	event.stopPropagation();
});

$(".word_button a").click(function(event) {
	var id = event.target.id;
	var tmp = id.split("_");
	var index=0;
	var sta_connType='';
	var i=0;
	var href_item02='<%=controller%>/easy/parental_display?';
	var href_item03='<%=controller%>/easy/blocking_service?';
	
	var img_tmp=$("#inner011");
	
	if(tmp[0]=="ethernet") {		
		index= parseInt(tmp[1].substring(4,5));
		i=current_ethernet_start_index+index-1;
		sta_connType="Ethernet";
		href_item02 += 'sta_mac=' +lan_mac[i];
		
		if(lan_name[i]==""){
			document.getElementById("inner001").innerHTML = lan_ip[i];
		}
		else{
			document.getElementById("inner001").innerHTML = lan_name[i];
		}
		
		document.getElementById("inner002").innerHTML = lan_ip[i];
		document.getElementById("inner003").innerHTML = lan_mac[i];
		document.getElementById("inner004").innerHTML = sta_connType;
		document.getElementById("inner005").innerHTML = lan_os_type[i];		
		img_tmp.attr("src", "<%=media%>/easy/images/network/i_pc.gif");
		
		if(lan_block_flag[i]==1)
		{
			document.getElementById('blocking_0'+(i-current_ethernet_start_index+1)).innerHTML = "UnBlock";
			href_item03 += 'blocking_flag=0'+'&mac='+lan_mac[i];
		}
		else
		{
			document.getElementById('blocking_0'+(i-current_ethernet_start_index+1)).innerHTML = "Block";
			href_item03 += 'blocking_flag=1'+'&mac='+lan_mac[i];
		}	
	}	
	else{
		//Wireless
		index= parseInt(tmp[1].substring(4,5));
		i=current_wireless_start_index+index-1;
		sta_connType="Wireless";
		
		if(wlan_name[i]==""){
			document.getElementById("inner001").innerHTML = wlan_ip[i];
		}
		else{
			document.getElementById("inner001").innerHTML = wlan_name[i];
		}
		href_item02 += 'sta_mac=' +wlan_mac[i];
		document.getElementById("inner002").innerHTML = wlan_ip[i];
		document.getElementById("inner003").innerHTML = wlan_mac[i];
		document.getElementById("inner004").innerHTML = sta_connType;
		document.getElementById("inner005").innerHTML = wlan_os_type[i];	
		img_tmp.attr("src", "<%=media%>/easy/images/network/i_nb.gif");
		
		if(wlan_block_flag[i]==1)
		{
			document.getElementById('blocking_1'+(i-current_wireless_start_index+1)).innerHTML = "UnBlock";
			href_item03 += 'blocking_flag=0'+'&mac='+wlan_mac[i];
		}
		else
		{
			document.getElementById('blocking_1'+(i-current_wireless_start_index+1)).innerHTML = "Block";
			href_item03 += 'blocking_flag=1'+'&mac='+wlan_mac[i];
		}						
	}
	
	event.stopPropagation();
	var test = $(this).parent().parent().parent().parent().children(".devInfo");
	test.children().children().eq(1).children().attr("href", href_item03);
	test.children().children().eq(2).children().attr("href", href_item02);
	
	if(test.css("display")=="none") {
		$(".devInfo").fadeOut("fast");
		test.fadeIn("slow");
	}
	else 
		$(".devInfo").fadeOut("fast");
});

</script>

<script language="JavaScript">
start_Mon='<%=uci:get("time", "DST", "start_month")%>';
start_Hour='<%=uci:get("time", "DST", "start_clock")%>'; 
end_Mon='<%=uci:get("time", "DST", "end_month")%>';
end_Hour='<%=uci:get("time", "DST", "end_clock")%>';
enable_dst = '<%=uci:get("time", "DST", "enable")%>';

start_Num='<%=uci:get("time", "DST", "start_num")%>';
end_Num='<%=uci:get("time", "DST", "end_num")%>';
start_D='<%=uci:get("time", "DST", "start_d")%>';
end_D='<%=uci:get("time", "DST", "end_d")%>';

modes='<%=uci:get("time", "main", "mode")%>';
mtensNew_Year='<%=uci:get("time","main","manual_year")%>';

if(enable_dst=='1')
{
	daylightsaving();
}
initDateAndTime();
IncreaseSec();	
</script>
</html>
